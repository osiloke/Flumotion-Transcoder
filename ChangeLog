2009-03-30  Sebastien Merle  <sebastien@fluendo.com>

	* flumotion/transcoder/admin/proxy/component.py:
	Fix that prevent asking the mananger to stop a component ad vitam aeternam
	when killing a component fail with OrphanComponentError.

2009-03-30  Sebastien Merle  <sebastien@fluendo.com>

	* flumotion/transcoder/admin/admin.py:
	Removed a forgotten print statment.

2009-03-30  Sebastien Merle  <sebastien@fluendo.com>

	* flumotion/component/transcoder/analyst.py:
	Ensure the errback is called even in cases of unexpected errors.

2009-03-26  Sebastien Merle  <sebastien@fluendo.com>

	* flumotion/component/transcoder/disco2.py:
	Made the discoverer timeout bigger again.
	For the transcoder it's worst to fail under load because of a timeout
	than taking too much time to discover a file.

2009-03-25  Sebastien Merle  <sebastien@fluendo.com>

	* bin/flumotion-progressive-move:
	Fixed the progressive move script to handle links,
	and removed mp3 as a default postfix.

2009-03-25  Sebastien Merle  <sebastien@fluendo.com>

	* bin/flumotion-progressive-move:
	Updated the progressive move script to be able to start more
	than one instance at the same time.

2009-03-24  Sebastien Merle  <sebastien@fluendo.com>

	* flumotion/component/transcoder/disco2.py:
	Made the discoverer timeout bigger.

2009-03-13  Sebastien Merle  <sebastien@fluendo.com>

	* flumotion/component/transcoder/disco2.py:
	Fixed the new discoverer. It was failing when _maybe_finish
	was called in a gstreamer thread context, and when
	_cb_notify_caps_fixed was called multiple times.

2009-02-26  Jan Urbanski  <jurbanski@flumotion.com>

	* flumotion/transcoder/admin/datasource/sqlsource.py:
	Don't print password to the log.

2009-02-16  Sebastien Merle  <sebastien@fluendo.com>

	* flumotion/transcoder/admin/datastore/activity.py:
	Fixed the custom data fields for activities to be lower case.
	Mixed case is not supported.

2009-02-04  Jan Urbanski  <jurbanski@flumotion.com>

	* doc/rst/testing/functional-testing.rst:
	* flumotion/transcoder/admin/datasource/dataprops.py:
	Add testcases for HTTP Get notifier and SQL notifier and sync
	commments with the codechanges.

2009-02-03  Jan Urbanski  <jurbanski@flumotion.com>

	* doc/rst/testing/functional-testing.rst:
	* flumotion/transcoder/admin/datasource/dataprops.py:
	* flumotion/transcoder/admin/datasource/datasource.py:
	* flumotion/transcoder/admin/datasource/filesource.py:
	* flumotion/transcoder/admin/datastore/notification.py:
	Fix the incomplete refactoring when renaming requestTemplate to
	urlTemplate. add a test case for the HTTP notifications.

2009-01-28  Jan Urbanski  <jurbanski@flumotion.com>

	* doc/rst/configuration/admin-config.rst:
	* doc/rst/installation/build.rst:
	Add sections about database and diagnostician configuration.

	* doc/rst/installation/production.rst (added):
	Add documentation about running the transcoder in production.

2009-01-27  Jan Urbanski  <jurbanski@flumotion.com>

	* data/database/mysql/schema.sql:
	Add reporting queries taking only unique files into account and
	untabify the SQL file.

2009-01-26  Julien Le Goff  <jlegoff@flumotion.com>

	* doc/rst/configuration/encoder-config.rst:
	Fixed formatting issue.

2009-01-26  Julien Le Goff  <jlegoff@flumotion.com>

	* doc/rst/configuration/encoder-config.rst:
	Moved AAC doc in proper section.

2009-01-26  Julien Le Goff  <jlegoff@flumotion.com>

	* doc/rst/configuration/encoder-config.rst:
	Fixed formatting issues.

2009-01-26  Julien Le Goff  <jlegoff@flumotion.com>

	* doc/rst/configuration/encoder-config.rst:
	Added H.264 and AAC doc.

2009-01-22  Jan Urbanski  <jurbanski@flumotion.com>

	* data/database/mysql/schema.sql:
	Fix the SQL views.

2009-01-22  Jan Urbanski  <jurbanski@flumotion.com>

	* flumotion/component/transcoder/disco2.py:
	Actually use negotiated caps *for something other than debug messages*
	if available.

2009-01-22  Jan Urbanski  <jurbanski@flumotion.com>

	* flumotion/component/transcoder/disco2.py:
	Actually use negotiated caps if available.

2009-01-22  Julien Le Goff  <jlegoff@flumotion.com>

	* flumotion/component/transcoder/filemonitor.py:
	Fixed NULL value for mime type in the database.

2009-01-22  Julien Le Goff  <jlegoff@flumotion.com>

	* flumotion/component/transcoder/filemonitor.py:
	Changed the number of threads to be 2 at most, in order not to compute
	too many checksums in parallel.

2009-01-22  Sebastien Merle  <sebastien@fluendo.com>

	* flumotion/transcoder/tools/upgrade.py:
	Updated the upgrade script to support the new versions of config files.

2009-01-22  Sebastien Merle  <sebastien@fluendo.com>

	* Remove trailing white spaces.

2009-01-22  Jan Urbanski  <jurbanski@flumotion.com>

	* flumotion/component/transcoder/disco2.py:
	Return just the last tag instead of all the discovered tags. Guard
	against reieving the same caps more than once.

2009-01-22  Jan Urbanski  <jurbanski@flumotion.com>

	* flumotion/component/transcoder/analyst.py:
	Remove duplicate code.

	* flumotion/component/transcoder/filetranscoder.xml:
	Properly bundle disco2.py.

2009-01-21  Julien Le Goff  <jlegoff@flumotion.com>

	* flumotion/component/transcoder/filemonitor.py:
	Check that the file hasn't been removed while computing the
	checksum.

	* flumotion/transcoder/admin/adminconfig.py:
	Updates version number for admin config.

2009-01-21  Jan Urbanski  <jurbanski@flumotion.com>

	* flumotion/transcoder/admin/admin.py:
	Only run prognosis when there's a report.

2009-01-21  Jan Urbanski  <jurbanski@flumotion.com>

	* data/database/mysql/schema.sql:
	Compute total transcoding time correctly.

	* flumotion/component/transcoder/disco2.py:
	Get the negotiated caps and fall back to just caps if they don't
	exist. Should fix problems with getting unfixed caps from the
	discoverer.

2009-01-20  Sebastien Merle  <sebastien@fluendo.com>

	* conf/transcoder/transcoder-admin.ini:
	* conf/transcoder/transcoder-data.ini:
	Updated the configuration comments, and access properties.

2009-01-20  Jan Urbanski  <jurbanski@flumotion.com>

	* bin/Makefile.am:
	Fix RPM buildability.

2009-01-20  Jan Urbanski  <jurbanski@flumotion.com>

	* flumotion/transcoder/admin/admerrs.py:
	Call the correct superclass' method.

2009-01-20  Julien Le Goff  <jlegoff@flumotion.com>

	* flumotion/component/transcoder/filemonitor.py:
	Fixed "unpack non-sequence" traceback in File Monitor.

2009-01-19  Julien Le Goff  <jlegoff@flumotion.com>

	* bin/Makefile.am:
	Fixed 'make distcheck' error.

2009-01-19  Julien Le Goff  <jlegoff@flumotion.com>

	* flumotion-transcoder.spec.in:
	Fixed diagnosis config error

2009-01-19  Julien Le Goff  <jlegoff@flumotion.com>

	* flumotion-transcoder.spec.in:
	Fixed diagnosis config error

2009-01-19  Julien Le Goff  <jlegoff@flumotion.com>

	* flumotion/component/transcoder/filemonitor.py:
	* flumotion/component/transcoder/job.py:
	Symlinks are now followed when determining file types.

2009-01-15  Julien Le Goff  <jlegoff@flumotion.com>

	* bin/Makefile.am:
	* misc/Makefile.am:
	* flumotion/test/Makefile.am:
	Fixed 'make distcheck' error.

	* conf/Makefile.am:
	* conf/transcoder/diagnosis.conf (added):
	* conf/transcoder/diagnosis.conf:
	* conf/transcoder/transcoder-admin.ini:
	* flumotion-transcoder.spec.in:
	Added diagnosis config file to package.

	* flumotion/transcoder/admin/admin.py:
	* flumotion/transcoder/admin/transtask.py:
	Fixed attempt count bug.

2009-01-15  Jan Urbanski  <jurbanski@flumotion.com>

	* flumotion/transcoder/admin/admin.py:
	Read the file size from UIState on transcoder admin restarts.

2009-01-15  Julien Le Goff  <jlegoff@flumotion.com>

	* data/database/mysql/schema.sql:
	* flumotion/transcoder/admin/admin.py:
	* flumotion/transcoder/admin/adminconfig.py:
	* flumotion/transcoder/admin/context/admin.py:
	* flumotion/transcoder/admin/datasource/sqlsource.py:
	* flumotion/transcoder/admin/datastore/reportsstore.py:
	* flumotion/transcoder/admin/diagnostic.py:
	* flumotion/transcoder/admin/proxy/monitor.py:
	Fixed wrong function signature in _doBroadcastUIState
	* flumotion/transcoder/enums.py:
	* flumotion/transcoder/transreport.py:
	Added diagnostic procedure.

2009-01-14  Jan Urbanski  <jurbanski@flumotion.com>

	* flumotion-transcoder.spec.in:
	Add MySQL-python to BuildRequires, because configure looks for it.

2009-01-14  Jan Urbanski  <jurbanski@flumotion.com>

	* flumotion/transcoder/admin/datastore/Makefile.am:
	Dist the reportsstore module.

2009-01-12  Jan Urbanski  <jurbanski@flumotion.com>

	* doc/examples/customers/fluendo.ini:
	Fix the example customer profile to make it work in a default
	installation.

2009-01-09  Julien Le Goff  <jlegoff@flumotion.com>

	* flumotion/component/transcoder/job.py:
	* flumotion/transcoder/admin/admin.py:
	* flumotion/transcoder/admin/admintask.py:
	* flumotion/transcoder/transreport.py:
	Added machine name, worker name and number of attempts in DB.

2009-01-08  Julien Le Goff  <jlegoff@flumotion.com>

	* data/database/mysql/schema.sql:
	* flumotion/component/transcoder/filemonitor.py:
	* flumotion/component/transcoder/filetranscoder.py:
	* flumotion/transcoder/admin/admin.py:
	* flumotion/transcoder/admin/datasource/sqlsource.py:
	* flumotion/transcoder/admin/datastore/reportsstore.py:
	* flumotion/transcoder/admin/montask.py:
	* flumotion/transcoder/admin/proxy/monitor.py:
	* flumotion/transcoder/transreport.py:
	Added audio codec, video codec, mime type, cpu/real time in DB +
	fixed report path.

2009-01-08  Jan Urbanski  <jurbanski@flumotion.com>

	* flumotion/transcoder/admin/scheduler.py:
	Handle failures in retrieving the transcoding report.

	* flumotion/transcoder/admin/admin.py:
	Add comments.

2009-01-08  Jan Urbanski  <jurbanski@flumotion.com>

	* flumotion/transcoder/admin/adminconfig.py:
	* conf/transcoder/transcoder-admin.ini:
	Rename state-data-source to reports-data-source and fix typo in default
	transcoder username.

	* flumotion/component/transcoder/filemonitor.py:
	Throw away the tzinfo precisely now.

	* flumotion/component/transcoder/watcher.py:
	Don't throw away tzinfo just yet.

	* flumotion/transcoder/admin/admin.py:
	* flumotion/transcoder/admin/context/admin.py:
	Rename SQLdatasource to reportsDataSource.

	* flumotion/transcoder/admin/datastore/activity.py:
	Allow proxies without a _touche() method.

	* flumotion/transcoder/admin/datasource/datasource.py:
	* flumotion/transcoder/admin/datastore/base.py:
	* flumotion/transcoder/admin/datasource/filesource.py:
	Rename IDataSource to IInformationSource, define IReportsSource and
	make IDataSource the common superclass of those two interfaces.

	* flumotion/transcoder/admin/datasource/sqlsource.py:
	Make SQLDataSource implement IReportsSource.

	* flumotion/transcoder/admin/datastore/store.py:
	* flumotion/transcoder/admin/datastore/reportsstore.py (added):
	Factor out the ReportsStore to a separate module.

	* flumotion/transcoder/admin/proxy/monitor.py:
	Prefix unused variables with _.

2009-01-08  Julien Le Goff <jlegoff@flumotion.com>

	* flumotion/component/transcoder/filemonitor.py:
	* flumotion/component/transcoder/watcher.py:
	* flumotion/transcoder/admin/admin.py:
	* flumotion/transcoder/admin/datasource/sqlsource.py:
	* flumotion/transcoder/admin/datastore/store.py:
	* flumotion/transcoder/admin/montask.py:
	* flumotion/transcoder/admin/proxy/monitor.py:
	Checksum is now collected and inserted into the database.

2009-01-08  Jan Urbanski  <jurbanski@flumotion.com>

	* flumotion/component/transcoder/disco2.py:
	Audio can have no depth if it's float.

2009-01-07  Jan Urbanski  <jurbanski@flumotion.com>

	* flumotion/transcoder/admin/admintask.py:
	We don't have the component, only a proxy.

2009-01-07  Jan Urbanski  <jurbanski@flumotion.com>

	* flumotion/component/transcoder/transcoder.py:
	The file-completed signal's signature changed to include the stat
	tuple, adapt a forgotten callback.

2009-01-05  Jan Urbanski  <jurbanski@flumotion.com>

	* flumotion/component/transcoder/Makefile.am:
	Make make notice the new discoverer.

2009-01-05  Jan Urbanski  <jurbanski@flumotion.com>

	* flumotion/component/transcoder/analyst.py:
	* flumotion/component/transcoder/disco2.py (added):
	Add the new, experimental discoverer.

2009-01-05  Jan Urbanski  <jurbanski@flumotion.com>

	* configure.ac:
	Bump micro version to be able to distinguish from trunk and test from
	packages.

2008-12-31  Jan Urbanski  <jurbanski@flumotion.com>

	* flumotion/component/transcoder/watcher.py:
	Send stat and file detection time information when emitting file-added
	and file-completed signals.

	* flumotion/component/transcoder/filemonitor.py:
	Propagate information from file-added and file-completed signals to the
	UIState.

	* flumotion/component/transcoder/filemonitor_admin_gtk.py:
	Adapt to the changes in the pending-file UIState key, which now stores
	more information than just the file state.

	* flumotion/transcoder/admin/montask.py:
	* flumotion/transcoder/admin/proxy/monitor.py:
	Propagate information about the monitored file in the file-added and
	file-state-changed signals.

	* flumotion/transcoder/admin/scheduler.py:
	Emit transcoding-done and transcoding-failed signals when having
	the transcoding report available and pass that report along with the
	signal.

	* flumotion/transcoder/admin/admin.py:
	Gather information about transcodifications in progress. Store that
	information in the reports store after the transcodification has
	finished.

	* flumotion/transcoder/enums.py:
	Add an enum for possible transcodification outcomes.

	* flumotion/transcoder/admin/datastore/store.py:
	Add transcoder reports store and a store proxy.

	* flumotion/transcoder/admin/context/admin.py:
	Add method to get a SQL data source from the admin context.

	* flumotion/transcoder/admin/datasource/sqlsource.py:
	Implement a SQL data source capable of issuing and storing transcoder
	reports.

	* data/database/mysql/preamble.sql:
	* data/database/mysql/schema.sql:
	* data/database/mysql/user_setup.sql:
	Add MySQL database schema for storing transcoder reports.

	* data/database/mysql/initial_data.sql (deleted):
	Moved initial data to schema.sql, where it makes more sense.

	* data/database/mysql/Makefile.am:
	Dist the new SQL scripts.

	* conf/transcoder/transcoder-admin.ini:
	Add database connection info to the configuration file.
	* flumotion/transcoder/admin/adminconfig.py:
	Add state-data-source section with connection-info.

	* configure.ac:
	Check for MySQL-python.
	* flumotion-transcoder.spec.in:
	Add dependency on MySQL-python.

	* flumotion/transcoder/admin/enums.py:
	Add trailing newline.

2008-12-05  Sebastien Merle  <sebastien@fluendo.com>

	* bin/flumotion-progressive-move:
	Updated the script for changes in flumotion.

2008-12-05  Sebastien Merle  <sebastien@fluendo.com>

	* flumotion/transcoder/admin/scheduler.py:
	* flumotion/transcoder/admin/taskmanager.py:
	Quick fix for #2921.

2008-12-04  Sebastien Merle  <sebastien@fluendo.com>

	* flumotion/transcoder/admin/scheduler.py:
	Awake the task starting loop when a tasks terminate.

2008-11-26  Sebastien Merle  <sebastien@fluendo.com>

	* flumotion/component/transcoder/varsets.py:
	Fixed a bug that appear when no link base directory was specified.
	Fixed bugs where the directory variables were retrieved with
	os.path.basename insteed of os.path.basedir.

2008-11-11  Jan Urbanski  <jurbanski@flumotion.com>

	* flumotion/component/transcoder/analyst.py:
	Fix two typos.

2008-09-18  Sebastien Merle  <sebastien@fluendo.com>

	* flumotion/transcoder/admin/scheduler.py:
	The scheduler do not have the remove the transcoding task,
	it's already done by the task manager.

2008-09-18  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/analyst.py:
    Fixed a bug when the caps object is empty but not None.

2008-09-08  Sebastien Merle  <sebastien@fluendo.com>

   * flumotion/component/transcoder/filetranscoder_admin_gtk.py:
   Made the transcoding component tab the first one.

2008-09-08  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor_admin_gtk.py:
    Made the monitoring tab the first one.

2008-09-04  Sebastien Merle  <sebastien@fluendo.com>

    * conf/managers/transcoder/planet.xml:
    * flumotion/transcoder/manager/plugs.py:
    * flumotion/transcoder/manager/plugs.xml:
    Updated to match the plug naming convention.

2008-08-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/property/filetrans.py:
    Fixed a stupid bug.

2008-08-27  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/watcher.py:
    Fixed a bug that made the transcoding timeout to not work.

2008-08-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxy/component.py:
    * flumotion/transcoder/admin/taskmanager.py:
    * flumotion/transcoder/admin/transtask.py:
    More debug filtering.

2008-08-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admintask.py:
    * flumotion/transcoder/admin/montask.py:
    * flumotion/transcoder/admin/transtask.py:
    Fixed merge errors.

2008-08-25  Sebastien Merle  <sebastien@fluendo.com>

    Merged patch from platform-4 branch, changeset 12195.

    * flumotion/transcoder/admin/admintask.py:
    * flumotion/transcoder/admin/diagnostic.py:
    * flumotion/transcoder/admin/montask.py:
    * flumotion/transcoder/admin/proxy/component.py:
    * flumotion/transcoder/admin/transtask.py:
    More debug filtering.

2008-08-25  Sebastien Merle  <sebastien@fluendo.com>

    Merged patch from platform-4 branch, changeset 12180, 12184, and 12185.

    * bin/Makefile.am:
    * bin/flumotion-progressive-move:
    * flumotion-transcoder.spec.in:
    Added the progressive move script to the distribution.

2008-08-25  Sebastien Merle  <sebastien@fluendo.com>

    Merged patch from platform-4 branch, changeset 12179.

    * flumotion/transcoder/admin/admintask.py:
    Enforce component deletion when there already is one running.

2008-08-25  Sebastien Merle  <sebastien@fluendo.com>

    Merged patch from platform-4 branch, changeset 12159.

    * flumotion/component/transcoder/watcher.py:
    Changed to use normal loop insteed of list comprehension.
    * flumotion/transcoder/admin/admintask.py:
    * flumotion/transcoder/admin/montask.py:
    * flumotion/transcoder/admin/transtask.py:
    When restored, components UI state was not retrieved again,
    leading to components without state feedback.
    Fixes #2121

2008-08-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/watcher.py:
    Merged patch from platform-4 branch, changeset 12049 and 12051.
    Temporary patch to prevent the monitor connection to the manager
     to time out when dealing with MANY files.
     In python 2.4 yield must have a parameter.

2008-07-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/main.py:
    Updated to match flumotion trunk. All PID related
    function moved to the module flumotion.common.process.

2008-07-29  Sebastien Merle  <sebastien@fluendo.com>

    * Makefile.am:
    * flumotion/transcoder/admin/property/Makefile.am:
    More build fixes.

2008-07-29  Sebastien Merle  <sebastien@fluendo.com>

    * Makefile.am:
    * flumotion/transcoder/admin/proxy/Makefile.am:
    More build fixes.

2008-07-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/Makefile.am:
    * flumotion/transcoder/admin/api/Makefile.am:
    * flumotion/transcoder/admin/api/mediums/Makefile.am:
    * flumotion/transcoder/admin/datastore/Makefile.am:
    Fixed the build scripts.

2008-07-29  Sebastien Merle  <sebastien@fluendo.com>

    * env.in:
    Use absolute path to allow links the the env script.

2008-07-28  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor_admin_gtk.py:
    Fixed a bug where the monitor tree vew was cleared and refreshed
    every time a state value changed, making the tree collapse.

2008-07-28  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/base.xml:
    * flumotion/component/transcoder/filemonitor_admin_gtk.py:
    * flumotion/component/transcoder/filetranscoder_admin_gtk.py:
    * flumotion/transcoder/Makefile.am:
    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/diagnostic.py:
    * flumotion/transcoder/i18n.py:
    Updated to match i18n changes in flumotion.

2008-07-28  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion-transcoder.spec.in:
    Set the flumotion-inhouse required version number.

2008-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor.py:
    Merged patch from platform-4 branch, changeset 11687.
    Fixed a bug that appears when removing files from incoming.

2008-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxy/component.py:
    Now retry to stop a component when the deletion fail.
    It fixes a problem with some version of flumotion where
    stopping a component that is sad but running not really stop it,
    but only stop the process and keep the sad mood.

2008-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/notifysubs.py:
    Merged patch from platform-4 branch, changeset 11486.
    Fixed a 'divide by zero' bug.

2008-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor.py:
    Merged patch from platform-4 branch, changeset 11485.
    Made the monitor move the files asynchronously too.
    It prevent the components going lost with big files
    when moving actually copy the file.

2008-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/basetargets.py:
    * flumotion/component/transcoder/job.py:
    * flumotion/transcoder/admin/adminconsts.py:
    Merged patch from platform-4 branch, changeset 11479.
    Made the file copying/moving asynchronous by using deferToThread.
    It prevent the components going lost when copying/moving very big files.

2008-07-09  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/groupproxy.py:
    Fixed a bug when a call timeout.

2008-05-15  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/context/profile.py:
    * flumotion/transcoder/admin/scheduler.py:
    Fixed a BIG bug introduced by cleaning the identifiers.
    The scheduler was relying on the profile's identifier
    to be GLOBALY unique, and not only unique for a customer.
    Resolved by creating a context-level unique identifier
    for the profiles named uid.

2008-05-15  Sebastien Merle  <sebastien@fluendo.com>

    * Makefile.am:
    * configure.ac:
    * data/Makefile.am:
    * data/database/Makefile.am:
    * data/database/mysql/Makefile.am:
    * data/database/mysql/initial_data.sql:
    * data/database/mysql/preamble.sql:
    * data/database/mysql/schema.sql:
    * data/database/mysql/user_setup.sql:
    * flumotion-transcoder.spec.in:
    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/context/activity.py:
    * flumotion/transcoder/admin/context/notification.py:
    * flumotion/transcoder/admin/context/store.py:
    * flumotion/transcoder/admin/datasource/dataprops.py:
    * flumotion/transcoder/admin/datasource/datasource.py:
    * flumotion/transcoder/admin/datasource/filesource.py:
    * flumotion/transcoder/admin/datastore/activity.py:
    * flumotion/transcoder/admin/datastore/notification.py:
    * flumotion/transcoder/admin/datastore/store.py:
    * flumotion/transcoder/admin/enums.py:
    * flumotion/transcoder/admin/notifier.py:
    * flumotion/transcoder/admin/notifysubs.py:
    * flumotion/transcoder/admin/proxy/component.py:
    * flumotion/transcoder/substitution.py:
    "Forward" ported the SQL statement notification from platform 4.

2008-05-15  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor_admin_gtk.py:
    * flumotion/component/transcoder/filetranscoder_admin_gtk.py:
    Updated to match renaming in flumotion trunk. glade_file => gladeFile.

2008-05-14  Sebastien Merle  <sebastien@fluendo.com>

    * configure.ac:
    Arg, I confused the trunk and branch version and wrongly set the version...
    Fix the version to be the trunk version 0.5.3.1

2008-05-14  Sebastien Merle  <sebastien@fluendo.com>

    * configure.ac:
    Changed version to prevent confusion between platform-4 branch and trunk.

2008-05-07  Sebastien Merle  <sebastien@fluendo.com>

    * conf/transcoder/transcoder-admin.ini:
    * flumotion/transcoder/admin/adminconfig.py:
    * flumotion/transcoder/admin/api/config.py:
    Updated to use the new ports.

2008-05-07  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datasource/filesource.py:
    Removed the file extension from the customer identifier.

2008-05-05  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/config.py:
    * flumotion/transcoder/admin/datastore/customer.py:
    Minor doc fixes.

2008-04-30  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/api/api.py:
    * flumotion/transcoder/admin/api/interfaces.py:
    * flumotion/transcoder/admin/api/mediums/config.py:
    * flumotion/transcoder/admin/api/mediums/customer.py:
    * flumotion/transcoder/admin/api/mediums/profile.py:
    * flumotion/transcoder/admin/api/mediums/store.py:
    * flumotion/transcoder/admin/api/mediums/target.py:
    * flumotion/transcoder/admin/api/mediums/worker.py:
    * flumotion/transcoder/admin/context/customer.py:
    * flumotion/transcoder/admin/context/profile.py:
    * flumotion/transcoder/admin/context/store.py:
    Rollback to use store element for the API because
    using context would imply ceating unbound target and config elements.

2008-04-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/context/target.py:
    Fixed a bug in the target descriptor for file path.

2008-04-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/api/api.py:
    * flumotion/transcoder/admin/api/gateway.py:
    * flumotion/transcoder/admin/api/interfaces.py:
    * flumotion/transcoder/admin/api/mediums/Makefile.am:
    * flumotion/transcoder/admin/api/mediums/__init__.py:
    * flumotion/transcoder/admin/api/mediums/config.py:
    * flumotion/transcoder/admin/api/mediums/customer.py:
    * flumotion/transcoder/admin/api/mediums/named.py:
    * flumotion/transcoder/admin/api/mediums/profile.py:
    * flumotion/transcoder/admin/api/mediums/scheduler.py:
    * flumotion/transcoder/admin/api/mediums/store.py:
    * flumotion/transcoder/admin/api/mediums/target.py:
    * flumotion/transcoder/admin/api/mediums/worker.py:
    * flumotion/transcoder/admin/api/mediums/workerset.py:
    Updated the API to use context insteed of store elements.
    Proxy the store elements properties.

2008-04-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/context/base.py:
    * flumotion/transcoder/admin/context/profile.py:
    * flumotion/transcoder/admin/context/target.py:
    Removed forgotten commented code.

2008-04-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/context/activity.py:
    * flumotion/transcoder/admin/context/base.py:
    * flumotion/transcoder/admin/context/config.py:
    * flumotion/transcoder/admin/context/customer.py:
    * flumotion/transcoder/admin/context/notification.py:
    * flumotion/transcoder/admin/context/profile.py:
    * flumotion/transcoder/admin/context/store.py:
    * flumotion/transcoder/admin/context/target.py:
    * flumotion/transcoder/admin/datastore/notification.py:
    Update the context elements to use python's descriptor protocol.
    Updated the interfaces with attributes insteed of methods.

2008-04-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/notification.py:
    Removed some old declarations form interface.

2008-04-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxy/base.py:
    Made the attribute name private for now.

2008-04-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminelement.py:
    * flumotion/transcoder/admin/datastore/base.py:
    Added a check to prevent adding attributes.
    Used for early detection of attribute spelling mistakes.
    * flumotion/transcoder/admin/datastore/activity.py:
    Fixed a bug where the descriptor was used insteed of the object.
    * flumotion/transcoder/admin/notifier.py:
    Fixed an attribute spelling mistake

2008-04-28  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/context/activity.py:
    * flumotion/transcoder/admin/context/notification.py:
    * flumotion/transcoder/admin/datastore/activity.py:
    * flumotion/transcoder/admin/datastore/base.py:
    * flumotion/transcoder/admin/datastore/config.py:
    * flumotion/transcoder/admin/datastore/customer.py:
    * flumotion/transcoder/admin/datastore/notification.py:
    * flumotion/transcoder/admin/datastore/profile.py:
    * flumotion/transcoder/admin/datastore/store.py:
    * flumotion/transcoder/admin/datastore/target.py:
    * flumotion/transcoder/admin/notifier.py:
    Update the store elements to use python's descriptor protocol.
    Updated the interfaces with attributes insteed of methods.

2008-04-28  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/notifier.py:
    Fixed typo from the last commit.

2008-04-28  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/notifier.py:
    * flumotion/transcoder/admin/scheduler.py:
    Updated to use the store attributes to modify values.

2008-04-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admerrs.py:
    Minor fix.
    * flumotion/transcoder/admin/api/api.py:
    * flumotion/transcoder/admin/context/base.py:
    * flumotion/transcoder/admin/context/profile.py:
    * flumotion/transcoder/admin/context/target.py:
    * flumotion/transcoder/admin/datastore/activity.py:
    * flumotion/transcoder/admin/datastore/base.py:
    Updated to use the new annotation functions
    injectClassCallback and injectAttribute.

2008-04-24  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/api/mediums/config.py:
    * flumotion/transcoder/admin/api/mediums/named.py:
    * flumotion/transcoder/admin/api/mediums/worker.py:
    * flumotion/transcoder/admin/context/activity.py:
    * flumotion/transcoder/admin/context/customer.py:
    * flumotion/transcoder/admin/context/profile.py:
    * flumotion/transcoder/admin/context/state.py:
    * flumotion/transcoder/admin/context/target.py:
    * flumotion/transcoder/admin/datastore/activity.py:
    * flumotion/transcoder/admin/datastore/base.py:
    * flumotion/transcoder/admin/datastore/customer.py:
    * flumotion/transcoder/admin/datastore/profile.py:
    * flumotion/transcoder/admin/datastore/store.py:
    * flumotion/transcoder/admin/montask.py:
    * flumotion/transcoder/admin/notifier.py:
    * flumotion/transcoder/admin/notifysubs.py:
    * flumotion/transcoder/admin/property/filemon.py:
    * flumotion/transcoder/admin/property/filetrans.py:
    * flumotion/transcoder/admin/scheduler.py:
    * flumotion/transcoder/admin/transtask.py:
    Now using the store and context element attributes.
    Setting attribute value not yet working.

2008-04-24  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/test/test_storecontexts.py:
    Updated the context test tu use attributes insteed of getter.

2008-04-24  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/context/base.py:
    removed unused code.

2008-04-24  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/test/test_storecontexts.py:
    * flumotion/transcoder/admin/context/activity.py:
    * flumotion/transcoder/admin/context/base.py:
    * flumotion/transcoder/admin/context/config.py:
    * flumotion/transcoder/admin/context/customer.py:
    * flumotion/transcoder/admin/context/notification.py:
    * flumotion/transcoder/admin/context/profile.py:
    * flumotion/transcoder/admin/context/store.py:
    * flumotion/transcoder/admin/context/target.py:
    * flumotion/transcoder/admin/datastore/activity.py:
    * flumotion/transcoder/admin/datastore/base.py:
    * flumotion/transcoder/admin/datastore/config.py:
    * flumotion/transcoder/admin/datastore/customer.py:
    * flumotion/transcoder/admin/datastore/notification.py:
    * flumotion/transcoder/admin/datastore/profile.py:
    * flumotion/transcoder/admin/datastore/store.py:
    * flumotion/transcoder/admin/datastore/target.py:
    * flumotion/transcoder/admin/notifier.py:
    Prepared the store and context elements for using
    dynamic attributes insteed of getters.

2008-04-24  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/context/activity.py:
    * flumotion/transcoder/admin/context/base.py:
    * flumotion/transcoder/admin/context/config.py:
    * flumotion/transcoder/admin/context/customer.py:
    * flumotion/transcoder/admin/context/notification.py:
    * flumotion/transcoder/admin/context/profile.py:
    * flumotion/transcoder/admin/context/state.py:
    * flumotion/transcoder/admin/context/store.py:
    * flumotion/transcoder/admin/context/target.py:
    * flumotion/transcoder/admin/datastore/activity.py:
    * flumotion/transcoder/admin/datastore/config.py:
    Added interfaces to the stores' contexts for the API
    to be able to adapte the contexts automatically with mediums

2008-04-23  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxy/managerset.py:
    Generate an identifier for the manager from the flumotion
    managerid but removing the user name for privacy
    because the manager identifier will be published by the API.

2008-04-23  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/activity.py:
    * flumotion/transcoder/admin/datastore/base.py:
    * flumotion/transcoder/admin/proxy/worker.py:
    Fixed a bug where the identifier and label was not set in contexts.
    Put back the getName() getter for workers interface.

2008-04-23  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/customer.py:
    * flumotion/transcoder/admin/datastore/profile.py:
    * flumotion/transcoder/admin/datastore/target.py:
    Forgoten to remove the hacks to use the names as identifiers.

2008-04-23  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datasource/dataprops.py:
    * flumotion/transcoder/admin/datasource/datasource.py:
    * flumotion/transcoder/admin/datasource/filesource.py:
    * flumotion/transcoder/admin/datastore/activity.py:
    * flumotion/transcoder/admin/datastore/customer.py:
    * flumotion/transcoder/admin/datastore/profile.py:
    * flumotion/transcoder/admin/datastore/store.py:
    Made the store elements realy use the underlying
    unique identifier insteed of the element name.

2008-04-23  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/adminelement.py:
    * flumotion/transcoder/admin/admintask.py:
    * flumotion/transcoder/admin/api/mediums/named.py:
    * flumotion/transcoder/admin/context/base.py:
    * flumotion/transcoder/admin/context/customer.py:
    * flumotion/transcoder/admin/context/profile.py:
    * flumotion/transcoder/admin/context/worker.py:
    * flumotion/transcoder/admin/datastore/base.py:
    * flumotion/transcoder/admin/datastore/config.py:
    * flumotion/transcoder/admin/datastore/customer.py:
    * flumotion/transcoder/admin/datastore/profile.py:
    * flumotion/transcoder/admin/datastore/store.py:
    * flumotion/transcoder/admin/datastore/target.py:
    * flumotion/transcoder/admin/document.py:
    * flumotion/transcoder/admin/janitor.py:
    * flumotion/transcoder/admin/monitoring.py:
    * flumotion/transcoder/admin/montask.py:
    * flumotion/transcoder/admin/notifier.py:
    * flumotion/transcoder/admin/property/filetrans.py:
    * flumotion/transcoder/admin/proxy/base.py:
    * flumotion/transcoder/admin/proxy/component.py:
    * flumotion/transcoder/admin/proxy/componentset.py:
    * flumotion/transcoder/admin/proxy/group.py:
    * flumotion/transcoder/admin/proxy/manager.py:
    * flumotion/transcoder/admin/proxy/monitorset.py:
    * flumotion/transcoder/admin/proxy/transcoderset.py:
    * flumotion/transcoder/admin/proxy/workerset.py:
    * flumotion/transcoder/admin/scheduler.py:
    * flumotion/transcoder/admin/taskmanager.py:
    * flumotion/transcoder/admin/transcoding.py:
    * flumotion/transcoder/admin/transtask.py:
    Last step in making identifier and label attributes
    insteed of having to use getIdentifier() and getLabel().

2008-04-23  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/context/activity.py:
    * flumotion/transcoder/admin/context/base.py:
    * flumotion/transcoder/admin/context/customer.py:
    * flumotion/transcoder/admin/context/notification.py:
    * flumotion/transcoder/admin/context/profile.py:
    * flumotion/transcoder/admin/context/target.py:
    * flumotion/transcoder/admin/proxy/base.py:
    * flumotion/transcoder/admin/proxy/component.py:
    * flumotion/transcoder/admin/proxy/flow.py:
    * flumotion/transcoder/admin/proxy/group.py:
    * flumotion/transcoder/admin/proxy/manager.py:
    * flumotion/transcoder/admin/proxy/monitor.py:
    * flumotion/transcoder/admin/proxy/worker.py:
    Second step in changing getLabel and getIdentifier to attributes,
    updating the proxies setup of identifier/label.

2008-04-23  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminelement.py:
    * flumotion/transcoder/admin/datasource/datasource.py:
    * flumotion/transcoder/admin/datastore/base.py:
    * flumotion/transcoder/admin/datastore/config.py:
    * flumotion/transcoder/admin/datastore/customer.py:
    * flumotion/transcoder/admin/datastore/notification.py:
    * flumotion/transcoder/admin/datastore/profile.py:
    * flumotion/transcoder/admin/datastore/state.py:
    * flumotion/transcoder/admin/datastore/store.py:
    * flumotion/transcoder/admin/datastore/target.py:
    First step in changing getLabel and getIdentifier to attributes.

2008-04-23  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/context/notification.py:
    * flumotion/transcoder/admin/datastore/base.py:
    Changed INotifyStore to INotificationProvider,
    because it doesn't realy represent a store by itself.

2008-04-23  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/context/notification.py:
    * flumotion/transcoder/admin/datastore/activity.py:
    * flumotion/transcoder/admin/datastore/base.py:
    * flumotion/transcoder/admin/datastore/config.py:
    * flumotion/transcoder/admin/datastore/customer.py:
    * flumotion/transcoder/admin/datastore/notification.py:
    * flumotion/transcoder/admin/datastore/profile.py:
    * flumotion/transcoder/admin/datastore/state.py:
    * flumotion/transcoder/admin/datastore/store.py:
    * flumotion/transcoder/admin/datastore/target.py:
    Cleaned up the class and interface hierarchy.
    Fixed the admin/customer/profile/target use of the wrong base class.

2008-04-23  Sebastien Merle  <sebastien@fluendo.com>

    Renamed f.t.admin.errors to admerrs to not use 'import as'.

2008-04-23  Sebastien Merle  <sebastien@fluendo.com>

    Import cleanup. Try to not import names from a module.

2008-04-22  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminelement.py:
    * flumotion/transcoder/admin/proxy/base.py:
    * flumotion/transcoder/admin/proxy/component.py:
    * flumotion/transcoder/admin/proxy/group.py:
    * flumotion/transcoder/admin/proxy/manager.py:
    * flumotion/transcoder/admin/proxy/monitor.py:
    * flumotion/transcoder/admin/proxy/transcoder.py:
    * flumotion/transcoder/admin/proxy/worker.py:
    Changed BaseProxy to ProxyElement and Paroxy to BaseProxy.

2008-04-22  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/context/base.py:
    Removed deprecated getter for contexts' parent.

2008-04-22  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/test/test_storecontexts.py:
    * flumotion/transcoder/admin/context/activity.py:
    * flumotion/transcoder/admin/context/base.py:
    * flumotion/transcoder/admin/context/customer.py:
    * flumotion/transcoder/admin/context/notification.py:
    * flumotion/transcoder/admin/context/profile.py:
    * flumotion/transcoder/admin/context/state.py:
    * flumotion/transcoder/admin/context/store.py:
    * flumotion/transcoder/admin/context/target.py:
    * flumotion/transcoder/admin/notifier.py:
    * flumotion/transcoder/admin/scheduler.py:
    Made the store a public attribute of the context wrappers.

2008-04-22  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminelement.py:
    * flumotion/transcoder/admin/context/activity.py:
    * flumotion/transcoder/admin/context/api.py:
    * flumotion/transcoder/admin/context/base.py:
    * flumotion/transcoder/admin/context/config.py:
    * flumotion/transcoder/admin/context/customer.py:
    * flumotion/transcoder/admin/context/manager.py:
    * flumotion/transcoder/admin/context/notification.py:
    * flumotion/transcoder/admin/context/notifier.py:
    * flumotion/transcoder/admin/context/profile.py:
    * flumotion/transcoder/admin/context/scheduler.py:
    * flumotion/transcoder/admin/context/state.py:
    * flumotion/transcoder/admin/context/store.py:
    * flumotion/transcoder/admin/context/target.py:
    * flumotion/transcoder/admin/context/worker.py:
    * flumotion/transcoder/admin/datastore/activity.py:
    * flumotion/transcoder/admin/datastore/config.py:
    * flumotion/transcoder/admin/datastore/customer.py:
    * flumotion/transcoder/admin/datastore/profile.py:
    * flumotion/transcoder/admin/datastore/state.py:
    * flumotion/transcoder/admin/datastore/target.py:
    * flumotion/transcoder/admin/proxy/component.py:
    * flumotion/transcoder/admin/proxy/monitor.py:
    * flumotion/transcoder/admin/proxy/transcoder.py:
    Uniformized the access to parents as a public attribute.

2008-04-22  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxy/base.py:
    * flumotion/transcoder/admin/proxy/componentset.py:
    * flumotion/transcoder/admin/proxy/group.py:
    * flumotion/transcoder/admin/proxy/manager.py:
    * flumotion/transcoder/admin/proxy/managerset.py:
    * flumotion/transcoder/admin/proxy/monitorset.py:
    * flumotion/transcoder/admin/proxy/transcoderset.py:
    * flumotion/transcoder/admin/proxy/workerset.py:
    Changed the protected method _updateProxies to _refreshProxiesListener
    to be more descriptive and match the event source interface.

2008-04-22  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/janitor.py:
    * flumotion/transcoder/admin/monitoring.py:
    * flumotion/transcoder/admin/montask.py:
    * flumotion/transcoder/admin/proxy/componentset.py:
    * flumotion/transcoder/admin/proxy/group.py:
    * flumotion/transcoder/admin/proxy/workerset.py:
    * flumotion/transcoder/admin/scheduler.py:
    * flumotion/transcoder/admin/taskmanager.py:
    * flumotion/transcoder/admin/transcoding.py:
    * flumotion/transcoder/admin/transtask.py:
    Made all event handling methods "private" to prevent
    confusion with overriden "protected" methods.

2008-04-22  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/datastore/customer.py:
    * flumotion/transcoder/admin/datastore/profile.py:
    * flumotion/transcoder/admin/datastore/store.py:
    * flumotion/transcoder/admin/janitor.py:
    * flumotion/transcoder/admin/monitoring.py:
    * flumotion/transcoder/admin/montask.py:
    * flumotion/transcoder/admin/proxy/component.py:
    * flumotion/transcoder/admin/proxy/componentset.py:
    * flumotion/transcoder/admin/proxy/group.py:
    * flumotion/transcoder/admin/proxy/manager.py:
    * flumotion/transcoder/admin/proxy/managerset.py:
    * flumotion/transcoder/admin/proxy/monitorset.py:
    * flumotion/transcoder/admin/proxy/transcoderset.py:
    * flumotion/transcoder/admin/proxy/workerset.py:
    * flumotion/transcoder/admin/scheduler.py:
    * flumotion/transcoder/admin/taskmanager.py:
    * flumotion/transcoder/admin/transcoding.py:
    * flumotion/transcoder/admin/transtask.py:
    Changed the event handler method update to refreshListener
    to be more descriptive and prevent confusion.

2008-04-22  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/api/gateway.py:
    Changed to match "convention".

2008-04-22  Sebastien Merle  <sebastien@fluendo.com>

    Changed the proxies interfaces to be more
    consistent with store/context/medium.

2008-04-21  Sebastien Merle  <sebastien@fluendo.com>

    Standardized the proxies naming to match store/context/medium conventions.
    Sanitized the proxies variables naming.
    Renamed proxy modules to match store/context/medium conventions.

2008-04-21  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datasource/filesource.py:
    Ignoring customer configuration file that starts with '.'

2008-04-21  Sebastien Merle  <sebastien@fluendo.com>

    Moved the data "generation" (value inheritence) from the datastore
    elements to the context elements. Now the store give only the real data.
    This was needed for the API to have access to the real data.
    Standardized the store/context pairing.
    Sanitized the context /store variables naming.
    Created interfaces for all store elements.
    Created interfaces for some proxy elements.
    Renamed modules for correspondency between stores, contextes, and mediums.
    Extended the API to access the customers, profiles and config information.

2008-04-11  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/Makefile.am:
    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/api/Makefile.am:
    * flumotion/transcoder/admin/api/api.py:
    * flumotion/transcoder/admin/api/gateway.py:
    * flumotion/transcoder/admin/api/interfaces.py:
    * flumotion/transcoder/admin/api/mediums/Makefile.am:
    * flumotion/transcoder/admin/api/mediums/__init__.py:
    * flumotion/transcoder/admin/api/mediums/basemedium.py:
    * flumotion/transcoder/admin/api/mediums/config.py:
    * flumotion/transcoder/admin/api/mediums/customer.py:
    * flumotion/transcoder/admin/api/mediums/defaults.py:
    * flumotion/transcoder/admin/api/mediums/named.py:
    * flumotion/transcoder/admin/api/mediums/profile.py:
    * flumotion/transcoder/admin/api/mediums/scheduler.py:
    * flumotion/transcoder/admin/api/mediums/store.py:
    * flumotion/transcoder/admin/api/mediums/target.py:
    * flumotion/transcoder/admin/api/mediums/worker.py:
    * flumotion/transcoder/admin/api/mediums/workermedium.py:
    * flumotion/transcoder/admin/api/mediums/workerset.py:
    * flumotion/transcoder/admin/datasource/datasource.py:
    * flumotion/transcoder/admin/datasource/filesource.py:
    * flumotion/transcoder/admin/datastore/activitystore.py:
    * flumotion/transcoder/admin/datastore/adminstore.py:
    * flumotion/transcoder/admin/datastore/basestore.py:
    * flumotion/transcoder/admin/datastore/configstore.py:
    * flumotion/transcoder/admin/datastore/customerstore.py:
    * flumotion/transcoder/admin/datastore/notifystore.py:
    * flumotion/transcoder/admin/datastore/profilestore.py:
    * flumotion/transcoder/admin/datastore/targetstore.py:
    * flumotion/transcoder/admin/enums.py:
    * flumotion/transcoder/admin/interfaces.py:
    * flumotion/transcoder/admin/notifier.py:
    * flumotion/transcoder/admin/proxies/groupproxy.py:
    * flumotion/transcoder/admin/proxies/managerproxy.py:
    * flumotion/transcoder/admin/proxies/managerset.py:
    * flumotion/transcoder/admin/proxies/monitorproxy.py:
    * flumotion/transcoder/admin/proxies/transcoderproxy.py:
    * flumotion/transcoder/admin/proxies/workerproxy.py:
    * flumotion/transcoder/admin/proxies/workerset.py:
    * flumotion/transcoder/admin/scheduler.py:
    Changed the all the naems with GETRequest to HTTPRequest.
    Added a base interface IAdminInterface. Every admin interfaces
    should inherit from it, this the API can recognise admin objects
    and try to adapt them with a medium object.
    Added an interface skeleton to every object that could be
    published by the API.
    Added an api module that help adapting admin objects with medium,
    and support Deferred and list/dict of Deferreds. It also provide
    a decorator to make a method remote, and a class annotation to
    register the medium for an admin interface.

2008-04-04  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/api/apiserver.py:
    * flumotion/transcoder/admin/api/gateway.py:
    * flumotion/transcoder/admin/api/mediums/basemedium.py:
    * flumotion/transcoder/admin/api/mediums/workermedium.py:
    * flumotion/transcoder/admin/diagnostic.py:
    * flumotion/transcoder/admin/proxies/workerset.py:
    Made the first working basic API.

2008-04-01  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/api/apiserver.py:
    * flumotion/transcoder/admin/api/gateway.py:
    * flumotion/transcoder/admin/api/interfaces.py:
    * flumotion/transcoder/admin/api/mediums/Makefile.am:
    * flumotion/transcoder/admin/api/mediums/__init__.py:
    * flumotion/transcoder/admin/api/mediums/basemedium.py:
    * flumotion/transcoder/admin/api/mediums/worker.py:
    * flumotion/transcoder/admin/api/mediums/workermedium.py:
    * flumotion/transcoder/admin/proxies/fluproxy.py:
    * flumotion/transcoder/admin/proxies/workerproxy.py:
    Fixed the PB API.

2008-02-27  Sebastien Merle  <sebastien@fluendo.com>

    * Makefile.am:
    * configure.ac:
    * flumotion/transcoder/admin/api/Makefile.am:
    * flumotion/transcoder/admin/api/gateway.py:
    * flumotion/transcoder/admin/api/interfaces.py:
    * flumotion/transcoder/admin/api/mediums/Makefile.am:
    * flumotion/transcoder/admin/api/mediums/__init__.py:
    * flumotion/transcoder/admin/api/mediums/worker.py:
    * flumotion/transcoder/admin/api/shared.py:
    * flumotion/transcoder/admin/api/types.py:
    Added a medium for the workers.

2008-02-26  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/api/Makefile.am:
    * flumotion/transcoder/admin/api/apiserver.py:
    * flumotion/transcoder/admin/api/gateway.py:
    * flumotion/transcoder/admin/api/interfaces.py:
    * flumotion/transcoder/admin/api/shared.py:
    Updated to the changes made to inhouse pbclient/pbserver.
    Now the requested interfaces is the one implemented by an Avatar.

2008-02-26  Sebastien Merle  <sebastien@fluendo.com>

    * configure.ac:
    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/adminconfig.py:
    * flumotion/transcoder/admin/api/Makefile.am:
    * flumotion/transcoder/admin/api/api.py:
    * flumotion/transcoder/admin/api/apiserver.py:
    * flumotion/transcoder/admin/api/gateway.py:
    * flumotion/transcoder/tools/upgrade.py:
    Changed the config file version because of adding api config.
    Removed the unused property "certificate" for the admin client.
    Fixed some bugs in the api server.
    Changed the module server.py name to apiserver.py.

2008-02-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/context/Makefile.am:
    * flumotion/transcoder/admin/context/apicontext.py:
    Added forgoten api context module.

2008-02-25  Sebastien Merle  <sebastien@fluendo.com>

    * conf/transcoder/transcoder-admin.ini:
    * flumotion/transcoder/admin/Makefile.am:
    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/adminconfig.py:
    * flumotion/transcoder/admin/adminelement.py:
    * flumotion/transcoder/admin/api/Makefile.am:
    * flumotion/transcoder/admin/api/api.py:
    * flumotion/transcoder/admin/api/config.py:
    * flumotion/transcoder/admin/api/gateway.py:
    * flumotion/transcoder/admin/api/interfaces.py:
    * flumotion/transcoder/admin/context/admincontext.py:
    * flumotion/transcoder/admin/enums.py:
    * flumotion/transcoder/admin/errors.py:
    * flumotion/transcoder/admin/taskmanager.py:
    Added the low-level PB API server.
    Fixed bugs where timeout exception were lost.

2008-02-21  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/adminelement.py:
    * flumotion/transcoder/admin/admintask.py:
    * flumotion/transcoder/admin/errors.py:
    * flumotion/transcoder/admin/eventsource.py:
    * flumotion/transcoder/admin/janitor.py:
    * flumotion/transcoder/admin/monitoring.py:
    * flumotion/transcoder/admin/montask.py:
    * flumotion/transcoder/admin/notifier.py:
    * flumotion/transcoder/admin/proxies/componentset.py:
    * flumotion/transcoder/admin/proxies/workerset.py:
    * flumotion/transcoder/admin/scheduler.py:
    * flumotion/transcoder/admin/taskmanager.py:
    * flumotion/transcoder/admin/transcoding.py:
    * flumotion/transcoder/admin/transtask.py:
    Moved the eventsource out to flumotion-inhouse,
    and changed the method name when using the listener
    argument to connectListener to keep the connect name
    for gobject-like behaviors.

2008-02-20  Sebastien Merle  <sebastien@fluendo.com>

    * Makefile.am:
    * configure.ac:
    * flumotion/transcoder/admin/Makefile.am:
    * flumotion/transcoder/admin/api/Makefile.am:
    * flumotion/transcoder/admin/api/__init__.py:
    Created the admin api package.

2008-02-18  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filetranscoder.py:
    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/adminelement.py:
    * flumotion/transcoder/admin/datastore/basestore.py:
    * flumotion/transcoder/admin/eventsource.py:
    * flumotion/transcoder/admin/janitor.py:
    * flumotion/transcoder/admin/notifier.py:
    * flumotion/transcoder/admin/proxies/componentproxy.py:
    * flumotion/transcoder/admin/proxies/managerproxy.py:
    Fixes somerefactoring bugs.
    Fixed sad component deletion bug due to flumotion not really stopping
    sad components anymore. The sad components have to be stopped two times.
    The component janitor now let the opportunity to the component's mananger
    to delete the components to be disposed of.

2008-02-15  Sebastien Merle  <sebastien@fluendo.com>

    Changed the clumsy Interface-based event handling
    for a gobject-like connect/emit implementation.

2008-02-14  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filetranscoder.py:
    Fixed some forgotten imports

2008-02-14  Sebastien Merle  <sebastien@fluendo.com>

    Moved utility modules out of the project to flumotion-inhouse.

2008-02-11  Sebastien Merle  <sebastien@fluendo.com>

    * configure.ac:
    * flumotion-transcoder.spec.in:
    Jumped to release 0.5.2 at thomas' request.
    Tried to synchronized to the platform-4 release,
    because of the release tag made from the branche.
    Anyway, "back" to trunk.

=== release 0.5.2 ===

2008-01-14  Sebastien Merle  <sebastien@fluendo.com>

    * configure.ac:
    * flumotion/transcoder/admin/diagnostic.py:
    Fixed a bug that filter out all components error messages.
    Back to trunk.

=== release 1.1.0 ===

2007-12-17  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/reporter.py:
    * flumotion/transcoder/admin/admintask.py:
    Fixed a bug when the worker is None.
    Updated the component notification filter.

2007-12-04  Sebastien Merle  <sebastien@fluendo.com>

    * Makefile.am:
    * bin/transcoder-uninstalled-environment:
    * configure.ac:
    * pkgconfig/Makefile.am:
    * pkgconfig/flumotion-transcoder-uninstalled.pc.in:
    * pkgconfig/flumotion-transcoder.pc.in:
    Added pkgconfig support.

2007-12-03  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/transtargets.py:
    Fixed a bug where the transcoded files were not
    monitored anymore.

2007-12-03  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/transconfig.py:
    Raised the version number because of the addition of temp-reports-dir.

2007-11-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/transcoder.py:
    Changed to use decodebin2. It resolve lots of problems
    with flvdemux and flumpsdemux where the pipeline
    never go to playing state and the transcoder timeout.

2007-11-22  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/test/gsttestutils.py:
    * flumotion/test/test_analyst.py:
    Made the test pass with the platform environment.

2007-11-21  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/test/test_analyst.py:
    Do not generate the files in parallel, it's too much for gstreamer.

2007-11-21  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/analyst.py:
    Added a printInfo method to the MediaAnalysis class.
    Fixed a bug in the getMediaDuration method.
    * flumotion/test/Makefile.am:
    * flumotion/test/gsttestutils.py:
    * flumotion/test/test_analyst.py:
    Added a testsuit for the MediaAnalyst.

2007-11-14  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/context.py:
    * flumotion/component/transcoder/filetranscoder.py:
    * flumotion/component/transcoder/job.py:
    * flumotion/test/test_transcontext.py:
    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/context/customercontext.py:
    * flumotion/transcoder/admin/context/profilecontext.py:
    * flumotion/transcoder/admin/datasource/dataprops.py:
    * flumotion/transcoder/admin/datasource/datasource.py:
    * flumotion/transcoder/admin/datastore/customerstore.py:
    * flumotion/transcoder/admin/datastore/profilestore.py:
    * flumotion/transcoder/admin/proxies/transprops.py:
    * flumotion/transcoder/transconfig.py:
    Made the trasncoder element keep the temporary reports
    in a different directory, and then move it to the
    'failed' or 'done' directory.
    This prevent having report of failed transcoding in
    the 'done' report directory.
    Fixes #1081

2007-11-12  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/transcoder.py:
    Do not link fakesink anymore, it was half the cause
    of stalling at prerolling.

2007-11-09  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/transcoder.py:
    Fixed fakesink linking.

2007-11-08  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/compconsts.py:
    * flumotion/component/transcoder/thumbsamplers.py:
    * flumotion/component/transcoder/thumbsink.py:
    * flumotion/component/transcoder/thumbsrc.py:
    * flumotion/component/transcoder/thumbtargets.py:
    * flumotion/component/transcoder/transcoder.py:
    * flumotion/transcoder/admin/diagnostic.py:
    * flumotion/transcoder/properties.py:
    Bigger timeouts to prevent triggering during eavy load.
    Fixed some pychecker stuff.
    Accept  long and int as values for float properties.
    Automaticaly create fakesinks for decodebin pads when not used
    to prevent filling queues and log messages.

2007-11-06  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/binmaker.py:
    Reverted back the crop hack because of videobox
    element still beeing buggy with odd parameteres.
    Still need the patch gst-plugins-good.videobox-20071105.patch
    to correct some video corruptions.

2007-11-06  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/binmaker.py:
    Removed the videocrop hack.
    Need the patch gst-plugins-good.videobox-20071105.patch

2007-10-30  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/diagnostic.py:
    Check for none debug value.
    * flumotion/transcoder/properties.py:
    * flumotion/transcoder/transreport.py:
    Better use og isinstance

2007-10-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/thumbsamplers.py:
    Fixed the percent sampler.

2007-10-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/thumbsamplers.py:
    * flumotion/component/transcoder/thumbsink.py:
    * flumotion/component/transcoder/thumbtargets.py:
    * flumotion/transcoder/admin/datasource/dataprops.py:
    * flumotion/transcoder/admin/datasource/datasource.py:
    * flumotion/transcoder/admin/datastore/configstore.py:
    * flumotion/transcoder/admin/proxies/transprops.py:
    * flumotion/transcoder/transconfig.py:
    Simplified the thumbnail samplers.
    Added a property to ensure at least one thumbnail
    by keeping fixed frames. This properly is enable
    by default and keep the last frame of the index set
    [1, 25, 50, 100, 200, 400, 800].

2007-10-23  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/thumbsamplers.py:
    * flumotion/component/transcoder/thumbtargets.py:
    * flumotion/transcoder/properties.py:
    Fix the thumbnail time sampling when the frames
    do not have duration.

2007-10-22  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/Makefile.am:
    * flumotion/component/transcoder/base.xml:
    * flumotion/component/transcoder/basetargets.py:
    * flumotion/component/transcoder/binmaker.py:
    * flumotion/component/transcoder/compconsts.py:
    * flumotion/component/transcoder/filetranscoder.py:
    * flumotion/component/transcoder/job.py:
    * flumotion/component/transcoder/thumbsamplers.py:
    * flumotion/component/transcoder/thumbsink.py:
    * flumotion/component/transcoder/thumbsrc.py:
    * flumotion/component/transcoder/thumbtargets.py:
    * flumotion/component/transcoder/transcoder.py:
    * flumotion/transcoder/Makefile.am:
    * flumotion/transcoder/admin/Makefile.am:
    * flumotion/transcoder/admin/adminelement.py:
    * flumotion/transcoder/admin/admintask.py:
    * flumotion/transcoder/admin/context/customercontext.py:
    * flumotion/transcoder/admin/context/profilecontext.py:
    * flumotion/transcoder/admin/context/targetcontext.py:
    * flumotion/transcoder/admin/datastore/basestore.py:
    * flumotion/transcoder/admin/errors.py:
    * flumotion/transcoder/admin/notifysubs.py:
    * flumotion/transcoder/admin/proxies/componentproxy.py:
    * flumotion/transcoder/admin/proxies/fluproxy.py:
    * flumotion/transcoder/admin/proxies/managerproxy.py:
    * flumotion/transcoder/admin/proxies/managerset.py:
    * flumotion/transcoder/admin/proxies/transcoderproxy.py:
    * flumotion/transcoder/admin/substitution.py:
    * flumotion/transcoder/admin/taskmanager.py:
    * flumotion/transcoder/admin/waiters.py:
    * flumotion/transcoder/errors.py:
    * flumotion/transcoder/waiters.py:
    Rewrite from scratch of the thumbnailer.
    Fix #1379

2007-10-10  Sebastien Merle  <sebastien@fluendo.com>

    * TODO:
    * flumotion/component/transcoder/Makefile.am:
    * flumotion/component/transcoder/analyst.py:
    * flumotion/component/transcoder/basetargets.py:
    * flumotion/component/transcoder/binmaker.py:
    * flumotion/component/transcoder/compconsts.py:
    * flumotion/component/transcoder/context.py:
    * flumotion/component/transcoder/filetranscoder.py:
    * flumotion/component/transcoder/filetranscoder.xml:
    * flumotion/component/transcoder/gstutils.py:
    * flumotion/component/transcoder/job.py:
    * flumotion/component/transcoder/reporter.py:
    * flumotion/component/transcoder/targets.py:
    * flumotion/component/transcoder/thumbtargets.py:
    * flumotion/component/transcoder/transcoder.py:
    * flumotion/component/transcoder/transtargets.py:
    * flumotion/component/transcoder/varsets.py:
    * flumotion/transcoder/admin/admintask.py:
    * flumotion/transcoder/admin/diagnostic.py:
    * flumotion/transcoder/admin/diagutils.py:
    * flumotion/transcoder/admin/notifysubs.py:
    * flumotion/transcoder/admin/scheduler.py:
    * flumotion/transcoder/admin/substitution.py:
    * flumotion/transcoder/admin/transtask.py:
    * flumotion/transcoder/defer.py:
    * flumotion/transcoder/enums.py:
    * flumotion/transcoder/transreport.py:
    Components:
      Do not use the gst-python discoverer directly anymore,
     the MediaAnalyst that use deferred and return
     MediaAnalysis instance is use insteed.
     The Transcoder core has been refactored to use producer
     interfaces insteed of target instances.
     The transcoder core has been refactored to allow
     the producers/targets to return deferred during
     prepare and pipelineUpdate calls.
     The transcoder core now call the finalize method
     of the producers that can return a deferred before
     terminating the transcoding process.
     Splited targets.py in targets.py, transtargets.py and thumbtargets.py.
     Separated the source file analysis from the source file transcoding,
     now the analysis is done before pre-processing.
    Admin:
     Try to detect the transcoder component segfault and
     if no error message is present, inform of the segfaults.
     Various bugfixes.


2007-10-05  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/inifile.py:
    * flumotion/transcoder/properties.py:
    Fixed a bug where the string properties value
    was striped of spaces characters leading to invalid values.

2007-10-04  Sebastien Merle  <sebastien@fluendo.com>

    * conf/managers/transcoder/planet.xml:
    * conf/transcoder/transcoder-admin.ini:
    * doc/Makefile.am:
    * doc/examples/transcoder-admin.ini:
    * doc/text/Configuration/AdminConfig:
    * doc/text/Configuration/FileSource/CustomerConfig:
    * doc/text/Configuration/FileSource/TranscoderConfig:
    * doc/text/Installation/Build:
    * doc/text/Installation/Installed:
    * doc/text/Installation/Uninstalled:
    More documentation.

2007-10-04  Sebastien Merle  <sebastien@fluendo.com>

    * Updated documentation / More documentation.
    * Adopted reStructuredText Format for documentation.
    * Changed components to work with last flumotion trunk

2007-10-01  Sebastien Merle  <sebastien@fluendo.com>

    * TODO:
    * conf/Makefile.am:
    * conf/managers/transcoder/planet.xml:
    * conf/redhat/flumotion-transcoder-manager:
    * conf/redhat/flumotion-transcoder-manager.sysconfig:
    * conf/redhat/flumotion-transcoder-worker:
    * conf/redhat/flumotion-transcoder-worker.sysconfig:
    * conf/transcoder/customers/fluendo.ini.template:
    * doc/Makefile.am:
    * doc/examples/transcoder-data.ini:
    * doc/examples/workers/worker-config.xml:
    * doc/wiki/Overview/PublicFeatures:
    * flumotion-transcoder.spec.in:
    * flumotion/component/transcoder/filetranscoder_admin_gtk.py:
    * flumotion/component/transcoder/reporter.py:
    * flumotion/component/transcoder/targets.py:
    Changed to use the standard flumotion way of starting manager and workers.

2007-09-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/binmaker.py:
    * flumotion/component/transcoder/reporter.py:
    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/diagnostic.py:
    * flumotion/transcoder/admin/diagutils.py:
    * flumotion/transcoder/admin/proxies/monprops.py:
    * flumotion/transcoder/admin/proxies/transprops.py:
    * flumotion/transcoder/fileutils.py:
    * flumotion/transcoder/local.py:
    * flumotion/transcoder/properties.py:
    * flumotion/transcoder/utils.py:
    Various bugfixes, better command arguments quoting.

2007-09-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/scheduler.py:
    Aaaarrg, forgot to revert commented code.

2007-09-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/binmaker.py:
    * flumotion/component/transcoder/job.py:
    * flumotion/component/transcoder/reporter.py:
    * flumotion/component/transcoder/targets.py:
    * flumotion/component/transcoder/transcoder.py:
    * flumotion/transcoder/Makefile.am:
    * flumotion/transcoder/admin/Makefile.am:
    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/diagnose.py:
    * flumotion/transcoder/admin/diagnostic.py:
    * flumotion/transcoder/admin/diagutils.py:
    * flumotion/transcoder/admin/scheduler.py:
    * flumotion/transcoder/properties.py:
    * flumotion/transcoder/transreport.py:
    * flumotion/transcoder/utils.py:
    Keep the information about the pipeline being constructed,
    and reconstruct pipelines in the diagnostic document.
    Made the pipeline extraction functions in a separated
    module to later use by diagnostic command.

2007-09-17  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/proxies/componentproxy.py:
    Wait during component deletion if BusyComponentError is received.

2007-09-14  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/datasource/dataprops.py:
    * flumotion/transcoder/admin/datastore/activitystore.py:
    * flumotion/transcoder/admin/notifier.py:
    * flumotion/transcoder/admin/substitution.py:
    * flumotion/transcoder/utils.py:
    Properly load the notification at startup.
    Fixed wrong variable name for retry max.
    Fixed deepCopy to only create basic type.
    Do not try to quote non string variable for URL
    substitution.

2007-09-14  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/scheduler.py:
    * flumotion/transcoder/defer.py:
    Properly catch failures when a notification fail,
    do not let the deferer catch it and notify it.

2007-09-14  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/notifier.py:
    * flumotion/transcoder/admin/substitution.py:
    Properly quote substituted variables for HTTP Requests.

2007-09-14  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filetranscoder.py:
    * flumotion/component/transcoder/gstutils.py:
    * flumotion/component/transcoder/job.py:
    * flumotion/component/transcoder/targets.py:
    * flumotion/component/transcoder/transcoder.py:
    * flumotion/transcoder/admin/datasource/filesource.py:
    * flumotion/transcoder/admin/diagnose.py:
    * flumotion/transcoder/admin/proxies/componentproxy.py:
    * flumotion/transcoder/admin/proxies/transcoderproxy.py:
    * flumotion/transcoder/admin/proxies/transprops.py:
    * flumotion/transcoder/errors.py:
    Change in exception handling and exception messages.

2007-09-13  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/base.xml:
    * flumotion/component/transcoder/filemonitor.py:
    * flumotion/component/transcoder/filemonitor.xml:
    * flumotion/component/transcoder/filetranscoder.py:
    * flumotion/component/transcoder/filetranscoder.xml:
    * flumotion/component/transcoder/job.py:
    * flumotion/component/transcoder/targets.py:
    * flumotion/component/transcoder/thumbsink.py:
    * flumotion/test/Makefile.am:
    * flumotion/test/test_fileutils.py:
    * flumotion/test/test_utils.py:
    * flumotion/transcoder/Makefile.am:
    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/context/customercontext.py:
    * flumotion/transcoder/admin/context/profilecontext.py:
    * flumotion/transcoder/admin/context/targetcontext.py:
    * flumotion/transcoder/admin/datasource/dataprops.py:
    * flumotion/transcoder/admin/datasource/datasource.py:
    * flumotion/transcoder/admin/datasource/filesource.py:
    * flumotion/transcoder/admin/datastore/adminstore.py:
    * flumotion/transcoder/admin/datastore/customerstore.py:
    * flumotion/transcoder/admin/main.py:
    * flumotion/transcoder/admin/proxies/monprops.py:
    * flumotion/transcoder/admin/proxies/transprops.py:
    * flumotion/transcoder/admin/substitution.py:
    * flumotion/transcoder/fileutils.py:
    * flumotion/transcoder/properties.py:
    * flumotion/transcoder/tools/upgrade.py:
    * flumotion/transcoder/utils.py:
    * flumotion/transcoder/virtualpath.py:
    Moved the file related functions from utils.py to fileutils.py.
    Added a PathAttributes class to handle file and directory
    ownership and mode configuration. the configuration files now
    have the properties access-force-user, access-force-group,
    access-force-dir-mode and access-force-file-mode.

2007-09-12  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/context.py:
    * flumotion/component/transcoder/thumbsink.py:
    * flumotion/test/test_utils.py:
    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/diagnose.py:
    * flumotion/transcoder/admin/substitution.py:
    * flumotion/transcoder/errors.py:
    * flumotion/transcoder/utils.py:
    Filter the template strings to allow for filename with
    the caracter '%'. Only the supported variables are
    left in the format string.

2007-09-07  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/test/Makefile.am:
    * flumotion/test/test_ringbuffer.py:
    * flumotion/transcoder/Makefile.am:
    * flumotion/transcoder/admin/Makefile.am:
    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/adminconfig.py:
    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/admintask.py:
    * flumotion/transcoder/admin/context/workercontext.py:
    * flumotion/transcoder/admin/diagnose.py:
    * flumotion/transcoder/admin/janitor.py:
    * flumotion/transcoder/admin/proxies/componentproxy.py:
    * flumotion/transcoder/ringbuffer.py:
    Added a Janitor class that will keep the manager clean.
    It will keep a specified maximum of sad/lost components
    for each workers, and if this limit is passed, it will
    start dumping the oldest sad/lost components of the worker.

2007-09-06  Pedro Gracia <pedro@flumotion.com>

    * flumotion/transcoder/admin/adminconfig.py:
    * flumotion/transcoder/admin/notifier.py:
    Added an option to configure SMTP server port.

2007-09-05  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datasource/dataprops.py:
    * flumotion/transcoder/admin/proxies/transprops.py:
    process-priority should now be a value in [0,200]
    with root privileges needed for priotity > 100.

2007-09-05  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datasource/dataprops.py:
    * flumotion/transcoder/admin/proxies/transprops.py:
    Change the transcoder process-priority to be a value
    from [0,100] insteed of a nice level.

2007-09-05  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminconfig.py:
    * flumotion/transcoder/admin/datasource/filesource.py:
    * flumotion/transcoder/admin/notifier.py:
    Added an option to disable smtp TLS.

2007-09-04  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/job.py:
    * flumotion/component/transcoder/reporter.py:
    * flumotion/transcoder/admin/diagnose.py:
    * flumotion/transcoder/admin/proxies/componentproxy.py:
    Better reporting, handling of muxer less pipelines.

2007-09-03  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor.py:
    * flumotion/component/transcoder/filetranscoder.py:
    * flumotion/component/transcoder/job.py:
    * flumotion/component/transcoder/reporter.py:
    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/admintask.py:
    * flumotion/transcoder/admin/datasource/filesource.py:
    * flumotion/transcoder/admin/diagnose.py:
    * flumotion/transcoder/admin/enums.py:
    * flumotion/transcoder/admin/notifier.py:
    * flumotion/transcoder/admin/proxies/transprops.py:
    * flumotion/transcoder/admin/scheduler.py:
    * flumotion/transcoder/transreport.py:
    More diagnostic information.
    Now the diagnostic is a document attached to the mails.
    It include the gstreamer pipeline to play and reproduce
    the complete or parctial transcodification.

2007-08-31  Sebastien Merle  <sebastien@fluendo.com>

    * conf/redhat/flumotion-transcoder-admin:
    * conf/redhat/flumotion-transcoder-manager:
    * conf/redhat/flumotion-transcoder-worker:
    * flumotion/component/transcoder/filetranscoder.py:
    * flumotion/component/transcoder/job.py:
    * flumotion/component/transcoder/reporter.py:
    * flumotion/transcoder/admin/Makefile.am:
    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/admintask.py:
    * flumotion/transcoder/admin/diagnose.py:
    * flumotion/transcoder/admin/notifier.py:
    * flumotion/transcoder/admin/proxies/compprops.py:
    * flumotion/transcoder/admin/proxies/groupproxy.py:
    * flumotion/transcoder/admin/proxies/monprops.py:
    * flumotion/transcoder/admin/proxies/transcoderproxy.py:
    * flumotion/transcoder/admin/proxies/transprops.py:
    * flumotion/transcoder/admin/proxies/workerset.py:
    * flumotion/transcoder/admin/scheduler.py:
    * flumotion/transcoder/local.py:
    * flumotion/transcoder/transreport.py:
    * flumotion/transcoder/utils.py:
    A lot more diagnose information and helper.

2007-08-30  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor.py:
    Use a dictionary for state update.
    The update are not orderred anymore, but it prevent
    updating the state to an already obsolete value.
    * flumotion/component/transcoder/gstutils.py:
    Better error message.
    * flumotion/test/test_utils.py:
    Some cosmetic changes.
    * flumotion/transcoder/admin/admin.py:
    Filter out some component messages.
    * flumotion/transcoder/admin/admintask.py:
    Do not notify ui state retrieval error when the component
    isn't running anymore (crashed).
    * flumotion/transcoder/admin/proxies/componentproxy.py:
    * flumotion/transcoder/admin/waiters.py:
    Call errback on UI state waiters in case the retrieval failed.
    * flumotion/test/Makefile.am:
    * flumotion/test/test_timeouts.py:
    Add a testsuit for utils.callWithTimeout().

2007-08-30  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor.py:
    Better (working?) state update smoothing.

2007-08-30  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/compconsts.py:
    * flumotion/component/transcoder/filemonitor.py:
    Made the file-monitor ui state updates even more smooth.

2007-08-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor.py:
    Fixed UI State update smoothing.

2007-08-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor.py:
    * flumotion/component/transcoder/filetranscoder.py:
    * flumotion/component/transcoder/job.py:
    * flumotion/transcoder/admin/main.py:
    * flumotion/transcoder/admin/proxies/fluproxy.py:
    * flumotion/transcoder/admin/scheduler.py:
    * flumotion/transcoder/constants.py:
    * flumotion/transcoder/process.py:
    * flumotion/transcoder/utils.py:
    Added an utility function callNext with the same kind
    of semantic	than the thread yield syscall for threading.
    It's actually a callLater with a very small non-zero delay.
    Replaced all callLater(0) with callNext().
    The file-monitor now control the rate of the uiState updates.

2007-08-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/montask.py:
    * flumotion/transcoder/admin/proxies/monitorproxy.py:
    Use the buffered files' state method in the task.
    Fixed some bugs in the state update methods.

2007-08-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor.py:
    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/proxies/monitorproxy.py:
    Buffer and periodically update the monitors' files state
    to prevent remote invocation timeout when theres is
    many files' state update to be done at the same time.
    Fixes #1274

2007-08-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/adminconsts.py:
    More logging of idle waiting outcomes.

2007-08-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminelement.py:
    * flumotion/transcoder/log.py:
    Log idle information for debug.

2007-08-28  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admintask.py:
    Reverted last changes. If the retry counter is reseted
    and nothing more, the components that crash are
    started forever.

2007-08-28  Sebastien Merle  <sebastien@fluendo.com>

    * conf/transcoder/transcoder-admin.ini:
    Use SSL by default.
    * flumotion/transcoder/admin/admintask.py:
    Reset retry counter when component startup succeed.

2007-08-27  Sebastien Merle  <sebastien@fluendo.com>

    * conf/redhat/flumotion-transcoder-admin:
    * conf/redhat/flumotion-transcoder-manager:
    * conf/redhat/flumotion-transcoder-worker:
    * conf/redhat/flumotion-transcoder-worker.sysconfig:
    * configure.ac:
    * flumotion/transcoder/admin/context/Makefile.am:
    * flumotion/transcoder/admin/datastore/Makefile.am:
    Added a nano part to the version.
    The pythondir was wrong for datastore and context makefiles.
    Fixed logfile name for transcoder manager.
    Added GST_DEBUG sys option for transcoder worker.

2007-08-27  Sebastien Merle  <sebastien@fluendo.com>

    * conf/managers/transcoder/planet.xml:
    * flumotion/transcoder/manager/plugs.xml:
    Changed the plug name from transcoderenvironment to transcoder-environment.

2007-08-10  Sebastien Merle  <sebastien@fluendo.com>

    * doc/Makefile.am:
    Fix typo.
    * flumotion-transcoder.spec.in:
    Updated the spec file for the new transcoder.

2007-08-10  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/binmaker.py:
    * flumotion/component/transcoder/filemonitor.py:
    * flumotion/component/transcoder/filemonitor_admin_gtk.py:
    * flumotion/component/transcoder/filetranscoder.py:
    * flumotion/component/transcoder/filetranscoder_admin_gtk.py:
    * flumotion/component/transcoder/job.py:
    * flumotion/component/transcoder/targets.py:
    * flumotion/component/transcoder/thumbsink.py:
    * flumotion/component/transcoder/transcoder.py:
    * flumotion/transcoder/admin/context/profilecontext.py:
    * flumotion/transcoder/admin/datasource/filesource.py:
    * flumotion/transcoder/admin/eventsource.py:
    * flumotion/transcoder/admin/notifysubs.py:
    * flumotion/transcoder/admin/proxies/transprops.py:
    * flumotion/transcoder/properties.py:
    * flumotion/transcoder/transreport.py:
    * misc/pycheckerrc:
    Made PyChecker happyier.

2007-08-10  Sebastien Merle  <sebastien@fluendo.com>

    Moved the example configuration files to doc/examples.
    The configuration file in conf/ are the default ones that
    will be installed.
    Created startup scripts and sysconfig templates for
    the transcoder admin, manager and worker in conf/redhat.

2007-08-10  Thomas Vander Stichele  <thomas at apestaart dot org>

    * configure.ac:
      Apparently this macro doesn't work unless you also specify micro.
      Otherwise it compares (2, 4, 4, 'final', 4) against
      (2, 4, 'final', 4)

2007-08-09  Sebastien Merle  <sebastien@fluendo.com>

    * Makefile.am:
    * configure.ac:
    * env:
    * env.in:
    * flumotion/transcoder/transreport.py:
    Fixed make distcheck.

2007-08-09  Sebastien Merle  <sebastien@fluendo.com>

    * COPYING:
    * conf/Makefile.am:
    * configure.ac:
    * env:
    * flumotion/Makefile.am:
    * flumotion/component/transcoder/Makefile.am:
    * flumotion/project/Makefile.am:
    * flumotion/test/Makefile.am:
    * flumotion/test/test_videosize.py:
    * flumotion/transcoder/admin/Makefile.am:
    * flumotion/transcoder/admin/transbalancer.py:
    * tests/ogger.py:
    Fixed and cleanup the build.

2007-08-09  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/transcoder.py:
    Removed wrong import statment.

2007-08-09  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/binmaker.py:
    * flumotion/transcoder/admin/datasource/dataprops.py:
    Add a videocrop in the pipeline to correct to output size
    when an odd value would be needed as videobox parameter.
    If nothing specified, use 2 as with and height multiple.

2007-08-08  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filetranscoder.py:
    * flumotion/component/transcoder/filetranscoder.xml:
    * flumotion/component/transcoder/job.py:
    Added move-input-file component property to prevent
    the component from moving the input file during testing
    with flumotion-launch.
    * flumotion/component/transcoder/binmaker.py:
    Add a hack for platform version of gstreamer.

2007-08-08  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/binmaker.py:
    * flumotion/transcoder/admin/datasource/datasource.py:
    * flumotion/transcoder/admin/datastore/configstore.py:
    * flumotion/transcoder/admin/proxies/transcoderproxy.py:
    * flumotion/transcoder/admin/proxies/transprops.py:
    Use the size multiple option specified in the admin configuration.

2007-08-07  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/binmaker.py:
    * flumotion/component/transcoder/targets.py:
    * flumotion/component/transcoder/videosize.py:
    * flumotion/test/test_videosize.py:
    * flumotion/transcoder/admin/datasource/dataprops.py:
    * flumotion/transcoder/transconfig.py:
    Properly handle size-multiple options for videos.
    It add black bands to the output to respect them.
    If a size is pecified explicitly, the multiple is ignored.
    Fixed the test suite.

2007-08-07  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/videosize.py:
    * flumotion/test/test_transcontext.py:
    * flumotion/test/test_utils.py:
    * flumotion/test/test_videosize.py:
    * flumotion/transcoder/admin/context/targetcontext.py:
    * flumotion/transcoder/admin/substitution.py:
    Updated the context tests, import common in the tests,
    added the size multiple parameteres to videosize.

2007-08-07  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/context/targetcontext.py:
    Corrected handling of target subdir properies.

2007-08-07  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/tools/upgrade.py:
    Small changes to the upgrade script to better convert old format.

2007-08-07  Sebastien Merle  <sebastien@fluendo.com>

    * README:
    Added the description of how to start the transcoder processes as daemons.

2007-08-06  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor.py:
    * flumotion/component/transcoder/filetranscoder.py:
    * flumotion/component/transcoder/job.py:
    * flumotion/component/transcoder/targets.py:
    * flumotion/component/transcoder/thumbsink.py:
    * flumotion/transcoder/admin/context/targetcontext.py:
    * flumotion/transcoder/admin/datasource/filesource.py:
    * flumotion/transcoder/admin/main.py:
    * flumotion/transcoder/admin/proxies/componentproxy.py:
    * flumotion/transcoder/admin/proxies/transprops.py:
    * flumotion/transcoder/admin/substitution.py:
    * flumotion/transcoder/errors.py:
    * flumotion/transcoder/tools/upgrade.py:
    * flumotion/transcoder/utils.py:
    Use utils.ensureDirExists inplace of common.ensureDir,
    that handle	multi-process creating the same directories.
    Some configuration upgrade tweaking.

2007-08-06  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/tools/upgrade.py:
    Small changes to the upgrade script to handle better some old hacks.

2007-08-06  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/transcoder.py:
    Do not make the transcoding job fail if the position cannot
    be retrieved for progression notification.
    Now it only disables the notification.

2007-08-06  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/targets.py:
    The output file monitoring was removed by mistake, now restored.

2007-08-06  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admintask.py:
    Cancel old component startup if the pending component changed.

2007-08-06  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/context/targetcontext.py:
    * flumotion/transcoder/admin/datastore/targetstore.py:
    Corrected some bug preventing custom output file template.

2007-08-03  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/tools/upgrade.py:
    Upgrade more old transcoder hacks.

2007-08-03  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/context.py:
    * flumotion/transcoder/admin/context/targetcontext.py:
    * flumotion/transcoder/admin/datasource/dataprops.py:
    * flumotion/transcoder/admin/datasource/datasource.py:
    * flumotion/transcoder/admin/datastore/targetstore.py:
    * flumotion/transcoder/admin/proxies/transprops.py:
    * flumotion/transcoder/transconfig.py:
    Added a way to override ouput, work and link base directory
    on a per target basis to support some of the old transcoder profiles.

2007-08-03  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/targets.py:
    * flumotion/transcoder/admin/datasource/dataprops.py:
    * flumotion/transcoder/transconfig.py:
    Corrected refactoring bug in thumbnail target.
    Removed default values for thumbnails to be able
    to specify only the width or the height.

2007-08-03  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/transbalancer.py:
    Beter task balancing when there is few tasks.
    Before the workers where filled one by one and
    a task was set to another worker only when the
    first one was full. Now the workers are used
    proportionally of there slot availability.

2007-08-03  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/context.py:
    Added a needed context method (that was used anyway).

2007-08-03  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/test/test_utils.py:
    * flumotion/transcoder/utils.py:
    Updated the path cleanup function to support new use cases.
    Added some new tests for those use cases.

2007-08-03  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/main.py:
    Added the logdir and rundir command-line override parameters.

2007-08-02  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/context.py:
    * flumotion/component/transcoder/job.py:
    * flumotion/component/transcoder/targets.py:
    * flumotion/component/transcoder/transcoder.py:
    * flumotion/transcoder/admin/admintask.py:
    * flumotion/transcoder/admin/datasource/filesource.py:
    * flumotion/transcoder/admin/datastore/configstore.py:
    * flumotion/transcoder/admin/transtask.py:
    * flumotion/transcoder/properties.py:
    Added the new target type 'identity' that just
    copy the source file.
    It do not do the discovering again, so the target-specific
    substitution variables are not defined.

2007-08-02  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/enums.py:
    * flumotion/transcoder/tools/upgrade.py:
    * flumotion/transcoder/transconfig.py:
    Updated the configuration upgrade script to
    handle identity targets, and the hack used
    with the old transcoder for non-thread-safe encoders.

2007-08-02  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/main.py:
    Made '/' the default value of --daemonize-to

2007-07-31  Sebastien Merle  <sebastien@fluendo.com>

    * doc/requirments-specifications.txt:
    * doc/specifications.odt:
    * flumotion/transcoder/admin/context/profilecontext.py:
    Filled a litle the template variable specification.

2007-07-31  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/context/targetcontext.py:
    * flumotion/transcoder/admin/datasource/dataprops.py:
    * flumotion/transcoder/tools/upgrade.py:
    Added more substitution variable for targets.

2007-07-31  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/test/test_transcontext.py:
    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/context/targetcontext.py:
    * flumotion/transcoder/admin/datasource/dataprops.py:
    * flumotion/transcoder/tools/upgrade.py:
    Changed template variable targetPath to targetDir
    to respect the  naming standard.

2007-07-31  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/job.py:
    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/datasource/dataprops.py:
    * flumotion/transcoder/admin/notifysubs.py:
    Changed custName, profName and targName variables
    to customerName profileName and targetName.

2007-07-31  Sebastien Merle  <sebastien@fluendo.com>

    * README:
    Added a litle description of the steps
    to setup and run the new transcoder.

2007-07-31  Sebastien Merle  <sebastien@fluendo.com>

    * bin/transcoder-uninstalled-environment:
    Added a script that set the environment to use an
    unstalled version of the transcoder when sourced.

2007-07-31  Sebastien Merle  <sebastien@fluendo.com>

    * bin/flumotion-transcoder-upgrade.in:
    Added the upgrade bootstrap script.

    * conf/customers/bigclient.ini:
    * conf/customers/fluendo.ini:
    * conf/transcoder-admin.ini:
    * conf/transcoder-data.ini:
    * flumotion/transcoder/admin/datasource/dataprops.py:
    Updated the configuration example comments.

2007-07-30  Sebastien Merle  <sebastien@fluendo.com>

    * doc/specifications.odt:
    Added a specification document skeleton.

2007-07-30  Sebastien Merle  <sebastien@fluendo.com>

    * bin/Makefile.am:
    * conf/customers/fluendo.ini:
    * configure.ac:
    * flumotion/transcoder/admin/adminconfig.py:
    * flumotion/transcoder/admin/context/targetcontext.py:
    * flumotion/transcoder/admin/datasource/dataprops.py:
    * flumotion/transcoder/admin/datasource/filesource.py:
    * flumotion/transcoder/tools/Makefile.am:
    * flumotion/transcoder/tools/oldconfig.py:
    * flumotion/transcoder/tools/upgrade.py:
    * flumotion/transcoder/virtualpath.py:
    Added a script to bootstrap from the old transcoder configuration.
    It generate the new transcoder configuration files.
    This script will be used in the future tu upgrade the configuration files.
    Added an extensive documentation in the generated files	as comments.

2007-07-27  Sebastien Merle  <sebastien@fluendo.com>

    * doc/requirments-specifications.txt:
    * flumotion/component/transcoder/context.py:
    * flumotion/component/transcoder/job.py:
    Added two substitution variables that existed in the
    previous version of the transcoder.

2007-07-27  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datasource/dataprops.py:
    Added some yet unused properties to keep them when upgrading
    from an old configuration file.

2007-07-27  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datasource/dataprops.py:
    * flumotion/transcoder/inifile.py:
    Changed the class variable name that hold properties
    text info from HEADER to COMMENTS to prevent
    confusion with the ini-files generated HEADER section.

2007-07-27  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/properties.py:
    Do not save not required properies with default value.

2007-07-26  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminconfig.py:
    * flumotion/transcoder/admin/datasource/dataprops.py:
    Added some yet unused properties to be set when upgrading
    from an old configuration file.

2007-07-26  Sebastien Merle  <sebastien@fluendo.com>

    * configure.ac:
    * flumotion/transcoder/Makefile.am:
    * flumotion/transcoder/tools/Makefile.am:
    * flumotion/transcoder/tools/__init__.py:
    * flumotion/transcoder/tools/upgrade.py:
    Added a package to put the tools programs
    like the config file upgrader.

2007-07-26  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/notifysubs.py:
    Corrected invalid import path.

    * flumotion/transcoder/admin/adminconsts.py:
    Changed default mail subject and body.

    * flumotion/transcoder/admin/notifier.py
      (Notifier.__doPrepareMailPost):
    Handle the case where no documents (or None) is specified.

2007-07-26  Sebastien Merle  <sebastien@fluendo.com>

    * doc/requirments-specifications.txt:
    * flumotion/transcoder/admin/notifysubs.py
      (SourceNotificationVariables.__init__,
      TargetNotificationVariables.__init__):
    * flumotion/transcoder/admin/scheduler.py (Scheduler.__notify):
    Added the 'triggger' substitution variable.
    It type is str and can be 'done' or 'failed'.

2007-07-26  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py
      (TranscoderAdmin.__ebAdminInitializationFailed):
    use log.notifyFailure when the initialization fail,
    and not log.error becuse it raise a SystemExit and
    the exception cause backtrace is lost.

    * flumotion/transcoder/admin/datasource/dataprops.py
      (TranscodingActivityData, NotificationActivityData):
    Put back the type of the activities.

    * flumotion/transcoder/admin/proxies/componentproxy.py
      (BaseComponentProxy._onRemoved):
    * flumotion/transcoder/admin/proxies/groupproxy.py
      (ComponentGroupProxy._onRemoved):
    * flumotion/transcoder/admin/proxies/managerproxy.py
      (ManagerProxy._onRemoved):
    If not active they had not been able to register as listener,
    so don't remove themself as listener.

2007-07-26  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor.py:
    * flumotion/component/transcoder/filetranscoder.py:
    * flumotion/transcoder/admin/main.py:
    * flumotion/transcoder/constants.py:
    * flumotion/transcoder/defer.py (DebugInfo, DebugInfo.__del__):
    * flumotion/transcoder/log.py (setFluDebug, notifyFailure,
      notifyException):
    Changed the custom transcoder Deferred debug info use
    log.notifyFailure and log with the category 'defer'.

2007-07-26  Sebastien Merle  <sebastien@fluendo.com>

    * conf/customers/bigclient.ini:
    * conf/customers/fluendo.ini:
    * conf/transcoder-admin.ini:
    * conf/transcoder-data.ini:
    * flumotion/transcoder/admin/adminconfig.py:
    * flumotion/transcoder/admin/datasource/dataprops.py (TargetData,
      ProfileData, CustomerData, AdminData, ActivityData,
      NotificationActivityData):
    * flumotion/transcoder/admin/datasource/filesource.py
      (ImmutableDataWrapper.__getattr__, MutableDataWrapper.__init__,
      MutableDataWrapper._store, MutableDataWrapper._delete,
      MutableDataWrapper.__setattr__, MutableDataWrapper.__newIdentifier,
      MutableDataWrapper.__getPath, MutableDataWrapper.__deleteFile,
      MutableDataWrapper.__moveFile, FileDataSource.__init__,
      FileDataSource.initialize, FileDataSource.retrieveDefaults,
      FileDataSource.retrieveCustomers,
      FileDataSource.retrieveCustomerInfo, FileDataSource.retrieveProfiles,
      FileDataSource.retrieveTargets, FileDataSource.retrieveTargetConfig,
      FileDataSource.retrieveActivities, FileDataSource.newActivity,
      FileDataSource.store, FileDataSource.reset, FileDataSource.delete,
      FileDataSource._mutableDataStored,
      FileDataSource._mutableDataDeleted, FileDataSource.__safeMove,
      FileDataSource.__loadAdminData, FileDataSource.__loadActivityData,
      FileDataSource.__ebInitializationFailed):
    Splited customer configuration in separated files.
    Changed some names to make it more human friendly.
    Save each activity in its own file, and move them
    to a different folder when the go 'done' or 'failed'.

    * flumotion/transcoder/admin/datasource/datasource.py (DeletionError,
      DeletionError.__init__, ResetError, ResetError.__init__):
    Added exceptions for failed reset and delete operation.

    * flumotion/transcoder/admin/datastore/activitystore.py
      (ActivityStore.__init__, ActivityStore.getNotifications):
    * flumotion/transcoder/admin/datastore/adminstore.py
      (AdminStore.__init__):
    Properly initialize base LoggerProxy class.

    * doc/requirments-specifications.txt:
    * flumotion/transcoder/admin/notifysubs.py
      (SourceNotificationVariables.__init__,
      TargetNotificationVariables.__init__):
    * flumotion/transcoder/admin/scheduler.py (Scheduler.onTranscodingDone,
      Scheduler.__notify):
    Added a success substitution variable.

    * flumotion/transcoder/inifile.py (IniFile.saveToFile):
    Made the HEADER class variable a tuple of line to be independent
    from the line separation of the persistence medium.

2007-07-26  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/utils.py (genUniqueIdentifier, makeAbsolute,
      createTimeout, hasTimedOut, __callTimeout):
    Made the timeout functions catch exceptions and notify them.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/transcoderproxy.py
      (TranscoderProxy.__init__, TranscoderProxy.waitIsAcknowledged,
      TranscoderProxy.getReport, TranscoderProxy.waitReport,
      TranscoderProxy.getDocuments, TranscoderProxy.acknowledge,
      TranscoderProxy._doBroadcastUIState,
      TranscoderProxy._onTranscodingReport,
      TranscoderProxy.__getConfigPath, TranscoderProxy.__getReportPath,
      TranscoderProxy.__wrapDocument, TranscoderProxy.__loadReport):
    Corrected the report retrieval methods.
    Added a generic document retrieval method.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/activitystore.py
      (ActivityStore.__cbWrapActivities, BaseActivity,
      BaseActivity.__init__, BaseActivity.__ebActivityStoreFailed,
      BaseActivity.__ebActivityDeleteFailed, BaseNotifyActivity,
      ActivityFactory):
    Renamed log.logFailure and log.logException
    to log.notifyFailure and log.notifyException
    and made them module function only to prevent
    confusion between transcoder's Loggable and
    flumotion's Loggable.
    Properly pass the logger parameter to activities.
    Added getRetrySleep getter to notifications.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datasource/filesource.py
      (MutableDataWrapper._store, MutableDataWrapper.__setattr__,
      FileDataSource.newActivity, FileDataSource.__ebActivitiesSaveFailed):
    Made possible dictionary and list values for the activities.
    Corrected a copy/past bug where notification activities template
    had the transcoding type set.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/notifier.py (_disableNotification,
      _buildBody, _postNotification, _cbNotificationDone,
      _ebNotificationFailed, notifyEmergency, notifyDebug,
      Notifier.__init__, Notifier.initialize, Notifier.notify,
      Notifier._postMail, Notifier.__doPrepareGetRequest,
      Notifier.__doPrepareMailPost, Notifier.__doPerformMailPost,
      Notifier.__cbPostMailSucceed, Notifier.__notificationFailed,
      Notifier.__cannotPrepare, Notifier.__cannotPerform,
      Notifier.__prepareNotification, Notifier.__performNotification):
    Implemented the notification methods and functions.
    Corrected bug in core notification methods.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/eventsource.py (EventSource._fireEventTo,
      EventSource._fireEvent, EventSource._fireEventWithoutPayload):
    Now use log.notifyException().

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminconsts.py:
    Added global notification timeout constants.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/job.py
      (TranscoderJob._transcoderPiplineCallback,
      TranscoderJob._getPreProcessVars, TranscoderJob._getPostProcessVars,
      TranscoderJob._fireJobInfo):
    Normalized substitution variables.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/context.py (TargetContext.__init__,
      Context.getTargetContext, Context.getTargetContexts,
      Context.getLinkDir, Context.getOutputWorkDir,
      Context.getLinkWorkDir):
    * flumotion/component/transcoder/reporter.py (TargetReporter.__init__,
      TargetReporter.hasFatalError, Reporter.getTargetReporter,
      Reporter.hasFatalError, Reporter.crawlPipeline):
    Made the targets properies dictionaries insteed of list.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py (TranscoderAdmin,
      TranscoderAdmin.__init__, TranscoderAdmin.initialize,
      TranscoderAdmin.onAttached, TranscoderAdmin.onComponentAddedToSet,
      TranscoderAdmin.onComponentRemovedFromSet,
      TranscoderAdmin.onComponentMessage, TranscoderAdmin.onCustomerAdded,
      TranscoderAdmin.onFailToRunOnWorker,
      TranscoderAdmin.__cbAdminInitialized,
      TranscoderAdmin.__ebSartupFailed, TranscoderAdmin.__ebResumingFailed,
      TranscoderAdmin.__ebPausingFailed):
    Added debug notification of component messages.
    Added emergency notification if a monitoring task cannot be started.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/context/customercontext.py
      (CustomerContext.getTranscodingContext):
    * flumotion/transcoder/admin/context/profilecontext.py
      (getTranscodingContext, getCustomerContext):
    * flumotion/transcoder/admin/context/targetcontext.py
      (getTranscodingContext, getCustomerContext, getProfileContext):
    Added getters to retrieve various contexts to prevent deep references.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor.py
      (FileMonitor.__notifyDebug, FileMonitor.__monitorError,
      FileMonitor.__unexpectedError):
    * flumotion/component/transcoder/filetranscoder.py
      (FileTranscoder.__notifyDebug, FileTranscoder.__transcodingError,
      FileTranscoder.__unexpectedError, FileTranscoder.__cbJobDone,
      FileTranscoder.__ebJobFailed, FileTranscoder.__cbJobTerminated,
      FileTranscoder.__ebAcknowledgeError,
      FileTranscoder.__ebDiagnoseAcknowledgeFail,
      FileTranscoder.__terminateDiagnoseMode):
    Added parameter to the notify method.
    Renamed log.logFailure and log.logException
    to log.notifyFailure and log.notifyException.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * doc/requirments-specifications.txt:
    Updated the substitution variable specification.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * conf/transcoder-admin.ini:
    * flumotion/transcoder/admin/adminconfig.py (NotifierConfig):
    Made diffrent email sender for debug and emergency emails.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/properties.py (String.checkValue,
      String.str2val, String.val2str):
    * flumotion/transcoder/transconfig.py (ProfileConfig,
      TranscodingConfig):
    * flumotion/transcoder/transreport.py (SourceReport, TargetReport,
      TranscodingReport, TranscodingReport.init):
    * flumotion/transcoder/virtualpath.py (VirtualPath.unjellyFor,
      VirtualPathProperty, VirtualPathProperty.__init__,
      VirtualPathProperty.checkValue, VirtualPathProperty.str2val,
      VirtualPathProperty.val2str):
    Removed the VirtualPath property for properties.py to have
    less dependencies, the property has been moved to virtualpath.py.
    Made the String property escape/unescape values to permit
    binary data and strange strings.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/defer.py (DebugInfo.__del__, logFailures):
    Updated to match the new parameters of the notification functions.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/scheduler.py (Scheduler.__init__,
      Scheduler.onTranscodingFailed, Scheduler.onTranscodingDone,
      Scheduler.__notify):
    Now add notifications about the transcoding outcome.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/componentproxy.py
      (IComponentListener.onComponentMessage,
      ComponentListener.onComponentMessage, BaseComponentProxy.__init__,
      BaseComponentProxy._onActivated,
      BaseComponentProxy._componentStateAppend,
      BaseComponentProxy._onComponentMessage,
      ComponentProxy._onComponentMessage):
    Added an event to notify of components messages.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/notifysubs.py (NotificationVariables,
      NotificationVariables.__init__,
      NotificationVariables._addAnalyseResult, SourceNotificationVariables,
      SourceNotificationVariables.__init__,
      SourceNotificationVariables.getTargetVariables,
      TargetNotificationVariables, TargetNotificationVariables.__init__):
    Created classes to encapsulate the variable set to use
    for notification substitution.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/document.py:
    Corrected invalid import path.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/log.py (Loggable, notifyFailure,
      notifyException, getExceptionMessage, getFailureMessage,
      getExceptionTraceback, log, debug, info, warning, error):
    * flumotion/transcoder/admin/adminelement.py
      (AdminElement._unexpectedError, AdminElement.__cbLogFailures):
    * flumotion/transcoder/admin/admintask.py (AdminTask.__ebStartupFailed,
      AdminTask.__cbMultiDeleteResults, AdminTask.__bbTaskTerminated,
      AdminTask.__cbMultiUIStateResults,
      AdminTask.__bbSelectPotentialComponent,
      AdminTask.__ebPotentialComponentFailure,
      AdminTask.__ebComponentLoadFailed, AdminTask.__ebComponentNotHappy,
      AdminTask.__ebUIStateFailed, AdminTask.__ebComponentStopFailed,
      AdminTask.__ebComponentDeleteFailed, AdminTask.__ebNoValidWorker):
    * flumotion/transcoder/admin/datastore/adminstore.py
      (AdminStore.__ebCustomerInitFailed):
    * flumotion/transcoder/admin/datastore/basestore.py
      (BaseStore._retrievalFailed, BaseStore.__ebDataSourceError):
    * flumotion/transcoder/admin/datastore/customerstore.py
      (CustomerStore.__ebProfileInitFailed):
    * flumotion/transcoder/admin/datastore/profilestore.py
      (ProfileStore.__ebTargetInitFailed):
    * flumotion/transcoder/admin/monitoring.py
      (Monitoring.__cbStartResumeMonitoring,
      Monitoring.__ebStartupResumingFailure,
      Monitoring.__ebAddComponentFailed,
      Monitoring.__ebRemoveComponentFailed):
    * flumotion/transcoder/admin/montask.py
      (MonitoringTask.__ebSetFileStateFailed,
      MonitoringTask.__ebMoveFilesFailed):
    * flumotion/transcoder/admin/proxies/componentset.py
      (ComponentSetSkeleton.__ebAcceptFailure):
    * flumotion/transcoder/admin/proxies/fluproxy.py
      (BaseFlumotionProxy.__ebDictElementInitFailed,
      BaseFlumotionProxy.__ebElementInitFailed):
    * flumotion/transcoder/admin/taskmanager.py
      (TaskManager.__ebResolveCallFailure,
      TaskManager.__ebGetPropertiesFailed,
      TaskManager.__ebComponentStopFailed,
      TaskManager.__ebComponentDeleteFailed, TaskManager.__ebStartupFailed,
      TaskManager.__ebPauseFailed, TaskManager.__ebTaskStopFailed):
    * flumotion/transcoder/admin/transcoding.py
      (Transcoding.__cbStartResumeTranscoding,
      Transcoding.__ebStartupResumingFailure,
      Transcoding.__ebAddComponentFailed,
      Transcoding.__ebRemoveComponentFailed):
    Renamed log.logFailure and log.logException
    to log.notifyFailure and log.notifyException
    and made them module function only to prevent
    confusion between transcoder's Loggable and
    flumotion's Loggable.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/Makefile.am:
    * flumotion/transcoder/admin/compprops.py:
    * flumotion/transcoder/admin/monprops.py:
    * flumotion/transcoder/admin/transprops.py:
    * flumotion/transcoder/admin/proxies/Makefile.am:
    * flumotion/transcoder/admin/proxies/compprops.py:
    * flumotion/transcoder/admin/proxies/monprops.py:
    * flumotion/transcoder/admin/proxies/transprops.py
      (createTranscodingConfigFromContext,
      TranscoderProperties.getConfigPath):
    * flumotion/transcoder/admin/proxies/monitorproxy.py:
    * flumotion/transcoder/admin/transtask.py
      (TranscodingTask.__ebAcknowledgeFailed):
    Moved components property classes to proxies.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/base.xml:
    * flumotion/component/transcoder/filetranscoder.xml:
    Made the properties.py a base module for all components.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * conf/transcoder-admin.ini:
    * flumotion/transcoder/admin/adminconfig.py (NotifierConfig):
    Made diffrent email sender for debug and emergency emails.

2007-07-25  Sebastien Merle  <sebastien@fluendo.com>

    * TODO:
    Updated the TODO file.

2007-07-23  Sebastien Merle  <sebastien@fluendo.com>

    * Makefile.am:
    * flumotion/transcoder/Makefile.am:
    * flumotion/transcoder/admin/Makefile.am:
    * flumotion/transcoder/admin/admin.py
      (TranscoderAdmin.__ebSartupFailed,
      TranscoderAdmin.__ebResumingFailed,
      TranscoderAdmin.__ebPausingFailed):
    * flumotion/transcoder/admin/adminelement.py
      (AdminElement._unexpectedError):
    * flumotion/transcoder/admin/compprops.py
      (ComponentPropertiesMixin.getDigest):
    * flumotion/transcoder/admin/datasource/filesource.py
      (MutableDataWrapper, MutableDataWrapper._clone):
    * flumotion/transcoder/admin/datasource/sqlsource.py (SQLDataSource,
      SQLDataSource.__init__):
    * flumotion/transcoder/admin/datastore/activitystore.py
      (ActivityStore.__newActivity, BaseActivity, BaseActivity.__init__,
      TranscodingActivity.__init__, BaseNotifyActivity.__init__,
      GETRequestNotifyActivity.__init__, MailNotifyActivity.__init__):
    * flumotion/transcoder/admin/datastore/customerstore.py
      (CustomerStore.__cbProfileInitialized):
    * flumotion/transcoder/admin/datastore/profilestore.py
      (ProfileStore.__cbTargetInitialized):
    * flumotion/transcoder/admin/eventsource.py (EventSource):
    * flumotion/transcoder/admin/monprops.py:
    * flumotion/transcoder/admin/notifier.py
      (Notifier.__retryNotification):
    * flumotion/transcoder/admin/proxies/componentproxy.py (registerProxy,
      BaseComponentProxy.getRequestedWorkerName, BaseComponentProxy.signal,
      BaseComponentProxy._doBroadcastUIState,
      BaseComponentProxy._onSetUIState,
      BaseComponentProxy._onUnsetUIState):
    * flumotion/transcoder/admin/proxies/componentset.py
      (ComponentSetSkeleton.__waitComponentTimeout):
    * flumotion/transcoder/admin/proxies/monitorproxy.py:
    * flumotion/transcoder/admin/transbalancer.py:
    * flumotion/transcoder/admin/transtask.py:
    * flumotion/transcoder/admin/waiters.py:
    * flumotion/transcoder/inifile.py:
    * flumotion/transcoder/log.py (ILogger, ILogger.logFailure,
      ILogger.logException, ILogger.warnAndRaise, ILogger.log,
      ILogger.debug, ILogger.info, ILogger.warning, ILogger.error,
      Loggable, LoggerProxy):
    * flumotion/transcoder/pipelinecrawler.py (printPipeline):
    * flumotion/transcoder/process.py:
    Small changes to please PyChecker (And correct bugs).

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/base.xml:
    Added the transcoder-specific defer.py

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/utils.py (deepCopy):
    Moved all deferred utility callbacks to defer.py.
    Changed to use transcoder's version of defer.py.

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/process.py:
    Changed to use transcoder's version of defer.py.

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/log.py (setDebugNotifier, setFluDebug, Loggable,
      Loggable.logFailure, Loggable.logException, Loggable.warnAndRaise,
      LoggerProxy.__getattr__, logFailure, logException, warnAndRaise):
    Check the log category "defer" to set the Deferred debugging flag.
    Made possible to use logFailure and logException as functions.

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/taskmanager.py (TaskManager._tryStartup,
      TaskManager.__pauseTaskManager, TaskManager.__cbCallForAllTasks,
      TaskManager.__waitIdle, TaskManager.__cbWaitActive):
    * flumotion/transcoder/admin/transcoding.py
      (Transcoding.__cbStartResumeTranscoding,
      Transcoding.__cbAddBalancedTask):
    * flumotion/transcoder/admin/transtask.py
      (TranscodingTask.onTranscoderJobStateChanged):
    * flumotion/transcoder/admin/waiters.py:
    * flumotion/transcoder/defer.py (setDebugNotifier, setDebugging,
      DebugInfo, DebugInfo.__del__, Deferred, Deferred.__init__,
      delayedSuccess, delayedFailure, dropResult, bridgeResult,
      resolveFailure, overrideResult, shiftResult, logFailures):

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/componentset.py:
    * flumotion/transcoder/admin/proxies/fluproxy.py
      (BaseFlumotionProxy._doPrepareInit,
      BaseFlumotionProxy._doPrepareActivation):
    * flumotion/transcoder/admin/proxies/groupproxy.py:
    * flumotion/transcoder/admin/proxies/managerproxy.py:
    * flumotion/transcoder/admin/proxies/workerset.py:
    Changed to use transcoder's version of defer.py.

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/componentproxy.py
      (BaseComponentProxy.waitUIState, BaseComponentProxy.start,
      BaseComponentProxy.stop, BaseComponentProxy.restart,
      BaseComponentProxy.delete, BaseComponentProxy.forceStop,
      BaseComponentProxy.forceDelete, BaseComponentProxy.kill,
      BaseComponentProxy.__asyncRetryKillIfNeeded,
      BaseComponentProxy.__asyncForceKillFailed,
      BaseComponentProxy.__asyncForceStopFailed,
      BaseComponentProxy.__asyncForceDeleteFailed):
    Changed to use transcoder's version of defer.py.
    Do not use defer._nothing anymore, it's private. Use None insteed.

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/monitoring.py
      (Monitoring.__cbStartResumeMonitoring,
      Monitoring.__cbAddBalancedTask):
    * flumotion/transcoder/admin/montask.py:
    * flumotion/transcoder/admin/notifier.py (notifyEmergency,
      notifyDebug):
    * flumotion/transcoder/admin/scheduler.py:
    Changed to use transcoder's version of defer.py.

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/main.py (main):
    Setup the debug notifiers for transcoder's log and defer modules.

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/customerstore.py (CustomerStore,
      CustomerStore.getIdentifier, CustomerStore.__cbProfileInitialized):
    Corrected a bug in getters definition.
    Do not use defer._nothing anymore, it's private. Use None insteed.
    Changed to use transcoder's version of defer.py.

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/notifystore.py
      (BaseNotification):
    * flumotion/transcoder/admin/datastore/configstore.py (BaseConfig):
    Added getIdentifier getters to the store and the activities.

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/basestore.py (getter,
      BaseStore.__init__, BaseStore.waitDatasource):
    Corrected a bug in the basic getter, the default value wasn't used.
    Changed to use transcoder's version of defer.py.

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/targetstore.py
      (TargetStore.getIdentifier):
    * flumotion/transcoder/admin/datastore/profilestore.py
      (ProfileStore.getIdentifier, ProfileStore.__cbTargetInitialized):
    * flumotion/transcoder/admin/datastore/adminstore.py
      (AdminStore.getIdentifier, AdminStore.__cbCustomerInitialized):
    Added getIdentifier getters to the store and the activities.
    Changed to use transcoder's version of defer.py.

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/activitystore.py
      (ActivityStore.getLabel, ActivityStore.getIdentifier, BaseActivity,
      BaseActivity.setter, BaseActivity.__init__,
      TranscodingActivity.getCustomer, TranscodingActivity.getProfile):
    Added getIdentifier getters to the store and the activities.
    Restored the accidentally removed getProfile and getCustomer methods.
    Changed to use transcoder's version of defer.py.

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datasource/filesource.py
      (MutableDataWrapper.__init__, MutableDataWrapper.__setattr__,
      FileDataSource.initialize, FileDataSource.retrieveActivities,
      FileDataSource.newActivity):
    Properly create notification activities.
    Made the subtype value read-only.
    Changed to use transcoder's version of defer.py.

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admintask.py (AdminTask.waitIdle,
      AdminTask._stopComponent, AdminTask._deleteComponent,
      AdminTask.__startup):
    Changed to use transcoder's version of defer.py.
    Do not use defer._nothing anymore, it's private. Use None insteed.

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminelement.py
      (AdminElement.getIdentifier):
    All admin element have now a getIdentifier method.
    Changed to use transcoder's version of defer.py.

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/job.py (TranscoderJob.readyForAck,
      TranscoderJob.acknowledge, TranscoderJob.__ebRecoverableFailure,
      TranscoderJob.__cbProcessTargets, TranscoderJob.__cbTargetIsAMedia):
    Changed to use transcoder's version of defer.py.
    Do not use defer._nothing anymore, it's private. Use None insteed.

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/gstutils.py:
    * flumotion/component/transcoder/transcoder.py:
    * flumotion/transcoder/admin/admin.py (TranscoderAdmin.initialize,
      TranscoderAdmin.__startup, TranscoderAdmin.__resume,
      TranscoderAdmin.__pause, TranscoderAdmin.__cbAdminInitialized):
    Changed to use transcoder's version of defer.py.
    Do not use defer._nothing anymore, it's private. Use None insteed.

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor.py (FileMonitor.init,
      FileMonitor.__notifyDebug, FileMonitor.__monitorError,
      FileMonitor.__unexpectedError):
    * flumotion/component/transcoder/filetranscoder.py
      (FileTranscoder.init, FileTranscoder.component_stop,
      FileTranscoder._getReportPath, FileTranscoder.__notifyDebug,
      FileTranscoder.__transcodingError, FileTranscoder.__cbJobDone,
      FileTranscoder.__ebJobFailed, FileTranscoder.__cbJobTerminated,
      FileTranscoder.__ebAcknowledgeError,
      FileTranscoder.__ebDiagnoseAcknowledgeFail):
    Cannot use self.logException because components
    inherite from flumotion Loggable, so changed to log.logException.
    Added a debugNotify that add a component message,
    used by transcoder's log and defer modules when
    a traceback is detected.
    Changed to use transcoder's version of defer.py.

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/Makefile.am:
    * flumotion/transcoder/defer.py:
    Added a transcoder-specific version of twsited defer.py.
    It allow to callback a notify function when a deferred
    detect a lost failure.
    Moved all utility callback from utils.py to defer.py.

2007-07-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py (TranscoderAdmin.__init__,
      TranscoderAdmin.initialize, TranscoderAdmin.__cbAdminInitialized):
    Use Notifier.

    * flumotion/transcoder/admin/context/Makefile.am:
    * flumotion/transcoder/admin/context/notifiercontext.py
      (NotifierContext, NotifierContext.__init__):
    * flumotion/transcoder/admin/context/admincontext.py
      (AdminContext.getDataSource, AdminContext.getNotifierContext,
      AdminContext.getWorkerContext):
    Added a notifier context arounf the notifier configuration.

    * flumotion/transcoder/admin/notifier.py (Notifier.__init__,
      Notifier.initialize, Notifier.__doPrepareMailPost,
      Notifier.__doPerformMailPost):
    Use the notifier context.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/log.py (Loggable.warnAndRaise,
      LoggerProxy.logFailure, LoggerProxy.logException,
      LoggerProxy.warnAndRaise):
    Added a utility method to Loggable and LoggerProxy
    to do a warning logging and raise an exception at the same time.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/scheduler.py
      (Scheduler.onTranscodingTerminated,
      Scheduler.__startTranscodingTask):
    Some menor logging changes.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/notifier.py (notifyDebug,
      Notifier.__init__, Notifier.notify, Notifier._postMail,
      Notifier._performGetRequest, Notifier.__doPrepareGetRequest,
      Notifier.__doPrepareMailPost, Notifier.__doPerformGetRequest,
      Notifier.__cbGetPageSucceed, Notifier.__ebGetPageFailed,
      Notifier.__doPerformMailPost, Notifier.__cbPostMailSucceed,
      Notifier.__ebPostMailFailed, Notifier.__retryNotification,
      Notifier.__notificationSucceed, Notifier.__notificationFailed,
      Notifier.__notificationTerminated, Notifier.__cannotPrepare,
      Notifier.__cannotPerform, Notifier.__prepareNotification,
      Notifier.__performNotification):
    Created the Notifier class that is able to notify by mail or by
    GET requests. For each notification it create and store
    an activitie instance.
    It use twisted.web.client to do the GET request and twisted.smtp
    to send the mails.
    The mails are multipart mime, TO, CC, BCC headers
    and attachments are supported with IDocument.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/main.py (main):
    Initialize the log notifier to be able to automaticaly
    send debug mail when getting traceback (for example).

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/errors.py (OrphanComponentError.__init__,
      WaiterError.__init__, NotificationError, NotificationError.__init__,
      DocumentError, DocumentError.__init__):
    Added a NotifierError and DocumentError.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/enums.py:
    Changed MailAttachmentEnum to DocumentTypeEnum to be more generical.
    Will be used with IDocument to specify document to the notifier that
    will choose what to do with them.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/targetstore.py (TargetStore):
    Use the new version of MetaStore to generate the getters.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/profilestore.py (ProfileStore):
    Use the new version of MetaStore to generate the getters.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/notifystore.py
      (BaseNotification,
      BaseNotification._admin_overridable_getter_builder,
      BaseNotification.getter, BaseNotification.getTarget,
      EMailNotification, EMailNotification.__init__,
      GETRequestNotification, GETRequestNotification.__init__):
    Now all notifications have timeout, retryMax, and retrySleep.
    Now use MetaStore metaclass to generate the getters.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/notificationstore.py:
    Renamed to notifystore.py

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/customerstore.py
      (CustomerStore):
    Use the new version of MetaStore to generate the getters.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/configstore.py (BaseConfig,
      AudioConfig, AudioConfig.__init__, VideoConfig, VideoConfig.__init__,
      AudioVideoConfig, ThumbnailsConfig, ThumbnailsConfig.__init__):
    Now use MetaStore metaclass to generate the getters.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/basestore.py
      (_basic_getter_builder, getter, _parent_overridable_getter_builder,
      getter, MetaStore, MetaStore.__init__, MetaStore.createGetters,
      MetaStore.createSetters):
    Updated MetaStore to be more generic. Now the class that don't inherite
    from BaseStore can use it too, and can create new types of
    getters/setters with custom builders.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/adminstore.py (AdminStore):
    Changed XXXGETRequestXXX for XXXHTTPRequestXXX with the idea of
    supporting POST request in the future.
    Use the new version of MetaStore to generate the getters.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/activitystore.py
      (ActivityStore.getNotifications, ActivityStore.newTranscoding,
      ActivityStore.newNotification, ActivityStore.__newActivity,
      ActivityStore.__cbWrapActivities, _buildPropertyGetter, getter,
      BaseActivity, BaseActivity._data_getter_builder, BaseActivity.getter,
      BaseActivity._basic_setter_builder, BaseActivity.setter,
      BaseActivity._data_setter_builder, BaseActivity.setter,
      BaseActivity.reset, TranscodingActivity,
      TranscodingActivity.__init__, TranscodingActivity._setup,
      BaseNotifyActivity, BaseNotifyActivity.__init__,
      BaseNotifyActivity.incRetryCount, BaseNotifyActivity._setup,
      GETRequestNotifyActivity, GETRequestNotifyActivity.__init__,
      MailNotifyActivity, MailNotifyActivity.__init__,
      MailNotifyActivity.getRecipientsAddr,
      MailNotifyActivity.setRecipientsAddr, ActivityFactory):
    Added the activity subtype, and now have different activity
    class for the different notification types.
    Use the MetaStor metaclass to generate most of the getters/setters.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/Makefile.am:
    Renamed notificationstore.py to notifystore.py.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datasource/datasource.py
      (IDataSource.retrieveDefaults, IDataSource.retrieveCustomers,
      IDataSource.retrieveGlobalNotifications,
      IDataSource.retrieveActivities, IDataSource.newActivity,
      IDataSource.newNotification):
    Now all notifications have timeout, retryMax, and retrySleep.
    All activities have a subtype of type NotificationTypeEnum
    or TranscodingTypeEnum.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminconsts.py:
    Added notifier-related constants.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/Makefile.am:
    * flumotion/transcoder/admin/document.py (IDocument,
      IDocument.getLabel, IDocument.getType, IDocument.getMimeType,
      IDocument.__str__, IDocument.asString, IDocument.asFile,
      StringDocument, StringDocument.__init__, StringDocument.getLabel,
      StringDocument.getType, StringDocument.getMimeType,
      StringDocument.__str__, StringDocument.asString,
      StringDocument.asFile, FileDocument, FileDocument.__init__,
      FileDocument.getLabel, FileDocument.getType,
      FileDocument.getMimeType, FileDocument.__str__,
      FileDocument.asString, FileDocument.asFile):
    Added a document wrapper to encapsulate the report, config and log files.
    This way generic document can be passed to the notifier for it
    to choose what to do with them. A document have a type
    (DocumentTypeEnum) a mime type, a label to identify it and
    can be retrieved as string or file.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/test/test_utils.py (TestUtils.test_joinMailRecipients,
      TestUtils.check, TestUtils.test_splitMailRecipients,
      TestUtils.check):
    * flumotion/transcoder/utils.py (joinCommandFields,
      splitMailRecipients, joinMailRecipients, splitMailAddress,
      joinMailAddress):
    Added some basic mail address manipulation with tests.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datasource/filesource.py
      (MutableDataWrapper.__setattr__, _createReqNotif, _createMailNotif,
      FileDataSource.retrieveProfileNotifications):
    * flumotion/transcoder/admin/datasource/dataprops.py (ProfileData,
      AdminData, ActivityData, TranscodingActivityData,
      NotificationActivityData):
    * conf/transcoder-data.ini:
    Update the mail properties from list to a standard
    Name <name.email.com>, Name2 <name2.email.com> representation.

2007-07-19  Sebastien Merle  <sebastien@fluendo.com>

    * conf/transcoder-admin.ini:
    * flumotion/transcoder/admin/adminconfig.py (NotifierConfig):
    Added the notifier section and properties.

2007-07-16  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filetranscoder.py
      (FileTranscoder.__cbJobDone, FileTranscoder.__ebJobFailed,
      FileTranscoder.__cbJobTerminated,
      FileTranscoder.__ebAcknowledgeError):
    * flumotion/transcoder/log.py (Loggable.logException,
      getExceptionTraceback):
    Centralized exception logging to be able to send notifications.

2007-07-16  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor.py
      (FileMonitor.__monitorError, FileMonitor.__unexpectedError):
    * flumotion/component/transcoder/filetranscoder.py
      (FileTranscoder.__transcodingError, FileTranscoder.__unexpectedError,
      FileTranscoder.__ebDiagnoseAcknowledgeFail):
    * flumotion/transcoder/admin/admin.py
      (TranscoderAdmin.__ebSartupFailed,
      TranscoderAdmin.__ebResumingFailed,
      TranscoderAdmin.__ebPausingFailed):
    * flumotion/transcoder/admin/adminelement.py
      (AdminElement._unexpectedError, AdminElement.__cbLogFailures):
    * flumotion/transcoder/admin/admintask.py (AdminTask.__ebStartupFailed,
      AdminTask.__cbMultiDeleteResults, AdminTask.__bbTaskTerminated,
      AdminTask.__cbMultiUIStateResults,
      AdminTask.__bbSelectPotentialComponent,
      AdminTask.__ebPotentialComponentFailure,
      AdminTask.__ebComponentLoadFailed, AdminTask.__ebComponentNotHappy,
      AdminTask.__ebUIStateFailed, AdminTask.__ebComponentStopFailed,
      AdminTask.__ebComponentDeleteFailed, AdminTask.__ebNoValidWorker):
    * flumotion/transcoder/admin/datasource/filesource.py
      (FileDataSource.__ebActivitiesSaveFailed):
    * flumotion/transcoder/admin/datastore/activitystore.py
      (BaseActivity.__ebActivityStoreFailed,
      BaseActivity.__ebActivityDeleteFailed):
    * flumotion/transcoder/admin/datastore/adminstore.py
      (AdminStore.__ebCustomerInitFailed):
    * flumotion/transcoder/admin/datastore/basestore.py
      (BaseStore._retrievalFailed, BaseStore.__ebDataSourceError):
    * flumotion/transcoder/admin/datastore/customerstore.py
      (CustomerStore.__ebProfileInitFailed):
    * flumotion/transcoder/admin/datastore/profilestore.py
      (ProfileStore.__ebTargetInitFailed):
    * flumotion/transcoder/admin/monitoring.py
      (Monitoring.__cbStartResumeMonitoring,
      Monitoring.__ebStartupResumingFailure,
      Monitoring.__ebAddComponentFailed,
      Monitoring.__ebRemoveComponentFailed):
    * flumotion/transcoder/admin/montask.py
      (MonitoringTask.__ebSetFileStateFailed,
      MonitoringTask.__ebMoveFilesFailed):
    * flumotion/transcoder/admin/proxies/componentset.py
      (ComponentSetSkeleton.__ebAcceptFailure):
    * flumotion/transcoder/admin/proxies/fluproxy.py
      (BaseFlumotionProxy.__ebDictElementInitFailed,
      BaseFlumotionProxy.__ebElementInitFailed):
    * flumotion/transcoder/admin/taskmanager.py
      (TaskManager.__ebResolveCallFailure,
      TaskManager.__ebGetPropertiesFailed,
      TaskManager.__ebComponentStopFailed,
      TaskManager.__ebComponentDeleteFailed, TaskManager.__ebStartupFailed,
      TaskManager.__ebPauseFailed, TaskManager.__ebTaskStopFailed):
    * flumotion/transcoder/admin/transcoding.py
      (Transcoding.__cbStartResumeTranscoding,
      Transcoding.__ebStartupResumingFailure,
      Transcoding.__ebAddComponentFailed,
      Transcoding.__ebRemoveComponentFailed):
    * flumotion/transcoder/admin/transtask.py
      (TranscodingTask.__ebAcknowledgeFailed):
    * flumotion/transcoder/log.py (setNotifier, setDefaultCategory,
      Loggable, Loggable.logFailure, LoggerProxy.logFailure, log, debug,
      info, warning, error):
    * flumotion/transcoder/utils.py (logFailures):
    Centralized failure logging to be able to send notifications.

2007-07-16  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/Makefile.am:
    * flumotion/transcoder/admin/notifier.py (notifyEmergency, notifyDebug,
      INotifierListener, NotifierListener, Notifier, Notifier.__init__,
      Notifier.addNotifications):
    Added notification module skeleton.

2007-07-16  Sebastien Merle  <sebastien@fluendo.com>

    * TODO:
    There is more to do.

2007-07-16  Sebastien Merle  <sebastien@fluendo.com>

    * conf/transcoder-admin.ini:
    * flumotion/transcoder/admin/adminconfig.py (NotifierConfig,
      AdminConfig):
    Added notifier configuration.

2007-07-16  Sebastien Merle  <sebastien@fluendo.com>

    * conf/transcoder-data.ini:
    * flumotion/transcoder/admin/datasource/dataprops.py (TargetData,
      ProfileData):
    * flumotion/transcoder/admin/datasource/filesource.py
      (FileDataSource.retrieveProfileNotifications,
      FileDataSource.retrieveTargetNotifications):
    Made the notifications lists to be able to specify more than one.

2007-07-16  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/Makefile.am:
    * flumotion/transcoder/admin/datastore/Makefile.am:
    Added new files to the makefiles.

2007-07-16  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py (TranscoderAdmin.__init__):
    * flumotion/transcoder/admin/admintask.py:
    * flumotion/transcoder/admin/datasource/dataprops.py:
    * flumotion/transcoder/admin/datasource/filesource.py:
    * flumotion/transcoder/admin/datastore/activitystore.py:
    * flumotion/transcoder/admin/datastore/adminstore.py:
    * flumotion/transcoder/admin/datastore/basestore.py (BaseStore,
      BaseStore.__init__):
    * flumotion/transcoder/admin/datastore/notificationstore.py:
    * flumotion/transcoder/admin/enums.py:
    * flumotion/transcoder/admin/proxies/atmosphereproxy.py:
    * flumotion/transcoder/admin/proxies/componentproxy.py:
    * flumotion/transcoder/admin/proxies/flowproxy.py:
    * flumotion/transcoder/admin/scheduler.py (Scheduler.__init__):
    * flumotion/transcoder/admin/taskmanager.py:
    * flumotion/transcoder/enums.py:
    Moved all admin-specific enumerations to f.t.admin.enums

2007-07-16  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/utils.py (deepCopy):
    Added a safe deep copy function that doesn't mess with enums.

2007-07-16  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/enums.py:
    Added notification-related enumerations.

2007-07-16  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/scheduler.py (Scheduler.__init__,
      Scheduler.initialize, Scheduler.__cbRestoreTasks,
      Scheduler.__startTranscodingTask):
    Use the ActivityStore.
    Removed some debug print.

2007-07-16  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/componentproxy.py
      (BaseComponentProxy._getAvatarId):
    Use self.getParent() insteed of self._parent

2007-07-16  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/configstore.py
      (ThumbnailsConfig.getFormat, TargetConfigFactory):
    Some refactoring.

2007-07-16  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py (TranscoderAdmin.__init__):
    * flumotion/transcoder/admin/datastore/activitystore.py (ActivityStore,
      ActivityStore.__init__, ActivityStore.getLabel,
      ActivityStore.getTranscodings, ActivityStore.getNotifications,
      ActivityStore.newTranscoding, ActivityStore.newNotification,
      ActivityStore._storeActivity, ActivityStore._resetActivity,
      ActivityStore._deleteActivity, ActivityStore.__getActivities,
      ActivityStore.__newActivity, ActivityStore.__cbWrapActivities,
      BaseActivity.store, BaseActivity.reset, BaseActivity.delete,
      BaseActivity._getAdminStore, BaseActivity._getData,
      BaseActivity.__ebActivityStoreFailed,
      BaseActivity.__ebActivityResetFailed,
      BaseActivity.__ebActivityDeleteFailed,
      TranscodingActivity.getCustomer, TranscodingActivity.getProfile,
      TranscodingActivity._setProfile,
      TranscodingActivity._setInputRelPath, NotificationActivity,
      NotificationActivity.__init__, NotificationActivity.getRequestURL,
      NotificationActivity.getRetryCount, NotificationActivity.getRetryMax,
      NotificationActivity.getRetryNextTime,
      NotificationActivity.setRetryCount, NotificationActivity.setRetryMax,
      NotificationActivity.setRetryNextTime,
      NotificationActivity._setRequestURL,
      NotificationActivity._setNotification, ActivityFactory):
    Some refactoring.
    The store is now responsible of store and delete operation,
    so the delete and store method do not return deferred, and
    the success of the operation is assumed. If something append
    to fail during these operation it will be the store that
    would be responsible to resolve the problem (retry?)

2007-07-16  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datasource/dataprops.py (TargetData,
      ProfileData, AdminData, TranscodingActivityData,
      NotificationActivityData, ActivitiesData):
    * flumotion/transcoder/admin/datasource/datasource.py
      (IDataSource.waitReady, IDataSource.retrieveGlobalNotifications,
      IDataSource.retrieveCustomerNotifications,
      IDataSource.retrieveProfileNotifications,
      IDataSource.retrieveTargetNotifications,
      IDataSource.retrieveActivities):
    * flumotion/transcoder/admin/datasource/filesource.py
      (ImmutableWrapper, ImmutableWrapper.__init__,
      ImmutableWrapper.__getattr__, ImmutableWrapper.__setattr__,
      ImmutableDataWrapper, ImmutableDataWrapper.__setattr__,
      ImmutableDataWrapper._getData, MutableDataWrapper,
      MutableDataWrapper._store, MutableDataWrapper._delete,
      MutableDataWrapper.__setattr__, _createReqNotif, _createMailNotif,
      FileDataSource.waitReady, FileDataSource.retrieveDefaults,
      FileDataSource.retrieveCustomers,
      FileDataSource.retrieveCustomerInfo, FileDataSource.retrieveProfiles,
      FileDataSource.retrieveGlobalNotifications,
      FileDataSource.retrieveCustomerNotifications,
      FileDataSource.retrieveProfileNotifications,
      FileDataSource.retrieveTargetNotifications,
      FileDataSource.retrieveTargets, FileDataSource.retrieveTargetConfig,
      FileDataSource.retrieveActivities, FileDataSource.newActivity,
      FileDataSource.store, FileDataSource.reset, FileDataSource.delete):
    Added a timeout to the waitReady method.
    Separated retrievals of global, customers, profiles
    and targets notifications.

2007-07-16  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/datastore/notificationstore.py
      (BaseNotification, BaseNotification.__init__,
      BaseNotification.getIdentifier, BaseNotification.getCustomer,
      BaseNotification.getProfile, BaseNotification.getTarget,
      BaseNotification.getType, BaseNotification.getTriggers,
      EMailNotification, EMailNotification.__init__,
      EMailNotification.getSubjectTemplate,
      EMailNotification.getBodyTemplate, EMailNotification.getAttachments,
      EMailNotification.getAddresses, GETRequestNotification,
      GETRequestNotification.__init__,
      GETRequestNotification.getRequestTemplate,
      GETRequestNotification.getRetryTimeout,
      GETRequestNotification.getRetryCount,
      GETRequestNotification.getRetrySleep, NotificationFactory):
    * flumotion/transcoder/admin/datastore/adminstore.py
      (AdminStore.__init__, AdminStore.getActivityStore,
      AdminStore._doGetChildElements, AdminStore._doSyncListener,
      AdminStore._doPrepareInit, AdminStore._doRetrieveNotifications,
      AdminStore._doWrapNotification, AdminStore.__cbRetrieveDefaults,
      AdminStore.__cbRetrieveCustomers):
    * flumotion/transcoder/admin/datastore/basestore.py
      (BaseStore.__init__, BaseStore.getNotifications,
      BaseStore.iterNotifications, BaseStore._doRetrieveNotifications,
      BaseStore._doWrapNotification, BaseStore._retrievalFailed,
      BaseStore._doPrepareInit, BaseStore.waitDatasource,
      BaseStore._doPrepareActivation, BaseStore.__cbRetrieveNotifications,
      BaseStore.__cbWrapNotifications, BaseStore.__cbNotificationsReceived,
      BaseStore.__ebDataSourceError):
    * flumotion/transcoder/admin/datastore/customerstore.py
      (CustomerStore.getAdmin, CustomerStore._doSyncListener,
      CustomerStore._doPrepareInit, CustomerStore._onActivated,
      CustomerStore._onAborted, CustomerStore._doRetrieveNotifications,
      CustomerStore._doWrapNotification, CustomerStore.__cbRetrieveInfo,
      CustomerStore.__cbRetrieveProfiles,
      CustomerStore.__cbProfileInitialized,
      CustomerStore.__ebProfileInitFailed):
    * flumotion/transcoder/admin/datastore/profilestore.py
      (ProfileStore.getAdmin, ProfileStore.getCustomer,
      ProfileStore._doSyncListener, ProfileStore._doPrepareInit,
      ProfileStore._onActivated, ProfileStore._onAborted,
      ProfileStore._doRetrieveNotifications,
      ProfileStore._doWrapNotification, ProfileStore.__cbRetrieveTargets,
      ProfileStore.__cbTargetInitialized):
    * flumotion/transcoder/admin/datastore/targetstore.py
      (TargetStore.getAdmin, TargetStore.getCustomer,
      TargetStore.getProfile, TargetStore._doPrepareInit,
      TargetStore._onActivated, TargetStore._onAborted,
      TargetStore._doRetrieveNotifications,
      TargetStore._doWrapNotification, TargetStore.__cbRetrieveConfig,
      TargetStore.__cbConfigReceived):
    Added the notifications to the AdminStore (global notifications),
    CustomerStore, ProfileStore and TargetStore.
    Use a timeout when waiting for the datasource to be ready.
    Properly call the BaseStore method when overriding.

2007-07-16  Sebastien Merle  <sebastien@fluendo.com>

    * conf/transcoder-data.ini:
    Added the notifications entry.

2007-07-16  Sebastien Merle  <sebastien@fluendo.com>

    * AUTHORS:
    * HACKING:
    * README:
    * TODO:
    Updated the root information files.

2007-07-12  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/Makefile.am:
    * flumotion/transcoder/admin/datastore/activitystore.py (BaseActivity,
      BaseActivity.__init__, BaseActivity.store, BaseActivity.reset,
      BaseActivity.delete, BaseActivity.getLabel, BaseActivity.getType,
      BaseActivity.getState, BaseActivity.setState,
      BaseActivity.getStartTime, BaseActivity.getLastTime,
      BaseActivity._touche, BaseActivity._getData, TranscodingActivity,
      TranscodingActivity.__init__, TranscodingActivity.getInputRelPath,
      TranscodingActivity.setInputRelPath, TranscodingActivity.getCustomer,
      TranscodingActivity.getProfile, TranscodingActivity.setProfile,
      Activity):
    Added the simple activity data wrapper file.

2007-07-12  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/inifile.py (IniFile.saveToFile):
    Added a HEADER class variable that will be saved in the
    generated file as a comment

2007-07-12  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/properties.py (ChildList.checkItem):
    Corrected a bug in ChildList and ChildDict, changed the
    error message to be more descriptive.

2007-07-12  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/taskmanager.py
      (TaskManager.__cbAddComponent):
    Changed logging of a component addition without
    corresponding task from warning to debug.

2007-07-12  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/scheduler.py (Scheduler.__init__,
      Scheduler.initialize, Scheduler.onTranscodingFailed,
      Scheduler.onTranscodingDone, Scheduler.onTranscodingTerminated,
      Scheduler.__cbRestoreTasks, Scheduler.__ebInitializationFailed,
      Scheduler.__asyncStartTask, Scheduler.__startTranscodingTask,
      Scheduler.__clearQueue, Scheduler.__ebActivityStoreFailed,
      Scheduler.__ebActivityDeleteFailed):
    Now retrieve the transcoding activities during initialisation,
    and create transcoding tasks to be able to resume transcoding job.

2007-07-12  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/montask.py (MonitoringTask.setFileState):
    Corrected a bug where an errback argument was missing.

2007-07-12  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/customerstore.py
      (CustomerStore.getProfile):
    Added a getter to retrieve a profile by name with default value.

2007-07-12  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/basestore.py
      (BaseStore._doPrepareActivation):
    Removed artificial delay to test asynchronous initialization.

2007-07-12  Sebastien Merle  <sebastien@fluendo.com>

    * conf/transcoder-admin.ini:
    * flumotion/transcoder/admin/adminconfig.py (DataSourceConfig,
      AdminConfig, ClusterConfig):
    * flumotion/transcoder/admin/admin.py (TranscoderAdmin.__init__):
    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/context/admincontext.py
      (AdminContext.getDataSource):
    * flumotion/transcoder/admin/context/profilecontext.py
      (ProfileContext.getTranscoderLabel, ProfileContext.getActivityLabel):
    Changes needed by the datasource activities.

2007-07-12  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datastore/adminstore.py
      (AdminStore.getCustomer, AdminStore.__iter__,
      AdminStore.iterCustomers, AdminStore.getActivities,
      AdminStore.newActivity, AdminStore._storeActivity,
      AdminStore._resetActivity, AdminStore._deleteActivity,
      AdminStore.__ebRetrievalFailed, AdminStore.__cbWrapActivities):
    Very simple wrapper of the datasource activities.

2007-07-12  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datasource/dataprops.py (AdminData,
      ActivityData, TranscodingActivityData, ActivitiesData):
    * flumotion/transcoder/admin/datasource/filesource.py (DataWrapper,
      DataWrapper.__init__, DataWrapper.__getattr__,
      DataWrapper.__setattr__, DataWrapper._getData, MutableWrapper,
      MutableWrapper.__init__, MutableWrapper._reset,
      MutableWrapper._store, MutableWrapper._delete, MutableWrapper._clone,
      MutableWrapper.__getattr__, MutableWrapper.__setattr__,
      FileDataSource, FileDataSource.__init__, FileDataSource.initialize,
      FileDataSource.waitReady, FileDataSource.retrieveDefaults,
      FileDataSource.retrieveCustomers,
      FileDataSource.retrieveCustomerInfo, FileDataSource.retrieveProfiles,
      FileDataSource.retrieveTargets, FileDataSource.retrieveTargetConfig,
      FileDataSource.retrieveActivities, FileDataSource.newActivity,
      FileDataSource.store, FileDataSource.reset, FileDataSource.delete,
      FileDataSource.__loadAdminData, FileDataSource.__cbInitAdminData,
      FileDataSource.__loadActivityData,
      FileDataSource.__cbInitActivityData,
      FileDataSource.__ebInitializationFailed,
      FileDataSource.__storeActivities, FileDataSource.__cbActivitiesSaved,
      FileDataSource.__ebActivitiesSaveFailed):
    Implemented the activity retrieval and storing.
    Due to the current limitations, the activities already terminated
    (state 'done' or 'failed') are not saved to file. If they was already
    saved the activities are removed from the file.
    Removed artificial delay to test asynchronous initialization.

2007-07-12  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/enums.py:
    * flumotion/transcoder/admin/datasource/datasource.py (IDataSource,
      IDataSource.retrieveTargetConfig, IDataSource.retrieveActivities,
      IDataSource.newActivity, IDataSource.reset, IDataSource.delete):
    Updated the datrasource interface to add activiy creation and retrieval.

2007-07-12  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/context/transcontext.py
      (TranscodingContext.iterCustomerContexts,
      TranscodingContext.getUnboundProfileContext,
      TranscodingContext.getProfileContext):
    Added shortcut methods to retrieve a profile context directly.

2007-07-12  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/test/test_utils.py (TestUtils.testStripEscaped,
      TestUtils.check, TestUtils.testSplitEscaped, TestUtils.check,
      TestUtils.testSplitCommandFields, TestUtils.check,
      TestUtils.testJoinCommandFields, TestUtils.check,
      TestUtils.testJoinSplitCommandFields, TestUtils.check):
    * flumotion/transcoder/process.py (Process.__init__, Process.execute):
    * flumotion/transcoder/utils.py (splitEscaped, stripEscaped,
      splitCommandFields, escapeField, joinCommandFields, deepCopy):
    Better command line splitting and joining, more tests

2007-07-09  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/componentproxy.py
      (BaseComponentProxy.__init__):
    * flumotion/transcoder/admin/proxies/managerproxy.py
      (ManagerProxy.__init__, ManagerProxy.__workerStateRemoved,
      ManagerProxy.__flowStateRemoved):
    * flumotion/transcoder/admin/proxies/managerset.py
      (ManagerSet.__init__):
    Added waiters decription.

2007-07-09  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/groupproxy.py
      (ComponentGroupProxy.__componentStateRemoved):
    Properly update the child target when a state is removed.

2007-07-09  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py (TranscoderAdmin.__init__,
      TranscoderAdmin.__startup, TranscoderAdmin.__resume,
      TranscoderAdmin.__pause, TranscoderAdmin.__abort):
    Added a shudown handler to set the admin state to terminated.
    Only add callback when starting and resuming the admin,
    if one fail the next ones should not be executed.
    Still use addBoth for idle waiting because if one timeout,
    we still want to wait the others.

2007-07-09  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminelement.py (AdminElement.__init__,
      AdminElement._incIdlTarget, AdminElement._childElementActivated,
      AdminElement._childElementRemoved, AdminElement._removed):
    Added waiters description.
    Properly decrement the idle counter when a child element is removed.

2007-07-09  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admintask.py (AdminTask.__init__,
      AdminTask.getActiveComponent, AdminTask.pause, AdminTask.resume,
      AdminTask.suggestWorker, AdminTask.waitActive, AdminTask._onStarted,
      AdminTask._terminate, AdminTask.__setActiveComponent,
      AdminTask.__cbStartupSucceed, AdminTask.__waitPotentialComponent):
    Some renaming.
    Added description to waiters.
    Clean the worker reference when paused.
    Allow the terminated tasks to be paused and resume silently.

2007-07-09  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/monitoring.py (Monitoring._doStart,
      Monitoring._doResume, Monitoring._doPause,
      Monitoring.__cbStartResumeMonitoring, Monitoring.__cbAddBalancedTask,
      Monitoring.__ebStartupResumingFailure):
    Renamed some methods.
    Properly remove the tasks from the balancer when paused.

2007-07-09  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/montask.py
      (MonitoringTask._onComponentStartupCanceled,
      MonitoringTask._onStarted, MonitoringTask._doAcceptSuggestedWorker,
      MonitoringTask.__asyncMovePendingFiles,
      MonitoringTask.__cbFileMoved):
    Update the components mood after startup.
    The monitor wasn't passed as callback argument when moving files.

2007-07-09  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/transcoding.py (Transcoding._doStart,
      Transcoding._doResume, Transcoding._doPause,
      Transcoding.__cbStartResumeTranscoding,
      Transcoding.__cbAddBalancedTask,
      Transcoding.__ebStartupResumingFailure):
    Renamed some methods.
    Properly remove the tasks from the balancer when paused.

2007-07-09  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/scheduler.py (Scheduler.__init__,
      Scheduler.isStarted, Scheduler.pause, Scheduler.addProfile,
      Scheduler.onSlotsAvailable, Scheduler.__startup,
      Scheduler.__startupTasks, Scheduler.__cancelTasksStartup,
      Scheduler.__asyncStartTask, Scheduler.__popNextProfile,
      Scheduler.__clearQueue):
    Start the tasks one by one and asynchronously.

2007-07-09  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/taskmanager.py (TaskManager.__init__,
      TaskManager._tryStartup, TaskManager.__cbStartupSucceed,
      TaskManager.__cbPauseSucceed, TaskManager.__waitIdle,
      TaskManager.__cbWaitActive):
    Added description to the waiters.
    Properly call _doResume when resuming.
    Update components moods after startup.
    Use list comprehension to build deferred lists.

2007-07-09  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/transtask.py (TranscodingTask._onStarted):
    Update the components mood after startup and not during startup.

2007-07-09  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/transcoderproxy.py
      (TranscoderProxy.loadTo):
    Assert the atmosphere exists.

2007-07-09  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/transbalancer.py
      (TranscoderBalancer.getAvailableSlots):
    Do not return negative slot availability.

2007-07-09  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/waiters.py (BaseWaiters.__init__,
      BaseWaiters.__asyncWaitTimeout, PassiveWaiters,
      PassiveWaiters.__init__, AssignWaiters.__init__,
      CounterWaiters.__init__, CounterWaiters.isWaiting,
      ValueWaiters.__init__, ValueWaiters.__asyncWaitTimeout,
      ItemWaiters.__init__, ItemWaiters.__asyncWaitTimeout):
    Added a description to be able to easily track timeouts.

2007-07-06  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py (TranscoderAdmin.__startup,
      TranscoderAdmin.__resume, TranscoderAdmin.__pause,
      TranscoderAdmin.__cbAdminInitialized):
    * flumotion/transcoder/utils.py (bridgeResult, shiftResult,
      logFailures, deferredPrint):
    Added a bridgeResult that call a given method but
    keep and propagate the previous result.

2007-07-06  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/scheduler.py
      (SchedulerListener.onTranscodingStarted,
      SchedulerListener.onTranscodingFail,
      SchedulerListener.onTranscodingDone, Scheduler.pause,
      Scheduler.resume, Scheduler.addProfile, Scheduler.removeProfile,
      Scheduler.isProfileQueued, Scheduler.isProfileActive,
      Scheduler.waitIdle, Scheduler._doSyncListener):
    Standardized start/pause/resume methods.
    Added methods to know the state of a profile.

2007-07-06  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminelement.py
      (AdminElement.__cbParentActivated, AdminElement.__ebParentAborted):
    Can call waitActive anytime.

2007-07-06  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py (TranscoderAdmin.__init__,
      TranscoderAdmin.initialize, TranscoderAdmin.onDetached,
      TranscoderAdmin.onAttached, TranscoderAdmin.onProfileAdded,
      TranscoderAdmin.onProfileRemoved, TranscoderAdmin.onTargetAdded,
      TranscoderAdmin.onTargetRemoved,
      TranscoderAdmin.onMonitoredFileAdded,
      TranscoderAdmin.onMonitoredFileStateChanged,
      TranscoderAdmin.onMonitoredFileRemoved,
      TranscoderAdmin.__fileStateChanged, TranscoderAdmin.changeState,
      TranscoderAdmin.__startup, TranscoderAdmin.__resume,
      TranscoderAdmin.__pause, TranscoderAdmin.__cbAdminInitialized,
      TranscoderAdmin.__ebAdminInitializationFailed,
      TranscoderAdmin.__cbSartupSucceed, TranscoderAdmin.__ebSartupFailed,
      TranscoderAdmin.__cbResumingSucceed,
      TranscoderAdmin.__ebResumingFailed,
      TranscoderAdmin.__cbPausingSucceed,
      TranscoderAdmin.__ebPausingFailed):
    Standardized start/resume/pause handling.
    Synchronize the monitors files state.
    More logging.

2007-07-06  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/waiters.py (BaseWaiters._wait,
      PassiveWaiters.__init__, PassiveWaiters.reset,
      PassiveWaiters.fireCallbacks, PassiveWaiters.fireErrbacks,
      PassiveWaiters.wait, AssignWaiters.wait, AssignWaiters.setValue,
      CounterWaiters.wait):
    Changed PassiveWiaters to remember it's callback state.

2007-07-06  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor.py
      (FileMonitor.setFileState):
    Corrected a bug where changing the state of a removed file
    make it staying foreaver in the UI State.

2007-07-06  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/admintask.py (IAdminTask.isStarted,
      IAdminTask.start, IAdminTask.pause, IAdminTask.resume,
      IAdminTask.stop, IAdminTask.waitPotentialWorker, IAdminTask.waitIdle,
      IAdminTask.waitActive, AdminTask.__init__, AdminTask.isStarted,
      AdminTask.hasTerminated, AdminTask.getActiveComponent,
      AdminTask.removeComponent, AdminTask.start, AdminTask.pause,
      AdminTask.resume, AdminTask.stop, AdminTask.abort,
      AdminTask.waitIdle, AdminTask.waitPotentialWorker,
      AdminTask.waitActive, AdminTask._doChainWaitIdle,
      AdminTask._doChainWaitPotentialComponent, AdminTask._doStartup,
      AdminTask._terminate, AdminTask._isElectedComponent,
      AdminTask._hasElectedComponent, AdminTask._cancelComponentHold,
      AdminTask.__setActiveComponent, AdminTask.__startup,
      AdminTask.__stateChangedError, AdminTask.__cbStartupSucceed,
      AdminTask.__ebStartupFailed, AdminTask.__relieveComponent,
      AdminTask.__electComponent, AdminTask.__startComponent,
      AdminTask.__cbGotPotentialComponent, AdminTask.__asyncHoldTimeout):
    * flumotion/transcoder/admin/monitoring.py (Monitoring._doStart,
      Monitoring._doResume, Monitoring._onTaskAdded,
      Monitoring._onTaskRemoved, Monitoring.__cbMonitorSetGoesIdle,
      Monitoring.__cbRetrievePotentialWorker,
      Monitoring.__ebStartingFailure):
    * flumotion/transcoder/admin/montask.py
      (IMonitoringTaskListener.onMonitoredFileAdded,
      IMonitoringTaskListener.onMonitoredFileStateChanged,
      IMonitoringTaskListener.onMonitoredFileRemoved,
      MonitoringTaskListener.onMonitoredFileAdded,
      MonitoringTaskListener.onMonitoredFileStateChanged,
      MonitoringTask.onComponentMoodChanged,
      MonitoringTask.onMonitorFileRemoved,
      MonitoringTask.onMonitorFileAdded,
      MonitoringTask.onMonitorFileChanged,
      MonitoringTask._doSelectPotentialComponent):
    * flumotion/transcoder/admin/taskmanager.py (TaskManager.__init__,
      TaskManager.addTask, TaskManager.removeTask, TaskManager.isStarted,
      TaskManager.isPaused, TaskManager.start, TaskManager.pause,
      TaskManager.resume, TaskManager.abort, TaskManager.addComponent,
      TaskManager.removeComponent, TaskManager.waitIdle,
      TaskManager.waitActive, TaskManager._doChainWaitIdle,
      TaskManager._doChainWaitActive, TaskManager.onComponentMoodChanged,
      TaskManager._tryStartup, TaskManager.__pauseTaskManager,
      TaskManager.__cbStartup, TaskManager.__cbCallForAllTasks,
      TaskManager.__ebResolveCallFailure, TaskManager.__cbAddComponent,
      TaskManager.__ebGetPropertiesFailed,
      TaskManager.__ebComponentStopFailed,
      TaskManager.__ebComponentDeleteFailed,
      TaskManager.__stateChangedError, TaskManager.__cbStartupSucceed,
      TaskManager.__ebStartupFailed, TaskManager.__cbPauseSucceed,
      TaskManager.__ebPauseFailed, TaskManager.__waitIdle,
      TaskManager.__cbWaitActive, TaskManager.__cbAppartStopResults,
      TaskManager.__ebTaskStopFailed):
    * flumotion/transcoder/admin/transcoding.py (Transcoding._doStart,
      Transcoding._doResume, Transcoding._onTaskAdded,
      Transcoding._onTaskRemoved, Transcoding._doSyncListener,
      Transcoding.__cbTranscoderSetGoesIdle,
      Transcoding.__cbRetrievePotentialWorker):
    * flumotion/transcoder/admin/transtask.py
      (TranscodingTask.isAcknowledged, TranscodingTask.onComponentOrphaned,
      TranscodingTask.onComponentMoodChanged,
      TranscodingTask.onTranscoderStatusChanged,
      TranscodingTask.onTranscoderJobStateChanged):
    * flumotion/transcoder/enums.py:
    Cleaned and standardized the task managment classes.

2007-07-05  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminelement.py
      (AdminElement.__cbLogFailures):
    * flumotion/transcoder/admin/admintask.py
      (AdminTask.__cbMultiDeleteResults, AdminTask.__bbTaskTerminated,
      AdminTask.__bbSelectPotentialComponent,
      AdminTask.__ebPotentialComponentFailure,
      AdminTask.__ebComponentLoadFailed, AdminTask.__ebComponentNotHappy,
      AdminTask.__ebUIStateFailed, AdminTask.__ebComponentStopFailed,
      AdminTask.__ebComponentDeleteFailed, AdminTask.__ebNoValidWorker):
    * flumotion/transcoder/admin/monitoring.py
      (Monitoring.__cbMonitorSetGoesIdle, Monitoring.__ebStartingFailure,
      Monitoring.__ebAddComponentFailed,
      Monitoring.__ebRemoveComponentFailed):
    * flumotion/transcoder/admin/proxies/componentset.py
      (ComponentSetSkeleton.__ebAcceptFailure):
    * flumotion/transcoder/admin/taskmanager.py (TaskManager.getTask,
      TaskManager.__ebGetPropertiesFailed, TaskManager.__ebStopFailed,
      TaskManager.__ebDeleteFailed, TaskManager.__ebStartupFailed,
      TaskManager.__ebResumeFailed, TaskManager.__ebPauseFailed):
    * flumotion/transcoder/admin/transcoding.py
      (Transcoding.__cbTranscoderSetGoesIdle,
      Transcoding.__ebStartingFailure, Transcoding.__ebAddComponentFailed,
      Transcoding.__ebRemoveComponentFailed):
    Changed traceback logging to include a description of the tb origine.

2007-07-05  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py (TranscoderAdmin,
      TranscoderAdmin.__init__, TranscoderAdmin.initialize,
      TranscoderAdmin.onAttached, TranscoderAdmin.onTargetRemoved,
      TranscoderAdmin.onMonitoringTaskAdded,
      TranscoderAdmin.onMonitoringTaskRemoved,
      TranscoderAdmin.onMonitoringActivated,
      TranscoderAdmin.onMonitoredFileAdded,
      TranscoderAdmin.onMonitoredFileRemoved,
      TranscoderAdmin.onProfileQueued,
      TranscoderAdmin.onTranscodingStarted,
      TranscoderAdmin.onTranscodingFail, TranscoderAdmin.onTranscodingDone,
      TranscoderAdmin.__moveFailedInputFiles,
      TranscoderAdmin.__setInputFileState,
      TranscoderAdmin.__ebSartupFailed):
    Listen monitoring task events and add the profiles to the scheduler.
    Listen scheduler events and update monitor files state.

2007-07-05  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/montask.py (MonitoringTask.__init__,
      MonitoringTask.setFileState, MonitoringTask.moveFiles,
      MonitoringTask.onMonitorFileAdded,
      MonitoringTask._onComponentElected, MonitoringTask.__file2profile,
      MonitoringTask.__asyncMovePendingFiles,
      MonitoringTask.__ebSetFileStateFailed, MonitoringTask.__cbFileMoved,
      MonitoringTask.__ebMoveFilesFailed):
    Add the methods setFileState and moveFiles.
    Keep a buffer of the files to be moved, and wait for a
    valid monitor to be connected to ask it to move the files.

2007-07-05  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/transtask.py
      (TranscodingTask.isAcknowledged,
      TranscodingTask.__ebAcknowledgeFailed):
    Added the method isAcknowledged.

2007-07-05  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/proxies/monitorproxy.py
      (MonitorProxy.setFileState, MonitorProxy.moveFiles,
      MonitorProxy._doBroadcastUIState, MonitorProxy._onMonitorSetFile):
    Properly sync UI state listeners.
    Added moveFiles and setFileState methods.

2007-07-05  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/scheduler.py (ISchedulerListener,
      ISchedulerListener.onProfileQueued,
      ISchedulerListener.onTranscodingStarted,
      ISchedulerListener.onTranscodingFail,
      ISchedulerListener.onTranscodingDone, SchedulerListener,
      SchedulerListener.onProfileQueued,
      SchedulerListener.onTranscodingStarted,
      SchedulerListener.onTranscodingFail,
      SchedulerListener.onTranscodingDone, Scheduler, Scheduler.__init__,
      Scheduler.initialize, Scheduler.addProfile, Scheduler.removeProfile,
      Scheduler.onTranscodingFailed, Scheduler.onTranscodingDone,
      Scheduler.onTranscodingTerminated, Scheduler._doSyncListener,
      Scheduler.__startupTasks):
    Now the sheduler do not depend on monitoring.
    Added scheduling state events.

2007-07-05  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/enums.py:
    Added the monitor file states failed and done.

2007-07-05  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/job.py (TranscoderJob._setJobState):
    Now wait the current call chain to finish before changing the job state.

2007-07-05  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filetranscoder.py
      (FileTranscoder.transcoder_checks, FileTranscoder.transcoder_setup,
      FileTranscoder.transcoder_start, FileTranscoder.do_stop,
      FileTranscoder.component_stop, FileTranscoder.__transcodingError,
      FileTranscoder.__unexpectedError):
      Added global exception catching and logging during check/setup/startup.

2007-07-05  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor.py
      (FileMonitorMedium.remote_moveFiles, FileMonitor.moveFiles,
      FileMonitor.monitor_checks, FileMonitor.monitor_setup,
      FileMonitor.monitor_startup):
    Changed the remote method move File to moveFiles, now it can move
    more than one file at the same time.
    Added global exception catching and logging during check/setup/startup.

2007-07-04  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor.py
      (FileMonitorMedium.remote_setFileState,
      FileMonitorMedium.remote_moveFile, FileMonitor, FileMonitor.moveFile,
      FileMonitor.monitor_startup, FileMonitor.setFileState):
    Added a remote method that allow moving files, but only
    if thery are from a monitored directory.

2007-07-04  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filetranscoder.py:
    * flumotion/component/transcoder/job.py:
    Import cleanup.

2007-07-04  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor.py
      (FileMonitorMedium.remote_setFileState):
    Removed test remote method.

2007-07-04  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor.py
      (FileMonitorMedium.remote_setFileState,
      FileMonitorMedium.remote_test, FileMonitor.init,
      FileMonitor.do_check, FileMonitor.monitor_checks,
      FileMonitor.do_setup, FileMonitor.monitor_setup,
      FileMonitor.monitor_startup, FileMonitor.setFileState,
      FileMonitor._file_added, FileMonitor._file_completed,
      FileMonitor._file_removed, FileMonitor.__unexpectedError):
    * flumotion/component/transcoder/filemonitor.xml:
    * flumotion/component/transcoder/filemonitor_admin_gtk.py
      (FileMonitorAdminGtkNode._addDirectory):
    * flumotion/component/transcoder/filetranscoder.py
      (FileTranscoder.__unexpectedError):
    * flumotion/transcoder/admin/monprops.py
      (MonitorProperties.createFromComponentDict,
      MonitorProperties.asComponentProperties):
    * flumotion/transcoder/admin/proxies/monitorproxy.py
      (MonitorProxy._doBroadcastUIState, MonitorProxy._onUIStateSetitem,
      MonitorProxy._onUIStateDelitem, MonitorProxy._onMonitorSetFile,
      MonitorProxy._onMonitorDelFile):
    Made the file FileMonitor component use VirtualPath and Local.

2007-07-04  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/virtualpath.py (VirtualPath.jellyFor,
      VirtualPath.unjellyFor):
    Made the jellyer/unjellyer actually work.

2007-07-03  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/virtualpath.py (VirtualPath):
    It's better if VirtualPath inherite from Jellyable and Unjellyable.

2007-07-03  Sebastien Merle  <sebastien@fluendo.com>

    * conf/planet.xml:
    * configure.ac:
    * flumotion/transcoder/manager/Makefile.am:
    * flumotion/transcoder/manager/__init__.py:
    * flumotion/transcoder/manager/plugs.py (TranscoderEnvironment):
    * flumotion/transcoder/manager/plugs.xml:
    Created a manager plug to setup the transcoder-specific environment.
    It allow the import of transcoder modules that setup jellyer,
    this way the manager can properly forward transcoder-specific types.

2007-07-03  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filetranscoder.py
      (FileTranscoderMedium.remote_getReportPath,
      FileTranscoder._fireTranscodingReport):
    Made the file transcoder component directly return
    VirtualPath without converting it to string.

2007-07-03  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/virtualpath.py (VirtualPath.append,
      VirtualPath.getStateFor, VirtualPath.setStateFor):
    Made the VirtualPath class jellyable and unjellyable.

2007-07-03  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/transtask.py
      (TranscodingTask.onComponentOrphaned):
    Properly abort a task if it's already sad when going orphaned.

2007-07-03  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/scheduler.py (Scheduler,
      Scheduler.__init__, Scheduler.onMonitoredFileAdded,
      Scheduler.onMonitoredFileRemoved, Scheduler.onSlotsAvailable,
      Scheduler.onTranscodingTerminated, Scheduler.__startup,
      Scheduler.__startupTasksIfPossible, Scheduler.__startupTasks,
      Scheduler.__isProfileQueued, Scheduler.__getProfilePriority,
      Scheduler.__getKeyPriority, Scheduler.__queueProfile,
      Scheduler.__unqueuProfile, Scheduler.__popNextProfile):
    Implemented a basic priority scheduling, the same way
    the old transcoder was doing it.
    task_priority = customer_priority * 1000 + profile_priority

2007-07-03  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/datasource/dataprops.py (CustomerData,
      AdminData):
    * flumotion/transcoder/admin/datasource/datasource.py
      (IDataSource.retrieveDefaults, IDataSource.retrieveCustomers):
    * flumotion/transcoder/admin/datastore/adminstore.py (AdminStore):
    * flumotion/transcoder/admin/datastore/customerstore.py
      (CustomerStore):
    * flumotion/transcoder/admin/datastore/profilestore.py (ProfileStore):
    * flumotion/transcoder/admin/datastore/targetstore.py (TargetStore):
    Added a customer priority property with default value of 100.
    Set the default value of transcoding priority to 100 too.

2007-07-03  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datasource/Makefile.am:
    * flumotion/transcoder/admin/datasource/dummysource.py:
    Deleted old and deprectated dummy data source.

2007-07-03  Sebastien Merle  <sebastien@fluendo.com>

    * conf/transcoder-admin.ini:
    * conf/transcoder-data.ini:
    Setup 2 jobs for the workers on streamer1 and stremaer2.
    Force audio-rate in all profiles.

2007-07-02  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py (TranscoderAdmin,
      TranscoderAdmin.__init__, TranscoderAdmin.initialize,
      TranscoderAdmin.onDetached, TranscoderAdmin.onAttached,
      TranscoderAdmin.onCustomerAdded, TranscoderAdmin.onCustomerRemoved,
      TranscoderAdmin.__startup, TranscoderAdmin.__cbAdminInitialized):
    * flumotion/transcoder/admin/adminconsts.py:
    Use the new scheduler class.
    Added a delay when resuming to let time to the workers
    to log back	in the manager.

2007-07-02  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/Makefile.am:
    * flumotion/transcoder/admin/scheduler.py (ISchedulerListener,
      SchedulerListener, Scheduler, Scheduler.__init__,
      Scheduler.initialize, Scheduler.waitIdle, Scheduler.start,
      Scheduler.pause, Scheduler.resume, Scheduler.onMonitoringTaskAdded,
      Scheduler.onMonitoringTaskRemoved, Scheduler.onMonitoredFileAdded,
      Scheduler.onMonitoredFileRemoved, Scheduler.onTranscodingTaskAdded,
      Scheduler.onTranscodingTaskRemoved, Scheduler.onSlotsAvailable,
      Scheduler.onTranscoderSelected, Scheduler.onTranscoderReleased,
      Scheduler.onTranscodingFailed, Scheduler.onTranscodingDone,
      Scheduler.onTranscodingTerminated, Scheduler.__startup,
      Scheduler.__addTaskIfSlotsAvailable, Scheduler.__addTasks):
    Added an empty scheduler implemenetation that only queue
    the pending transcoding tasks and start them in order.

2007-07-02  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/transcoding.py
      (ITranscodingListener.onTranscodingTaskRemoved,
      ITranscodingListener.onSlotsAvailable,
      TranscodingListener.onSlotsAvailable, Transcoding,
      Transcoding.__init__, Transcoding.getAvailableSlots,
      Transcoding.initialize, Transcoding._onTaskAdded,
      Transcoding._onTaskRemoved, Transcoding.onTranscoderRemovedFromSet,
      Transcoding.onSlotsAvailable, Transcoding._doSyncListener):
    Add listeners and synchronize them when initializing.
    Corrected some typo, forward task balancer events and publish
    a method to retrieve the number of available transcoding slots.

2007-07-02  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/monitoring.py (Monitoring.__init__,
      Monitoring.initialize, Monitoring._doSyncListener):
    Add listeners and synchronize them when initializing.

2007-07-02  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/transtask.py
      (TranscodingTask.isAcknowledging):
    Added a method to know if a transcoding task is already acknowledging.

2007-07-02  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/taskmanager.py (TaskManager.getTask):
    Added a task getter by identifier.

2007-07-02  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admintask.py
      (AdminTask._waitDeleteComponent):
    * flumotion/transcoder/admin/datasource/filesource.py
      (FileDataSource.initialize):
    * flumotion/transcoder/admin/transbalancer.py
      (ITranscoderBalancerListener,
      ITranscoderBalancerListener.onSlotsAvailable,
      TranscoderBalancerListener,
      TranscoderBalancerListener.onSlotsAvailable, TranscoderBalancer,
      TranscoderBalancer.__init__, TranscoderBalancer.getAvailableSlots,
      TranscoderBalancer.removeTask, TranscoderBalancer.balance):
    More logging, typo cleanup.

2007-07-02  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filemonitor.py (FileMonitor.init,
      FileMonitor.do_setup, FileMonitor.monitor_setup,
      FileMonitor.do_start, FileMonitor.monitor_startup,
      FileMonitor._file_removed, FileMonitor.__ebErrorFilter,
      FileMonitor.__monitorError, FileMonitor.__unexpectedError):
    Refactorized for better setup/startup error handling.

2007-06-29  Sebastien Merle  <sebastien@fluendo.com>

    * conf/transcoder-data.ini:
    Force audio-rate. Some low samplerate input file
    make the high quality target fail because vorbisenc
    do not accept low samplerate with high bitrate.

2007-06-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/datasource/dataprops.py (AudioData):
    Changed wrong property type for audio-rate and audio-channels.

2007-06-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filetranscoder.py
      (FileTranscoder.__ebErrorFilter, FileTranscoder.__transcodingError,
      FileTranscoder.__unexpectedError):
    Properly return failure when handling check and setup to prevent the
    transcoder to be started.

2007-06-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/transtask.py (TranscodingTask.__init__,
      TranscodingTask.onComponentOrphaned,
      TranscodingTask.onComponentMoodChanged,
      TranscodingTask.onTranscoderStatusChanged,
      TranscodingTask.onTranscoderJobStateChanged,
      TranscodingTask._onComponentRelieved, TranscodingTask._doAborted,
      TranscodingTask.__transcodingFailed,
      TranscodingTask.__transcodingSucceed,
      TranscodingTask.__cbJobTerminated,
      TranscodingTask.__ebAcknowledgeFailed,
      TranscodingTask.__asyncSadTimeout):
    Forgot to fail after retries exhaustion.
    Added a timeout for sad component, if the active component is sad
    for too much time without acknowledging and is not dead, a timeout
    is triggered to prevent zombie components.
    Now handle transcoder status error and unexpected_error.
    The error status make the transcoding fail, and the unexpected_error
    status make it abort and retry.
    If a transcoder goes sad and is not running anymore (killed or sigv),
    the task abort and retry.

2007-06-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/log.py (getExceptionTraceback,
      getFailureTraceback):
    Integrated traceback cleaning int getXXXTraceback.

2007-06-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/inifile.py (IniFile.loadFromFile,
      IniFile.saveToFile):
    * flumotion/transcoder/properties.py (RootPropertyBag):
    * flumotion/transcoder/transconfig.py (TranscodingConfig):
    * flumotion/transcoder/transreport.py (LocalReport.loadFromLocal,
      LocalReport.getLocal, TranscodingReport):
    Added version specification. It's only saved in the files,
    there is no multi-version or version resolution managment yet.
    But can still be very usfull later fore reading old version
    of the property files.

2007-06-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminconsts.py:
    Constant tweaking

2007-06-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/job.py (TranscoderJob.moveSource):
    Corrected copy/past bug.

2007-06-29  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filetranscoder.py
      (FileTranscoder.init, FileTranscoder.check_properties,
      FileTranscoder.do_check, FileTranscoder.transcoder_checks,
      FileTranscoder.do_setup, FileTranscoder.transcoder_setup,
      FileTranscoder.do_start, FileTranscoder.transcoder_start,
      FileTranscoder.do_stop, FileTranscoder.component_stop,
      FileTranscoder._getReportPath, FileTranscoder._logCurrentException,
      FileTranscoder.__ebErrorFilter, FileTranscoder.__ebStopErrorFilter,
      FileTranscoder.__transcodingError, FileTranscoder.__unexpectedError,
      FileTranscoder.__cbJobDone, FileTranscoder.__ebJobFailed,
      FileTranscoder.__cbJobTerminated,
      FileTranscoder.__ebAcknowledgeError, FileTranscoder.__writeReport,
      FileTranscoder.__finalizeDiagnoseMode,
      FileTranscoder.__ebDiagnoseAcknowledgeFail,
      FileTranscoder.__finalizeStandardMode, FileTranscoder.__terminate,
      FileTranscoder.__terminateDiagnoseMode,
      FileTranscoder.__terminateStandardMode):
    * flumotion/component/transcoder/filetranscoder.xml:
    * flumotion/transcoder/enums.py:
    * flumotion/transcoder/errors.py (TranscoderConfigError,
      TranscoderConfigError.__init__):
    * flumotion/transcoder/local.py (Local.updateFromComponentProperties):
    Refactorized for better check/setup/startup error handling.
    Added two transcoding status, error and unexpected_error; error for
    known error that the admin should considere as transcoding failure,
    and unexpected_error for... unexpected errors where the admin could
    choose to retry the transcoding task. The aborted status is removed
    in favor of unexpected_error.
    The file-transcoder component properties changed, 'report' is now used
    to force the output report file, and to specify a report to load from
    for diagnose purpose the propert 'diagnose' should be used.
    When diganosing, the local is first loaded from the report, and then
    updated with the component properties.
    In diagnose mode now print the outcome message and stop the reactor
    after acknowledgment.

2007-06-28  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/transtask.py
      (TranscodingTask.onComponentMoodChanged):
    Added the lost component holding call,
    and corrected a refactoring bug.

2007-06-28  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/job.py
      (TranscoderJob.__cbDoAcknowledge, TranscoderJob.__cbMoveOutputFiles,
      TranscoderJob.__bbMoveInputFile, TranscoderJob.moveSource):
    Do not propagate the transcoder failure to the acknowledge chain,
    only the transcoding outcome.  Otherwise failed transcoding cannot
    be acknowledged successfully.

2007-06-28  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/transtask.py (TranscodingTask,
      TranscodingTask.__init__, TranscodingTask.getProfileContext,
      TranscodingTask.onComponentMoodChanged,
      TranscodingTask.onTranscoderJobStateChanged,
      TranscodingTask._onComponentAdded,
      TranscodingTask._onComponentRemoved,
      TranscodingTask._onComponentHold,
      TranscodingTask._onComponentHoldCanceled,
      TranscodingTask._onComponentLost,
      TranscodingTask._onComponentElected,
      TranscodingTask._onComponentRelieved,
      TranscodingTask._onComponentStartingUp,
      TranscodingTask._onComponentStartupCanceled,
      TranscodingTask._doChainWaitSynchronized,
      TranscodingTask._doChainWaitPotentialComponent,
      TranscodingTask._doStartup, TranscodingTask._doAcceptSuggestedWorker,
      TranscodingTask._doChainTerminate, TranscodingTask._doTerminated,
      TranscodingTask._doAborted,
      TranscodingTask._doSelectPotentialComponent,
      TranscodingTask._doLoadComponent, TranscodingTask.__cbJobTerminated,
      TranscodingTask.__ebAcknowledgeFailed,
      TranscodingTask.__cbCheckForAbortedTranscoder,
      TranscodingTask.__ebFailToRetrieveStatus):
    Refactored to use the base class AdminTask.
    This automatically add retries limitation and lost component
    holding to the transcoding tasks.

2007-06-28  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/montask.py (MonitoringTask,
      MonitoringTask.onMonitorFileRemoved,
      MonitoringTask.onMonitorFileChanged,
      MonitoringTask._onComponentAdded, MonitoringTask._onComponentRemoved,
      MonitoringTask._onComponentElected,
      MonitoringTask._onComponentRelieved,
      MonitoringTask._onComponentStartupCanceled,
      MonitoringTask._doAcceptSuggestedWorker, MonitoringTask._doStartup,
      MonitoringTask._doAborted,
      MonitoringTask._doSelectPotentialComponent,
      MonitoringTask._doLoadComponent):
    Cleanup, use MAX_RETRIES, and refactoring bug correction.

2007-06-28  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/admintask.py (AdminTask, AdminTask._abort,
      AdminTask.__cancelComponentStartup,
      AdminTask.__abortComponentStartup, AdminTask.__ebComponentLoadFailed,
      AdminTask.__ebComponentNotHappy, AdminTask.__ebUIStateFailed,
      AdminTask.__incRetryCounter, AdminTask.__canRetry):
    Changed MAX_ATTEMPT to MAX_RETRIES.
    Do not count as retry the cancelations of components startup.

2007-06-28  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py (TranscoderAdmin.__init__,
      TranscoderAdmin.onMonitoredFileAdded,
      TranscoderAdmin.onTranscodingTerminated):
    Prevent duplication of files pending transcodification in testing code.

2007-06-28  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filetranscoder.py
      (FileTranscoderMedium.remote_acknowledge,
      FileTranscoder.__cbJobTerminated,
      FileTranscoder.__ebAcknowledgeError):
    Properly return failures when acknowledge fail,
    and made the acknowledge remote method return
    the transcoding status.

2007-06-28  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/job.py
      (TranscoderJob.__bbMoveInputFile, TranscoderJob.moveSource):
    Forward to the event listener the errors when moving input file.

2007-06-27  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admintask.py (IAdminTask.getWorker,
      IAdminTask.waitValidWorker, IAdminTask.waitSynchronized, AdminTask,
      AdminTask.__init__, AdminTask.getLabel, AdminTask.getProperties,
      AdminTask.isActive, AdminTask.hasTerminated,
      AdminTask.getActiveComponent, AdminTask.getWorker,
      AdminTask.getComponents, AdminTask.iterComponents,
      AdminTask.addComponent, AdminTask.removeComponent, AdminTask.start,
      AdminTask.pause, AdminTask.resume, AdminTask.stop, AdminTask.abort,
      AdminTask.suggestWorker, AdminTask.waitSynchronized,
      AdminTask.waitValidWorker, AdminTask._onComponentAdded,
      AdminTask._onComponentRemoved, AdminTask._onComponentHold,
      AdminTask._onComponentHoldCanceled, AdminTask._onComponentLost,
      AdminTask._onComponentElected, AdminTask._onComponentRelieved,
      AdminTask._onComponentStartingUp,
      AdminTask._onComponentStartupCanceled,
      AdminTask._doChainWaitSynchronized,
      AdminTask._doChainWaitPotentialComponent, AdminTask._doStartup,
      AdminTask._doAcceptSuggestedWorker, AdminTask._doChainTerminate,
      AdminTask._doTerminated, AdminTask._doAborted,
      AdminTask._doSelectPotentialComponent, AdminTask._doLoadComponent,
      AdminTask._terminate, AdminTask._abort,
      AdminTask._isPendingComponent, AdminTask._isElectedComponent,
      AdminTask._hasElectedComponent, AdminTask._resetRetryCounter,
      AdminTask._holdLostComponent, AdminTask._cancelComponentHold,
      AdminTask._isHoldingLostComponent, AdminTask._waitStopComponent,
      AdminTask._stopComponent, AdminTask._waitDeleteComponent,
      AdminTask._deleteComponent, AdminTask.__startup,
      AdminTask.__cbMultiDeleteResults, AdminTask.__bbTaskTerminated,
      AdminTask.__relieveComponent, AdminTask.__electComponent,
      AdminTask.__waitPotentialComponent,
      AdminTask.__cbMultiUIStateResults,
      AdminTask.__bbSelectPotentialComponent,
      AdminTask.__cancelComponentStartup, AdminTask.__componentStarted,
      AdminTask.__componentLoaded, AdminTask.__delayedStartComponent,
      AdminTask.__startComponent, AdminTask.__ebPotentialComponentFailure,
      AdminTask.__cbGotPotentialComponent, AdminTask.__loadNewComponent,
      AdminTask.__shouldContinueComponentStartup,
      AdminTask.__cbComponentLoadSucceed,
      AdminTask.__ebComponentLoadFailed, AdminTask.__cbComponentGoesHappy,
      AdminTask.__ebComponentNotHappy, AdminTask.__cbGotUIState,
      AdminTask.__ebUIStateFailed, AdminTask.__ebComponentStopFailed,
      AdminTask.__ebComponentDeleteFailed, AdminTask.__cbGetValidWorker,
      AdminTask.__ebNoValidWorker, AdminTask.__asyncHoldTimeout,
      AdminTask.__getRetryCount, AdminTask.__incRetryCounter,
      AdminTask.__canRetry, AdminTask.__getRetryDelay):
    * flumotion/transcoder/admin/montask.py (MonitoringTask,
      MonitoringTask.__init__, MonitoringTask._onComponentAdded,
      MonitoringTask._onComponentRemoved,
      MonitoringTask._onComponentElected,
      MonitoringTask._onComponentRelieved,
      MonitoringTask._onComponentStartupCanceled,
      MonitoringTask._doStartup, MonitoringTask._doAborted,
      MonitoringTask._doSelectPotentialComponent,
      MonitoringTask._doLoadComponent,
      MonitoringTask.onComponentMoodChanged):
    Cleanup and refactorization. Grouped all common code in the
    base class AdminTask, to be able to share it between
    MonitoringTask and TranscodingTask.

2007-06-27  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminelement.py
      (AdminElement.__cbWaitChildIdle, AdminElement.__cbLogFailures):
    Changed to not abort with the first error, and log all failures.

2007-06-27  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/monitoring.py
      (Monitoring.__cbRetrieveActiveWorker):
    * flumotion/transcoder/admin/transcoding.py
      (Transcoding.__cbRetrieveActiveWorker):
    Constants cleanup.

2007-06-26  Sebastien Merle  <sebastien@fluendo.com>

    * conf/transcoder-data.ini:
    Force the maximum number of thumbnail to creates,
    because of some media files having wrong duration.

2007-06-26  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/componentset.py
      (ComponentSetSkeleton.__cbPostAcceptAddition,
      ComponentSetSkeleton.__removeComponent,
      BaseComponentSet._doAddComponent,
      BaseComponentSet._doRejectComponent):
    Properly remove rejected components.

2007-06-26  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/transcoderproxy.py
      (TranscoderProxy.waitStatus):
    Change the waitStatus to use the remote method inplace of
    the UI State. This way it works even with early error cases.

2007-06-26  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/montask.py
      (IMonitoringTaskListener.onFailToRunOnWorker,
      MonitoringTaskListener.onFailToRunOnWorker, MonitoringTask.__init__,
      MonitoringTask.suggestWorker, MonitoringTask.onComponentMoodChanged,
      MonitoringTask.__relieveMonitor,
      MonitoringTask.__delayedStartMonitor,
      MonitoringTask.__cbMonitorGoesHappy,
      MonitoringTask.__ebMonitorDeleteFailed,
      MonitoringTask.__getRetryCount, MonitoringTask.__resetRetryCounter,
      MonitoringTask.__incRetryCounter,
      MonitoringTask.__isRetriesExhausted, MonitoringTask.__getRetryDelay,
      MonitoringTask.__holdLostMonitor, MonitoringTask.__releaseHold,
      MonitoringTask.__isHoldingMonitor,
      MonitoringTask.__asyncCheckIfStillLost):
    Added a retry limit with exponencial delay between retries.
    When a component goes lost the admin can wait for a fixed
    time to resolve transient network failure.

2007-06-26  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/componentproxy.py
      (BaseComponentProxy.__cbGotActiveWorker,
      BaseComponentProxy.__ebGetActiveWorkerFail,
      BaseComponentProxy.__componentActiveWorkerChanged,
      BaseComponentProxy.__discardUIState,
      BaseComponentProxy.__cbUIStateRetrievalDone):
    * flumotion/transcoder/admin/proxies/managerproxy.py
      (ManagerProxy.__init__, ManagerProxy.getWorkers,
      ManagerProxy.getContext, ManagerProxy.getWorkerByName,
      ManagerProxy.waitWorkerByName):
    * flumotion/transcoder/admin/waiters.py
      (ValueWaiters.__asyncWaitTimeout, ItemWaiters, ItemWaiters.__init__,
      ItemWaiters.isWaiting, ItemWaiters.wait, ItemWaiters.setValue,
      ItemWaiters.getValue, ItemWaiters.setItem, ItemWaiters.delItem,
      ItemWaiters.getItem, ItemWaiters.getItems,
      ItemWaiters.__asyncWaitTimeout, ItemWaiters.__fireCallbacks):
    Added a waiter that wait for item to be added to a dict.
    Use this waiter to wait for worker instance when a component worker
    state property is set to know when firing events.

2007-06-26  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filetranscoder.py
      (FileTranscoderMedium.remote_getStatus, FileTranscoder.getStatus,
      FileTranscoder.init, FileTranscoder._fireStatusChanged,
      FileTranscoder.__abortTranscoding, FileTranscoder.__writeReport):
    * flumotion/transcoder/enums.py:
    Added the "aborted" status value used when something not related
    to the transcoding task make the job fail.
    Added a remote method to retrieve the status to be able
    to retrieve it even when the UI State is not disponible.

2007-06-26  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/transcoder.py
      (MultiTranscoder._updateProgress):
    Handle media without known duration, and ensure that the progress
    send to the callback is in [0,100]

2007-06-26  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/targets.py (_sourceDiscovered,
      _setupThumbnailByFrames, _setupThumbnailByKeyFrames,
      _setupThumbnailByPercent, _percent_get_next,
      _thumbnail_prob_by_percent, _setupThumbnailBySeconds,
      _seconds_get_next, _thumbnail_prob_by_seconds):
    Properly do the thumbnailing calcules relative to the first timestamp.
    If no duration is available fallback to second-based thumbnailing.

2007-06-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filetranscoder.glade:
    * flumotion/component/transcoder/filetranscoder_admin_gtk.py
      (FileTranscoderAdminGtkNode._jobProgressEvent):
    * flumotion/component/transcoder/job.py
      (TranscoderJob._transcoderProgressCallback):
    * flumotion/component/transcoder/transcoder.py (MultiTranscoder.start,
      MultiTranscoder._discovered_callback, MultiTranscoder._startProgress,
      MultiTranscoder._updateProgress):
    Do not abort if the pipeline duration cannot be retrieved.

2007-06-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filetranscoder.py
      (FileTranscoder.do_setup):
    Corrected the job setup from a report.

2007-06-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/compconsts.py:
    * flumotion/component/transcoder/gstutils.py (Discoverer.__init__):
    Moved the max-interleave constants to compconsts.

2007-06-25  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/binmaker.py (_logPreferredSize,
      makeVideoEncodeBin):
      Use transcoder.log insteed of gst logging.

2007-06-22  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/transtask.py
      (TranscodingTask.onTranscoderJobStateChanged):
     Corrected logging bug.

2007-06-22  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py (TranscoderAdmin.__startup):
    Removed debug logging.

2007-06-22  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/job.py
      (TranscoderJob.__bbJobTerminated):
    Properly propagate failures.

2007-06-22  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filetranscoder.py
      (FileTranscoder.do_setup, FileTranscoder.do_start,
      FileTranscoder.do_stop, FileTranscoder.__abortTranscoding,
      FileTranscoder.__cbJobDone, FileTranscoder.__ebJobFailed,
      FileTranscoder.__cbJobTerminated,
      FileTranscoder.__ebAcknowledgeError, FileTranscoder.__writeReport):
    Properly abort and change the status when an exception is catched.

2007-06-22  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/montask.py
      (MonitoringTask.__ebMonitorDeleteFailed):
    Corrected some logging bug.

2007-06-22  Sebastien Merle  <sebastien@fluendo.com>

    * conf/transcoder-admin.ini:
    Changed the configuration to use teh dev cluster.

2007-06-22  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filetranscoder.py:
    * flumotion/transcoder/enums.py:
    Some cleanup.

2007-06-22  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/base.xml:
    * flumotion/component/transcoder/filemonitor.xml:
    * flumotion/component/transcoder/filetranscoder.xml:
    Corrected the components registry files.

2007-06-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/watcher.py
      (PeriodicalWatcher._checkForChanges):
    Corrected a bug that keep the watcher emiting file-completed.

2007-06-20  Sebastien Merle  <sebastien@fluendo.com>

    * conf/transcoder-data.ini:
    Corrected typo.

2007-06-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/pipelinecrawler.py
      (PipelineCrawler._padElement):
    Better handling of gstreamer changes.

2007-06-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/transtask.py
      (TranscodingTask.waitActiveWorker, TranscodingTask.waitSynchronized,
      TranscodingTask.__electTranscoder, TranscodingTask.ebGetStatusError,
      TranscodingTask.__cbSelectPotentialTranscoder,
      TranscodingTask.__cbGotPotentialTranscoder):
    Directly wait for UI state insteed of transcoder status.

2007-06-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py (TranscoderAdmin.deb,
      TranscoderAdmin.__ebAdminInitializationFailed,
      TranscoderAdmin.__ebSartupFailed):
    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/admintask.py (IAdminTask.waitActiveWorker,
      IAdminTask.waitSynchronized):
    * flumotion/transcoder/admin/montask.py
      (MonitoringTask.waitSynchronized, MonitoringTask.__electMonitor):
    * flumotion/transcoder/admin/taskmanager.py (TaskManager.__init__,
      TaskManager.start, TaskManager.pause, TaskManager.resume,
      TaskManager.addComponent, TaskManager.removeComponent,
      TaskManager.waitSynchronized, TaskManager.__cbStartup,
      TaskManager.__ebPauseFailed, TaskManager.__cbWaitSynchronized):
    Added a waitSynchronized that is called for each task and waited for
    before firing the deferred returned by the taskmanager's start method.
    It's used for ensuring the monitro retrived there UI state and
    synchronized there UI events for the admin to create the transcoding
    tasks. This way when the transcoding task manager start,
    it have all the information to properly resume tasks.

2007-06-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/componentproxy.py
      (BaseComponentProxy.__init__, BaseComponentProxy.waitUIState,
      BaseComponentProxy.__retrieveUIState,
      BaseComponentProxy.__ebUIStateRetrievalFailed):
    Corrected a bug that made the ui state to be retrieved
    more than one time, and then fail when trying to register
    the listeners.

2007-06-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/compconsts.py:
    * flumotion/component/transcoder/filemonitor.py (FileMonitor.do_start):
    * flumotion/component/transcoder/transcoder.py
      (MultiTranscoder._discovered_callback):
    * flumotion/component/transcoder/watcher.py (Watcher, Watcher.__init__,
      PeriodicalWatcher.__init__, PeriodicalWatcher.start,
      PeriodicalWatcher._checkForChanges, DirectoryWatcher.__init__,
      DirectoryWatcher.step, FilesWatcher, FilesWatcher.__init__):
      Corrected a major bug of the watchers. They virtualy don't work before.
      Changed the watchers to use LoggerProxy.

2007-06-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/job.py:
      Removed debug lines that was commited.

2007-06-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/job.py (TranscoderJob.readyForAck,
      TranscoderJob.__cbDoAcknowledge, TranscoderJob.__bbMoveInputFile):
      Corrected a bug where the failures were not propagated
      to the acknowledge deferred chain.

2007-06-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/transtask.py
      (TranscodingTask.hasTerminated,
      TranscodingTask.onTranscoderJobStateChanged,
      TranscodingTask.__terminateTask, TranscodingTask.__cbTaskTerminated,
      TranscodingTask.__waitStopTranscoder,
      TranscodingTask.__stopTranscoder,
      TranscodingTask.__waitDeleteTranscoder,
      TranscodingTask.__deleteTranscoder,
      TranscodingTask.__ebTranscoderStopFailed,
      TranscodingTask.__ebTranscoderDeleteFailed,
      TranscodingTask.__ebAcknowledgeFailed):
      Now wait for all transcoder to be stoped and deleted
      before firing the TranscodingTerminated event.

2007-06-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/utils.py (resolveFailure):
      Made the resolveFailure resolve all failures
      if no error type is specified.

2007-06-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admintask.py (IAdminTask.isActive,
      IAdminTask.hasTerminated):
    * flumotion/transcoder/admin/montask.py (MonitoringTask.hasTerminated,
      MonitoringTask.__deleteMonitor):
    * flumotion/transcoder/admin/taskmanager.py
      (TaskManager.__apartTasklessComponent,
      TaskManager.__releaseTasklessComponent,
      TaskManager.__cbRemoveComponent):
      Added hasTerminated method.
      Added some more logging.

2007-06-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/componentproxy.py
      (BaseComponentProxy.__isOperationTerminated,
      BaseComponentProxy.__asyncForceStop):
    * flumotion/transcoder/errors.py (OperationAbortedError):
      Changed OperationAborted exception to OperationAbortedError.

2007-06-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/targets.py
      (AudioVideoTarget._sourceDiscovered):
      Log when a input file do not have audio or video
      stream but we tolerate it.

2007-06-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/transtask.py (TranscodingTask.cbGotStatus,
      TranscodingTask.__cbSelectPotentialTranscoder):
      Do not select as potential transcoder one taht
      has already been acknowledged. This to allow the transcoding
      of a file that previously fail and for which a sad component
      is still running.

2007-06-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/componentproxy.py
      (BaseComponentProxy._getUIDictValue,
      BaseComponentProxy.__isOperationTerminated):
      Check for the PBConnectionLost exception.
      Corrected a bug where the UI state waiter was used
      insteed of the proper value, changed to use the getter.

2007-06-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/context.py (TargetContext,
      TargetContext.shouldBeAnalyzed, TargetContext.shouldGenerateLinkFile,
      TargetContext.shouldHaveAudio, TargetContext.shouldHaveVideo):
    * flumotion/component/transcoder/job.py
      (TranscoderJob.__cbProcessTarget, TranscoderJob.__cbTargetIsAMedia):
      Properly handle the verification of target files when
      beeing tolerant.

2007-06-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/compconsts.py:
    Added component's constants file.

2007-06-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/admintask.py
      (IAdminTask.waitActiveWorker):
    * flumotion/transcoder/admin/monitoring.py
      (Monitoring.__cbMonitorSetGoesIdle,
      Monitoring.__cbRetrieveActiveWorker, Monitoring.__ebStartingFailure):
    * flumotion/transcoder/admin/montask.py
      (MonitoringTask.waitActiveWorker):
    * flumotion/transcoder/admin/transcoding.py
      (Transcoding.__cbTranscoderSetGoesIdle,
      Transcoding.__cbRetrieveActiveWorker,
      Transcoding.__ebStartingFailure):
    * flumotion/transcoder/admin/transtask.py
      (TranscodingTask.waitActiveWorker,
      TranscodingTask.onTranscoderJobStateChanged,
      TranscodingTask.__waitPotentialTranscoder,
      TranscodingTask.cbGotStatus, TranscodingTask.ebGetStatusError,
      TranscodingTask.__cbSelectPotentialTranscoder,
      TranscodingTask.__startTranscoder,
      TranscodingTask.__ebPotentialTranscoderFailure,
      TranscodingTask.__cbGotPotentialTranscoder,
      TranscodingTask.__loadTranscoder):
    * flumotion/transcoder/utils.py (overrideResult, shiftResult):
    Made the active worker retrieval asynchronous to allow
    the use of UI state information during worker selection.

2007-06-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/componentproxy.py
      (BaseComponentProxy._getUIDictValue):
      For now, do not allow getting a ui state value
      if the UI state has not been retrieved

2007-06-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/componentproxy.py
      (BaseComponentProxy._getUIDictValue,
      BaseComponentProxy._waitUIDictValue,
      BaseComponentProxy.__getUIDictValue):
    * flumotion/transcoder/admin/proxies/transcoderproxy.py
      (TranscoderProxy.getTranscoderProgress,
      TranscoderProxy.waitTranscoderProgress, TranscoderProxy.getStatus,
      TranscoderProxy.waitStatus, TranscoderProxy.getJobState,
      TranscoderProxy.waitJobState, TranscoderProxy.isAcknowledged,
      TranscoderProxy.waitIsAcknowledged):
      Added the synchronous getter too. There are usefull in the event
      handlers where you  know the ui state is set.

2007-06-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/transcoderproxy.py
      (TranscoderProxy.waitTranscoderProgress, TranscoderProxy.waitStatus,
      TranscoderProxy.waitJobState, TranscoderProxy.waitIsAcknowledged):
      Change getters names from getXX to waitXX because it return a deferred.

2007-06-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/componentproxy.py
      (BaseComponentProxy._getUIDictValue,
      BaseComponentProxy.__cbGetUIDictValue):
    * flumotion/transcoder/admin/proxies/transcoderproxy.py
      (TranscoderProxy.getTranscoderProgress, TranscoderProxy.getStatus,
      TranscoderProxy.getJobState, TranscoderProxy.isAcknowledged,
      TranscoderProxy.getReport):
      Change the UI State's getters to return deferred.

2007-06-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/targets.py
      (AudioVideoTarget._updatePipeline):
      Corrected copy/past error.

2007-06-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/componentproxy.py
      (BaseComponentProxy.retrieveUIState):
      Made the retrieveUIState deferred return the component
      inplace of the state reference.

2007-06-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/montask.py (MonitoringTask.stop,
      MonitoringTask.__startup, MonitoringTask.__startMonitor,
      MonitoringTask.__cbMonitorStartSucceed,
      MonitoringTask.__cbMonitorGoesHappy):
    * flumotion/transcoder/admin/transtask.py (TranscodingTask.stop,
      TranscodingTask.__cbTranscoderGoesHappy):
    Corrected a bug when removeing listener, and comparing worker name.

2007-06-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py (TranscoderAdmin,
      TranscoderAdmin.onMonitoredFileAdded,
      TranscoderAdmin.onMonitoredFileRemoved,
      TranscoderAdmin.onTranscodingTerminated):
      Basic transcoding impelmentation without scheduling.

2007-06-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/groupproxy.py
      (ComponentGroupProxy._stateAppend):
    Menor cleanup.

2007-06-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/componentproxy.py
      (BaseComponentProxy.__isOperationTerminated,
      BaseComponentProxy.__stopOrDelete,
      BaseComponentProxy.__asyncForceStop,
      BaseComponentProxy.__asyncForceDelete,
      BaseComponentProxy.__asyncRetryKillIfNeeded,
      BaseComponentProxy.__asyncForceKillFailed,
      BaseComponentProxy.__asyncForceStopFailed,
      BaseComponentProxy.__asyncForceDeleteFailed):
    * flumotion/transcoder/errors.py (OperationAborted,
      OperationAborted.__init__):
      Try to properly handle stale broker error.

2007-06-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/transcoder.py
      (MultiTranscoder._updateProgress):
      Corrected a bug for when there is no sink yet.

2007-06-19  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filetranscoder.py
      (FileTranscoderMedium.remote_acknowledge,
      FileTranscoder.do_acknowledge, FileTranscoder.init,
      FileTranscoder.do_setup, FileTranscoder.onAcknowledged,
      FileTranscoder.__ebAcknowledgeError,
      FileTranscoder.__finalizeDiagnoseMode,
      FileTranscoder.__finalizeStandardMode):
    * flumotion/component/transcoder/job.py (TranscoderJob.acknowledge):
    Allow acknowledge method to be called more than one time.
    Some name cleanup.

2007-06-19  Sebastien Merle  <sebastien@fluendo.com>

    * conf/transcoder-data.ini:
    * flumotion/component/transcoder/targets.py
      (AudioTarget._sourceDiscovered, VideoTarget._sourceDiscovered,
      AudioVideoTarget.__init__, AudioVideoTarget._sourceDiscovered,
      AudioVideoTarget._updatePipeline, _sourceDiscovered):
    * flumotion/transcoder/admin/datasource/dataprops.py (AudioVideoData):
    * flumotion/transcoder/admin/datasource/datasource.py
      (IDataSource.retrieveTargetConfig):
    * flumotion/transcoder/admin/datasource/dummysource.py:
    * flumotion/transcoder/admin/datastore/configstore.py
      (AudioVideoConfig.getTolerance):
    * flumotion/transcoder/admin/transprops.py
      (createTranscodingConfigFromContext):
    * flumotion/transcoder/enums.py:
    * flumotion/transcoder/transconfig.py (AudioVideoConfig):
    Added a tolerence property for the Audio/Video tragets to
    be able to allow the input files without audio.

2007-06-15  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/transtask.py
      (TranscodingTask.onTranscoderJobStateChanged):
      Added logging of transcoder job state changes.

2007-06-15  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/filetranscoder.py
      (FileTranscoderMedium.remote_acknowledge,
      FileTranscoder.do_acknowledge, FileTranscoder.init,
      FileTranscoder.do_setup, FileTranscoder.onacknowledged,
      FileTranscoder.__ebacknowledgeError,
      FileTranscoder.__finalizeStandardMode):
    Corrected typo.

2007-06-15  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/log.py:
    Changed wrong WARNING to WARN.

2007-06-15  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/Makefile.am:
    * flumotion/component/transcoder/base.xml:
    * flumotion/component/transcoder/filemonitor.py (FileMonitor,
      FileMonitor.init):
    * flumotion/component/transcoder/filetranscoder.py (FileTranscoder,
      FileTranscoder.init, FileTranscoder._logCurrentException):
    * flumotion/component/transcoder/filetranscoder.xml:
    * flumotion/component/transcoder/transcoder.py (MultiTranscoder):
    * flumotion/component/transcoder/watcher.py (Watcher):
    * flumotion/transcoder/admin/admin.py (TranscoderAdmin):
    * flumotion/transcoder/admin/datasource/dummysource.py
      (DummyDataSource):
    * flumotion/transcoder/admin/datasource/filesource.py (FileDataSource):
    * flumotion/transcoder/admin/datasource/sqlsource.py (SQLDataSource):
    * flumotion/transcoder/admin/datastore/adminstore.py (StoreLogger):
    * flumotion/transcoder/admin/main.py (possess, exorcize, main):
    * flumotion/transcoder/admin/montask.py:
    * flumotion/transcoder/admin/proxies/managerset.py
      (FlumotionProxiesLogger):
    * flumotion/transcoder/admin/taskmanager.py (TaskManager):
    * flumotion/transcoder/admin/transtask.py:
    * flumotion/transcoder/log.py (setDefaultCategory, log, debug, info,
      warning, error):
    * flumotion/transcoder/process.py (Process):
    Added a constant file for the components.
    More proxying of flumotion.common.log in flumotion.transcoder.log.

2007-06-15  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py (TranscoderAdmin):
    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/datastore/adminstore.py (StoreLogger):
    * flumotion/transcoder/admin/main.py (possess, exorcize, main):
    * flumotion/transcoder/admin/monitoring.py (Monitoring):
    * flumotion/transcoder/admin/proxies/managerset.py
      (FlumotionProxiesLogger):
    * flumotion/transcoder/admin/transcoding.py (Transcoding):
    Changed the logging categories, and centralized them in adminconsts.

2007-06-15  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/taskmanager.py (TaskManager.getLabel,
      TaskManager.addTask, TaskManager.removeTask, TaskManager.start,
      TaskManager.pause, TaskManager.resume, TaskManager.abort,
      TaskManager.addComponent, TaskManager.removeComponent,
      TaskManager.onComponentMoodChanged, TaskManager._tryStarting,
      TaskManager.__cbAddComponent, TaskManager.__ebGetPropertiesFailed,
      TaskManager.__ebStopFailed, TaskManager.__ebDeleteFailed,
      TaskManager.__ebStartupFailed, TaskManager.__ebResumeFailed,
      TaskManager.__ebPauseFailed):
      Added a label to the task manager for better logging.

2007-06-15  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/montask.py
      (MonitoringTask.__electMonitor):
    * flumotion/transcoder/admin/transtask.py
      (TranscodingTask.__electTranscoder):
    Corrected get UI state callbacks parameter.

2007-06-15  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/utils.py (callWithTimeout, __ebForwardErrback,
      __cbForwardCallback):
      Return the correct deferred, and properly cancel the timeout.

2007-06-15  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/utils.py (__ebForwardErrback,
      __cbForwardCallback):
    Corrected function parameter order.

2007-06-15  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/utils.py (callWithTimeout):
    Should return the new deferred.

2007-06-15  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/compprops.py:
    * flumotion/transcoder/admin/context/customercontext.py:
    * flumotion/transcoder/admin/context/profilecontext.py:
    * flumotion/transcoder/admin/context/transcontext.py:
    * flumotion/transcoder/admin/monprops.py:
    * flumotion/transcoder/admin/proxies/componentproxy.py
      (BaseComponentProxy.kill,
      BaseComponentProxy.__asyncRetryKillIfNeeded,
      BaseComponentProxy.__asyncForceStopFailed,
      BaseComponentProxy.__asyncForceDeleteFailed):
    * flumotion/transcoder/admin/proxies/groupproxy.py
      (ComponentGroupProxy._loadComponent):
    * flumotion/transcoder/admin/proxies/monitorset.py:
    * flumotion/transcoder/admin/proxies/transcoderset.py:
    * flumotion/transcoder/admin/transprops.py:
    Corrected some import path that changed.

2007-06-14  Sebastien Merle  <sebastien@fluendo.com>

    * The admin can now react to monitoring event and
    start basic transcoding tasks without acknowlegment.

2007-06-14  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/adminconsts.py:
    * flumotion/transcoder/admin/admintask.py:
    * flumotion/transcoder/admin/montask.py:
    * flumotion/transcoder/admin/taskmanager.py:
    * flumotion/transcoder/admin/transtask.py:
    Revised transcoding task and transcoding manager.

2007-06-14  Sebastien Merle  <sebastien@fluendo.com>

    * The admin can now start transcoder components with
    proper configuration generation, and path virtualization.

2007-06-08  Sebastien Merle  <sebastien@fluendo.com>

    * Refactoring for generic idle state detection,
      and source cleanup.

2007-05-31  Sebastien Merle  <sebastien@fluendo.com>

    * First version with monitoring distribution.

2007-05-08  Sebastien Merle  <sebastien@fluendo.com>

    * Added monitors starting.

2007-05-07  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/job.py:
    * flumotion/component/transcoder/transcoder.py:
    * flumotion/component/transcoder/binmaker.py:
    Applied corrections made for the old transcoder.
    Did some cleanup.

2007-04-04  Sebastien Merle  <sebastien@fluendo.com>

    * Corrected the componenet UI to show in groud control.
    * Implemented low level loadComponent in proxies.

2007-03-28  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/properties.py:
    Corrected a bug that made multi level property lists to fail.
    * flumotion/transcoder/admin/adminconfig.py:
    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/contexts/admincontext.py:
    Made the context determine the datasource to use.
    * flumotion/transcoder/admin/datasource/filesource.py:
    * flumotion/transcoder/admin/datasource/dataprops.py:
    Added a basic read only file data source that read data from an INI file.

2007-03-27  Sebastien Merle  <sebastien@fluendo.com>

    * Added to each proxies a context that abstract configuration.

2007-03-27  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/atmosphereproxy.py:
    * flumotion/transcoder/admin/proxies/flowproxy.py:
    * flumotion/transcoder/admin/proxies/fluproxy.py:
    * flumotion/transcoder/admin/proxies/managerproxy.py:
    * flumotion/transcoder/admin/proxies/monitorproxy.py:
    * flumotion/transcoder/admin/proxies/transcoderproxy.py:
    * flumotion/transcoder/admin/proxies/workerproxy.py:
    * flumotion/transcoder/admin/proxies/componentproxy.py:
    Made all proxies to have a reference to there manager proxy.
    Now the componenet proxies retrieve the reference
    to the proxy of the worker they are running.


2007-03-26  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/proxies/transcoderset.py:
    * flumotion/transcoder/admin/proxies/transcoderproxy.py:
    * flumotion/transcoder/admin/proxies/monitorset.py:
    * flumotion/transcoder/admin/proxies/monitorproxy.py:
    Added Proxies and Sets for the transcoder componenets.
    * flumotion/transcoder/enums.py:
    * flumotion/component/transcoder/job.py:
    * flumotion/component/transcoder/filetranscoder.py:
    * flumotion/component/transcoder/filemonitor.py:
    * flumotion/component/transcoder/filemonitor_admin_gtk.py:
    Changed more strang-as-enum to flumotion.common.enum
    * Some random refactoring...


2007-03-23  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/admin.py:
    * flumotion/transcoder/admin/proxies/componentset.py:
    * flumotion/transcoder/admin/proxies/componentproxy.py:
    Really added the Flumotion Component Proxy and a component set.


2007-03-22  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/properties.py:
    Now properly raise AttributeError from __getattr__.
    * Added the flumotion element proxying framework.
    * Did some folder structure refactoring.
    * Broke old common.py in errors.py, enums.py and log.py

2007-03-13  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/context.py:
    Added a random number to the temporary files
    to let two task with the same input file
    to run at the same time.
    Add the PID to the report name.
    * flumotion/component/transcoder/job.py:
    * flumotion/transcoder/jobconfig.py:
    * flumotion/transcoder/jobreport.py:
    Added time reporting.
    Change report-file to report-template
    to add a custom part to the filename.
    * flumotion/transcoder/properties.py:
    Added a datetime property.
    * flumotion/component/transcoder/filetranscoder.py:
    Added an acknowledge step, this way zombie component
    will not move input files preventing other transcoding
    tasks for the same input file to work properly.
    The transcoding task will now move input file
    only after acknowledgment.

2007-03-12  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/jobconfig.py:
    * flumotion/transcoder/jobreport.py:
    * flumotion/transcoder/properties.py:
    * flumotion/transcoder/common.py:
    * flumotion/component/transcoder/job.py:
    * flumotion/component/transcoder/targets.py:
    * flumotion/component/transcoder/filetranscoder.py:
    * flumotion/component/transcoder/videosize.py:
    * flumotion/component/transcoder/context.py:
    * flumotion/component/transcoder/binmaker.py:
    Changed all string-as-enum to flumotion.common.enum

2007-03-09  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/admin/targetstore.py:
    * flumotion/transcoder/admin/profilestore.py:
    * flumotion/transcoder/admin/customerstore.py:
    * flumotion/transcoder/admin/adminstore.py:
    * flumotion/transcoder/admin/basestore.py:
    Removed some unused imports

2007-03-09  Sebastien Merle  <sebastien@fluendo.com>

    * Made the TranscoderError keeps information about
    what exception or failure cause it to be raised.
    Added custom getExceptionMessage and getFailureMessage
    that return more information if a TranscoderError is involved.
    Change all modules to use these new functions.
    * Created a data source interface to retrieve transcoder data
    asynchronously, and implemented a dummy data source with
    static data.
    * Created Store classes that are able to load there data from
    a specified data source and initialise asynchronously.
    These classes handle event broadcasting about customers, profiles targets
    events like addition deletion and so on.

2007-03-01  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/transcoder/jobconfig.py:
    * flumotion/transcoder/jobreport.py:
    * flumotion/transcoder/properties.py:
    The root property bags should now  inherite from RootPropertyBag,
    and the root bag parent is itself.
    Added a ChildDict property.
    Corrected some setup bugs to be able to directly assign a bag.

2007-03-01  Sebastien Merle  <sebastien@fluendo.com>

    * Moved LoggerProxy ans TranscoderError to flumotion/transcoder/common
    * Changed the component name to file-monitor and file-transcoder
    and changed the class names for consistency.

2007-02-28  Sebastien Merle  <sebastien@fluendo.com>

    * Deleted old transcoder files, and changed the new one
    from flumotion/cluster/transcoder to flumotion/transcoder.
    Started the transcoder admin in flumotion/transcoder/admin
    (better that flumotion/cluster/transcoder/admin...)
    * Some minor changes and cleaning to the properties classes.

2007-02-26  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/jobcomp.py:
    * flumotion/cluster/transcoder/jobreport.py:
    * flumotion/cluster/transcoder/jobconfig.py:
    * flumotion/cluster/transcoder/inifile.py:
    Change the  loading and saving of config/report to
    be extern from the properies description.
    This way The file format is independent from the
    property objects.

2007-02-21  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/reporter.py:
    Corrected a vicious typo in CPUUsageMixin.
    Removed some unused object field initialization.

2007-02-21  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/job.py:
    Added the proper call to handle the CPU usage measurments.
    * flumotion/component/transcoder/reporter.py:
    Added a class Mixin to handle usage measurments.
    Added some measurment (job, preprocess, transcoding) to Reporter,
    and some (postprocess, analyse) to TargetReporter.
    * flumotion/cluster/transcoder/jobreport.py:
    Added a custom property to show CPU usage.
    Added some CPU usage properties to JobReport and TargetReport.
    * flumotion/cluster/transcoder/properties.py:
    Let Fraction accept long values.

2007-02-21  Sebastien Merle  <sebastien@fluendo.com>
    * flumotion/component/transcoder/job.py:
    Uncommented the input file moving.
    * doc/design.odt:
    Added a short draft of design document.

2007-02-21  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/cluster/transcoder/pipelinecrawler.py:
    Better handling of gstreamer internal changes when
    crawling the pipline using non-standard method.

2007-02-20  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/reporter.py:
    * flumotion/component/transcoder/context.py:
    * flumotion/component/transcoder/jobcomp.py:
    * flumotion/component/transcoder/job.py:
    Refactored to make the transcoding job a lot more independent
    of the specified configuration and report.
    Now all is encapsulated in a Context class that handle
    all the job specifics. A Reporter class has been added
    that help the filling of the report.
    This way the Job can use whatsoever kind of config
    and report object.
    * flumotion/component/transcoder/common.py:
    Added A logger proxy class that delegate all logging
    calls to a specified logger, and can add some custom
    arguments to the call.
    * flumotion/cluster/transcoder/pipelinecrawler.py:
    Filters the None elements when crawling.
    * flumotion/cluster/transcoder/jobreport.py:
    Moved all methods to the Reporter class.
    * flumotion/cluster/transcoder/jobconfig.py:
    Moved all methods to the Context class.

2007-02-16  Sebastien Merle  <sebastien@fluendo.com>
    * flumotion/component/transcoder/job_admin_gtk.py:
    Cleanup stateSetitem method.

2007-02-16  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/jobcomp.py:
    Relay the transcoding job events to the UI with the uiState.
    * flumotion/component/transcoder/job.py:
    The transcoding job now fire events.
    At creation, an event sink object can be specified
    to receive the events.
    * flumotion/component/transcoder/job_admin_gtk.py:
    Added a UI to the transcoding job.
    * flumotion/component/transcoder/job.py:
    * flumotion/cluster/transcoder/jobreport.py:
    Changed status to state and added a global status property.


2007-02-13  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/transcoder.py:
    Now call the pipeline callback when the state change to PLAY.
    Pass the transcoder targets to the pipeline callback.
    Corrected the progression handling to take the smallest position
    of the pipeline sinks.
    * flumotion/component/transcoder/thumbsink.py:
    Changed the sink to async, added a name parameter.
    * flumotion/component/transcoder/targets.py:
    Added a tag parameter to better name the gst elements.
    Store the encoding bins to be able to generate a report.
    * flumotion/component/transcoder/binmaker.py:
    Added queue elements at the beginning of the encoding bins.
    * flumotion/cluster/transcoder/pipelinecrawler.py:
    Added a generic pipeline crawler class.
    Can be used to parse a pipeline the SAX way.
    * flumotion/cluster/transcoder/jobreport.py:
    Add pipeline information report for the source and the targets.
    Separate the audio and video tags for discover report.
    * flumotion/cluster/transcoder/properties.py:
    Added a value dictionary property.
    * flumotion/component/transcoder/jobcomp.py:
    * flumotion/component/transcoder/job.py:
    More separation between component and transcoding job.

2007-02-07  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/transcoder.py:
    Added progression notification.
    More exception handling within gstreamer called methods.
    * flumotion/component/transcoder/targets.py:
    Changed the thumnailing prob methods and
    added a keyframe unit.
    * flumotion/component/transcoder/thumbsink.py:
    Changed the base class from gst.Element to gst.BaseSink.
    * flumotion/component/transcoder/job.py:
    Added basic progression logging.
    Test for config and report existance.
    * flumotion/cluster/transcoder/properties.py:
    Changed the list item naming to support very large list.
    * flumotion/cluster/transcoder/jobconfig.py:
    Added keyframe unit for thumbnailing targets.

2007-02-07  Sebastien Merle  <sebastien@fluendo.com>
    Added the project files. Was previously commited in fsp by error.

2007-02-06  Sebastien Merle  <sebastien@fluendo.com>
    * flumotion/component/transcoder/binmaker.py:
    Added an optional parameter to the bin maker functions
    to be able to make bins without rate elementes.

2007-02-06  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/binmaker.py:
    Reverted the video boxing filling color to black.
    * flumotion/component/transcoder/thumbsink.py:
    * flumotion/component/transcoder/targets.py:
    Added thumbnailing target with a custom sink.

2007-02-05  Sebastien Merle  <sebastien@fluendo.com>

    * flumotion/component/transcoder/common.py:
    * flumotion/component/transcoder/job.py:
    * flumotion/component/transcoder/jobcomp.py:
    Separated the transcoding job from the flumotion component.
    * All files:
    Change the headers to have correct license.
    * flumotion/cluster/transcoder/jobconfig.py:
    Added some thumbnail configuration properties.

2007-02-02  Sebastien Merle  <sebastien@fluendo.com>
    First commit of the new transcoder version.

2006-11-15  Andy Wingo  <wingo@pobox.com>

    * flumotion/transcoder/job.py (Job.finish, Job.fail): _exit
    instead of exit, so as to work correctly from deferred callbacks
    and other quoi.
    (Job.finish): Thanks distributed pychecker!

2006-11-09  Andy Wingo  <wingo@pobox.com>

    * flumotion/transcoder/transcoder.py
    (JobProcessProtocol.sendMessage): Fix handling of translatables.
    Fixes #402.

2006-11-07  Andy Wingo  <wingo@pobox.com>

    * flumotion/transcoder/config.py (Profile.__init__): Don't default
    to 30 channels of audio at 30 Hz.

    * flumotion/transcoder/trans.py (MultiTranscoder._makeEncodingBin)
    (MultiTranscoder._makeAudioEncodebin)
    (MultiTranscoder._makeVideoEncodebin)
    (MultiTranscoder._makePipeline): Construct the whole pipeline at
    the beginning, only linking the tee's sinks at PAUSED.

    * conf/flumotion-transcoder-test.ini: Add another config for
    testing two-at-a-time goodness.

2006-11-07  Edward Hervey  <edward@fluendo.com>

    * flumotion/transcoder/trans.py:
    Set the maximum bytes size of decodebin's internal queues to
    10 Mbytes.

2006-11-07  Andy Wingo  <wingo@pobox.com>

    * flumotion/transcoder/job.py (Job.transcode_done): Tell the
    output discoverers whether they should expect audio and video.
    (Job.output_discovered): Consider the output a failure if e.g. we
    expected video but didn't get it. Fixes #389.

2006-11-02  Andy Wingo  <wingo@pobox.com>

    * flumotion/transcoder/transcoder.py (Transcoder.startJob): Damn
    you Mike Smith!

2006-11-02  Thomas Vander Stichele  <thomas at apestaart dot org>

    * doc/redhat/flumotion-transcoder.init:
      daemon now removes its own pid file

2006-11-02  Andy Wingo  <wingo@pobox.com>

    * flumotion/transcoder/Makefile.am (component_PYTHON): Dist
    job.py.

    * flumotion/transcoder/transcoder.py (InputHandler): Removed, no
    longer necessary.
    (JobProcessProtocol): Implemented a process protocol for jobs.
    (Transcoder): Track watched directories directly. Use the
    JobProcessProtocol to spawn jobs, allowing us to spawn multiple
    jobs. Sort tasks using a priority queue.

    * flumotion/transcoder/main.py (main): No need to tell the
    transcoder to run.

    * flumotion/transcoder/job.py (Job.get_output_filename): Use
    getOutputBasename from the profile.
    (Job.perform_get_request): Fix pychecker-caught errors.
    (usage): Fix usage.
    (Job.output_recognized): Update to use new cortado arguments, as
    in [4354], [4355], [4356].

    * conf/flumotion-transcoder-test.ini (maxjobs): Add maxjobs to the
    example.

    * flumotion/transcoder/config.py (Profile.getOutputBasename): New
    method.
    (Customer.alreadyProcessedFiles): New method.
    (Customer.alreadyProcessedFiles.all): Pithy!
    (Config.parse): Always set default values for [global] section.

    * flumotion/test/test_transcoder_config.py
    (TestConfigParser.testParseProfile): Test getOutputBasename.

    * misc/pycheckerhelp.py: Pacify pychecker?

    * flumotion/transcoder/config.py (Config): Make a SectionParser so
    that we can handle options in [global].

    * flumotion/test/test_transcoder_config.py
    (TestConfigParser.testParseFull): Test [global] parsing, and
    parsing of entire config files.

2006-11-01  Andy Wingo  <wingo@pobox.com>

    * flumotion/transcoder/job.py (Job): Implement a job object to do
    the transcode. Makes flumotion-transcoder-job work.

2006-11-01  Michael Smith  <msmith@fluendo.com>

    * flumotion/transcoder/transcoder.py:
      Use true/false, not 1/0, because cortado doesn't understand the
      latter.

2006-11-01  Michael Smith  <msmith@fluendo.com>

    * flumotion/transcoder/transcoder.py:
      Missing c- on height check.

2006-11-01  Michael Smith  <msmith@fluendo.com>

    * flumotion/transcoder/transcoder.py:
      Use New Hotness, not Old Crapness, when generating links to
      cortado/gatekeeper.

2006-11-01  Thomas Vander Stichele  <thomas at apestaart dot org>

    * doc/redhat/flumotion-transcoder.init:
      remove --log property since it was removed from the program

2006-11-01  Andy Wingo  <wingo@pobox.com>

    * flumotion/transcoder/main.py (daemonizeHelper): Don't force a
    dep on new flumotion.

2006-11-01  Thomas Vander Stichele  <thomas at apestaart dot org>

    * TODO:
      add a note
    * flumotion-transcoder.spec.in:
      package -job

2006-11-01  Andy Wingo  <wingo@pobox.com>

    * flumotion/transcoder/trans.py (calculateOutputSize)
    (getOutputVideoCaps): Factor out of the Profile object; these are
    just functions now.
    (MultiTranscoder._discoveredCb): Hah!

    * flumotion/transcoder/config.py (Config.parse): Fix parsing of
    whole files.

    * flumotion/transcoder/transcoder.py (InputHandler): Refactor to
    use the new config interface.
    (Transcoder): Refactor to use the new config interface.

    * bin/Makefile.am (sbin_SCRIPTS):
    * bin/flumotion-transcoder-job.in:
    * configure.ac: s/transcode-job/transcoder-job/.

    * flumotion/transcoder/config.py (Config.parse): Make sure we
    notice errors reading the config files.

    * flumotion/transcoder/main.py (main): Use the common daemonize
    facilities. Convert to the new config interface.

    * flumotion/transcoder/job.py (main): New file, not completely
    implemented yet.

    * bin/flumotion-transcoder-job.in: New file, will be what the
    transcoder will run.

    * bin/flumotion-transcoder.in: Make more conventional.

    * flumotion/transcoder/config.py (Customer.ensureDirs): Fix error
    caught by pychecker.
    (Customer.ensureDirs): Appeasement.

    * flumotion/test/test_transcoder_config.py (TestConfigParser):
    Remove a test stub.

2006-11-01  Michael Smith  <msmith@fluendo.com>

    * conf/flumotion-transcoder-test.ini:
      Add my test config which just writes everything under /tmp/

2006-11-01  Andy Wingo  <wingo@pobox.com>

    * flumotion/transcoder/config.py (Profile.__init__): Add
    maxheight, maxwidth, extension properties.

    * flumotion/test/test_transcoder_config.py
    (TestConfigParser.testParseProfile): Test the profile parser.

    * flumotion/transcoder/config.py (Customer.ensureDirs): Factor out
    of __init__.
    (SectionParser.parseFromTable, Customer.__init__): Fix bugs caught
    by the test suite.

    * flumotion/test/test_transcoder_config.py
    (TestConfigParser.testParseCustomer): Test the customer parser.

    * flumotion/transcoder/Makefile.am (component_PYTHON):
    * flumotion/transcoder/config.py: Refactor the config parser.

    * configure.ac:
    * flumotion/Makefile.am:
    * flumotion/test/Makefile.am:
    * flumotion/test/__init__.py:
    * flumotion/test/common.py:
    * flumotion/test/test_transcoder_config.py: Add trial
    infrastructure.

2006-11-01  Michael Smith  <msmith@fluendo.com>

    * flumotion/transcoder/trans.py:
    * flumotion/transcoder/transcoder.py:
      Add maxheight, maxwidth properties; doesn't change default
      behaviour.

2006-11-01  Michael Smith  <msmith@fluendo.com>

    * flumotion/transcoder/trans.py:
      Calculate input display aspect ratio correctly.

2006-11-01  Andy Wingo  <wingo@pobox.com>

    * README: Write a bit.

2006-11-01  Michael Smith  <msmith@fluendo.com>

    * flumotion/transcoder/transcoder.py:
      Delete outputting 'framerate', since it was buggy, and is no longer
      needed.
      Don't divide by zero. Dividing by zero isn't cool.

2006-10-25  Edward Hervey  <edward@fluendo.com>

    * conf/flumotion-transcoder.ini:
    Added two new profiles, both Mpeg4Video and Raw Audio:
    _low : no change in video format, 800kbit/s
    _high : 720x576@25fps, 2Mbit/s, GOP of 10 frames

2006-10-24  Thomas Vander Stichele  <thomas at apestaart dot org>

    * flumotion/transcoder/transcoder.py:
      don't move to errordirectory if it is not specified
      use os._exit() in child to make sure we get out of the reactor

2006-10-24  Thomas Vander Stichele  <thomas at apestaart dot org>

    * flumotion/transcoder/trans.py:
      remove audiorate, as it introduces clearly audible distortion
      in the result files, and it seems to work fine without it

2006-10-24  Thomas Vander Stichele  <thomas at apestaart dot org>

    * conf/flumotion-transcoder.ini:
    * flumotion/transcoder/transcoder.py:
      Add a "getrequest" config parameter through which creation
      of an output file can be announced.  Can interpolate some
      of the values related to the outgoing file.
      Add example config for it.

2006-10-24  Thomas Vander Stichele  <thomas at apestaart dot org>

    * bin/flumotion-transcoder.in:
    * flumotion/transcoder/main.py:
      Use twisted harder.

2006-10-24  Edward Hervey  <edward@fluendo.com>

    * conf/flumotion-transcoder.ini:
    Added example configuration for DV in Quicktime.
    Renamed the configurations to something more sensible.

2006-10-24  Thomas Vander Stichele  <thomas at apestaart dot org>

    * bin/flumotion-transcoder.in:
      run as a twisted app

2006-10-21  Thomas Vander Stichele  <thomas at apestaart dot org>

    * Makefile.am:
      add pychecker target
    * flumotion/transcoder/transcoder.py:
      fix some bugs shown by pychecker

2006-10-21  Thomas Vander Stichele  <thomas at apestaart dot org>

    * configure.ac:
      add misc setup.py
    * doc/redhat/flumotion-transcoder.init:
      fix it up with the new pid writing code;
      service flumotion-transcoder restart now works
    * flumotion/transcoder/main.py:
      write pid file
    * flumotion/transcoder/trans.py:
      remove unused imports
    * flumotion/transcoder/transcoder.py:
      rename TranscoderTask to InputHandler since that's what it is
      add errordirectory and move files there that had an error when
      transcoding
      fork for a task
      fix a logic error in _nextTask that made it only ever run tasks
      for one customer
    * flumotion/transcoder/watcher.py:
      add a FIXME about a missing method

2006-10-19  Edward Hervey  <edward@fluendo.com>

    * flumotion/transcoder/trans.py:
    Invert the order of audio filters, it is now:
    RAWAUDIO ! audiorate ! audioconvert ! audioresample ! ENCODER
    Implement queue-overrun detection system for streams that don't
    emit 'no-more-pads'

2006-10-18  Thomas Vander Stichele  <thomas at apestaart dot org>

    * flumotion/transcoder/trans.py:
    * flumotion/transcoder/transcoder.py:
    * tests/ogger.py:
      s/audiochanns/audiochannels/g

2006-10-17  Edward Hervey  <edward@fluendo.com>

    * flumotion/transcoder/trans.py:
    Added audiochanns property to specify the number of audio channels in
    output.
    Added audiorate in the audio encoding bin.
    Set scaling method of videoscale to bilinear.
    * flumotion/transcoder/transcoder.py:
    Added reason to the error signal, adjusted emission of that signal
    accordingly.
    * flumotion/transcoder/watcher.py:
    Fix for files not present before.
    * tests/ogger.py:
    Added specific rate and channel for ogger test profile.
    * TODO:
    Extended items to do and commented others.

2006-10-16  Thomas Vander Stichele  <thomas at apestaart dot org>

    * flumotion/transcoder/transcoder.py:
      fix cortado link

2006-10-16  Thomas Vander Stichele  <thomas at apestaart dot org>

    * Makefile.am:
    * configure.ac:
      add tests dir to be cleaned up
    * flumotion/transcoder/trans.py:
      add timeout param to MultiTranscoder so testing is easier
      don't use lines longer than 80 chars

2006-10-16  Edward Hervey  <edward@fluendo.com>

    * flumotion/transcoder/trans.py:
    * flumotion/transcoder/transcoder.py:
    * flumotion/transcoder/watcher.py:
    Syntax fixes. Serialize state_change and signal emissions in
    main thread.

2006-10-16  Edward Hervey  <edward@fluendo.com>

    * flumotion/transcoder/Makefile.am:
    * flumotion/transcoder/watcher.py:
    New Watcher class with two subclasses:
    DirectoryWatcher to watch a directory
    FilesWatcher to watch a series of files
    * flumotion/transcoder/trans.py:
    Use the FilesWatcher to figure out when a Pipeline is no longer
    outputting data (deadlocked?) and report the error.
    If the discoverer reports a file isn't a media file, include the
    discovered mimetypes in the logs.
    * flumotion/transcoder/transcoder.py:
    Use the DirectoryWatcher from watcher.py
    small fixes.

2006-10-16  Edward Hervey  <edward@fluendo.com>

    * flumotion/transcoder/trans.py:
    (_decodebinNoMorePadsCb): handle case where decodebin emits
    'no-more-pads' more than once. Make sure we don't connect pads to
    non-existent bins.
    (_buildEncodingBin): Don't create audio (or video) bin if the source
    media doesn't have audio (or video). Don't put a time limit on the
    pre-encoder queues.

2006-10-15  Thomas Vander Stichele  <thomas at apestaart dot org>

    * TODO:
      add things to work on
    * flumotion/transcoder/trans.py:
    * flumotion/transcoder/transcoder.py:
      make the transcoder daemon use the factored-out
      MultiTranscoder object
      Clean up output, variable names, logging, ...

2006-10-15  Thomas Vander Stichele  <thomas at apestaart dot org>

    * flumotion/transcoder/trans.py:
    * tests/ogger.py:
      further cleanups
      handle non-existing files

2006-10-15  Thomas Vander Stichele  <thomas at apestaart dot org>

    * flumotion/transcoder/trans.py:
      further cleanups, now has a MultiTranscoder separated out
      that we can test standalone
    * tests/ogger.py:
      fix up test for standalone MultiTranscoder

2006-10-13  Thomas Vander Stichele  <thomas at apestaart dot org>

    * flumotion-transcoder.spec.in:
      add dep
    * flumotion/transcoder/transcoder.py:
      write out a full iframe line
      round up width and height of applet to multiple of 16

2006-10-13  Thomas Vander Stichele  <thomas at apestaart dot org>

    * flumotion/transcoder/transcoder.py:
      remove prints, clean up logging a little

2006-10-13  Thomas Vander Stichele  <thomas at apestaart dot org>

    * conf/flumotion-transcoder.ini:
    * flumotion/transcoder/main.py:
    * flumotion/transcoder/transcoder.py:
      add discovery of transcoded files
      add generation of .link files for .ogg files that can be served
      by cortado

2006-10-12  Thomas Vander Stichele  <thomas at apestaart dot org>

    * Makefile.am:
    * transcoder/Makefile.am:
      pass distcheck

2006-10-12  Thomas Vander Stichele  <thomas at apestaart dot org>

    * Makefile.am:
    * configure.ac:
    * doc/redhat/flutterd.init:
    * doc/redhat/flutterd.sysconfig:
    * flutter.spec.in:
      rename to flumotion-transcoder

2006-10-12  Thomas Vander Stichele  <thomas at apestaart dot org>

    * bin/Makefile.am:
    * bin/flumotion-transcoder.in:
    * configure.ac:
    * flumotion/__init__.py:
    * flumotion/transcoder/__init__.py:
    * flumotion/transcoder/main.py:
    * flumotion/transcoder/transcoder.py:
      split out file in modules and a simple script that boots into them

2006-10-12  Thomas Vander Stichele  <thomas at apestaart dot org>

    * configure.ac:
      check for Flumotion
    * bin/flutterd:
      use flumotion logging
      add daemonize and options parsing

2006-10-12  Thomas Vander Stichele  <thomas at apestaart dot org>

    * configure.ac:
    * misc/preamble.py:
      turn into a flumotion project

2006-10-12  Thomas Vander Stichele  <thomas at apestaart dot org>

    * bin/flutterd:
      make documentation and comments respect 80 character width
      add/fix up logging so the log says something useful

2006-10-12  Thomas Vander Stichele  <thomas at apestaart dot org>

    * bin/flutterd:
      remove print's that should not be there
    * configure.ac:
      remove check for python headers
    * flutter.spec.in:
      add buildrequires

2006-10-06  Edward Hervey  <edward@fluendo.com>

    * bin/flutterd:
    Implemented code to create proper video caps depending on:
    _input width, height and pixel-aspect-ratio
    _configured width and/or height and/or pixel-aspect-ratio
    _configured framerate

2006-10-05  Thomas Vander Stichele  <thomas at apestaart dot org>

    * conf/flutterd.ini:
    * flutter.spec.in:
    * test.ini:
      update spec file and config

2006-10-05  Thomas Vander Stichele  <thomas at apestaart dot org>

    * doc/redhat/flutterd.init:
    * doc/redhat/flutterd.sysconfig:
    * flutter.spec.in:
    * misc/Makefile.am:
    * misc/preamble.py:
      more autotools goodness

2006-10-05  Thomas Vander Stichele  <thomas at apestaart dot org>

    * LICENSE.Flumotion:
    * Makefile.am:
    * autogen.sh:
    * bin/Makefile.am:
    * configure.ac:
    * flutterd:
      adding autotools spread

2006-10-05  Edward Hervey  <edward@fluendo.com>

    * flutrans.py:
    * test.ini:
    Initial revision of the Fluendo Transcoding Daemon
